/* ==================================================
   Render Materials v1.5 (Upgraded)
   - No layout
   - No effects globales
   - Solo seteo de tokens + overlays internos por material
   ========================================================= */

/* =========================================================
   BASE MATERIAL BEHAVIOR
   - Estos overlays NO dependen de layout externo.
   - Requiere que el elemento material tenga:
     position: relative; overflow: hidden;
     (si no lo tienen, lo inyectamos aquÃ­ sin romper layout)
   ========================================================= */

[data-material] {
  position: relative;
  overflow: hidden;

  /* default fallbacks por si falta algo */
  --hi-glass-opacity: 0.08;
  --hi-glass-frost: 0.10;

  --hi-rim-strength: 0.10;
  --hi-spec-strength: 0.12;
  --hi-grain-amount: 0.08;

  --hi-glow-strength: 0.00;
  --hi-glint-opacity: 0.00;

  /* color accents (puedes tunear si quieres) */
  --hi-accent-cyan: 160, 220, 255;
  --hi-accent-pink: 255, 180, 220;
}

/* ---------------------------------------------------------
   PANEL GLASS OVERLAY STACK
   ::before = starfield + haze interno (screen)
   ::after  = glare diagonal + rim tint (screen)
---------------------------------------------------------- */

[data-material="glassCold"]::before,
[data-material="glassCritical"]::before {
  content: "";
  position: absolute;
  inset: -12%;
  pointer-events: none;
  z-index: 0;

  /* universo dentro del vidrio */
  background-image:
    /* fine stars */
    radial-gradient(1px 1px at 12% 18%, rgba(255, 255, 255, 0.45), transparent 45%),
    radial-gradient(1px 1px at 22% 72%, rgba(255, 255, 255, 0.22), transparent 45%),
    radial-gradient(1px 1px at 38% 44%, rgba(255, 255, 255, 0.18), transparent 45%),
    radial-gradient(1px 1px at 49% 12%, rgba(255, 255, 255, 0.34), transparent 45%),
    radial-gradient(1px 1px at 57% 63%, rgba(255, 255, 255, 0.20), transparent 45%),
    radial-gradient(1px 1px at 66% 28%, rgba(255, 255, 255, 0.22), transparent 45%),
    radial-gradient(1px 1px at 78% 58%, rgba(255, 255, 255, 0.14), transparent 45%),
    radial-gradient(1px 1px at 86% 22%, rgba(255, 255, 255, 0.20), transparent 45%),
    radial-gradient(1px 1px at 92% 76%, rgba(255, 255, 255, 0.15), transparent 45%),
    radial-gradient(1px 1px at 8% 86%, rgba(255, 255, 255, 0.14), transparent 45%),

    /* luminous anchors (antes â€œfat starsâ€ ðŸ˜Œ) */
    radial-gradient(3px 3px at 72% 78%, rgba(var(--hi-accent-cyan), 0.12), transparent 70%),
    radial-gradient(3px 3px at 28% 74%, rgba(var(--hi-accent-pink), 0.10), transparent 70%),
    radial-gradient(2px 2px at 18% 30%, rgba(255, 255, 255, 0.12), transparent 62%),

    /* soft haze inside */
    radial-gradient(900px 520px at 60% 25%, rgba(var(--hi-accent-cyan), 0.05), transparent 68%),
    radial-gradient(900px 520px at 40% 75%, rgba(var(--hi-accent-pink), 0.04), transparent 70%);

  mix-blend-mode: screen;
  filter: blur(0.25px) saturate(1.10);
  opacity: calc(0.18 + (var(--hi-glow-strength) * 0.9));
  transform: translateZ(0);
}

[data-material="glassCold"]::after,
[data-material="glassCritical"]::after {
  content: "";
  position: absolute;
  inset: -20%;
  pointer-events: none;
  z-index: 0;

  /* glare diagonal + rim tint */
  background:
    linear-gradient(120deg,
      transparent 0%,
      rgba(255, 255, 255, 0.05) 30%,
      rgba(255, 255, 255, 0.12) 42%,
      rgba(255, 255, 255, 0.05) 54%,
      transparent 70%),
    radial-gradient(900px 420px at 18% 28%, rgba(var(--hi-accent-cyan), 0.06), transparent 60%),
    radial-gradient(900px 420px at 82% 28%, rgba(var(--hi-accent-pink), 0.05), transparent 60%);

  mix-blend-mode: screen;
  filter: blur(0.8px);
  opacity: calc(0.10 + (var(--hi-glint-opacity) * 1.2) + (var(--hi-rim-strength) * 0.9));
  transform: rotate(-6deg) translateZ(0);
}

/* Asegura que el contenido real estÃ© encima de overlays */
[data-material="glassCold"]>*,
[data-material="glassCritical"]>* {
  position: relative;
  z-index: 1;
}

/* =========================================================
   GLASS: COLD (default panel)
   - sutil, elegante, cosmos tenue
   ========================================================= */
[data-material="glassCold"] {
  --hi-glass-opacity: 0.10;
  --hi-glass-frost: 0.12;

  --hi-rim-strength: 0.10;
  --hi-spec-strength: 0.12;
  --hi-grain-amount: 0.10;

  --hi-glow-strength: 0.04;
  /* <- antes 0, ahora â€œvivoâ€ */
  --hi-glint-opacity: 0.06;
  /* <- tiny sparkle */
}

/* =========================================================
   GLASS: CRITICAL (KPI / panel dominante)
   - mÃ¡s glow, mÃ¡s â€œpremiumâ€
   ========================================================= */
[data-material="glassCritical"] {
  --hi-glass-opacity: 0.12;
  --hi-glass-frost: 0.10;

  --hi-rim-strength: 0.16;
  --hi-spec-strength: 0.18;

  --hi-glow-strength: 0.10;
  /* <- sube el cosmos dentro */
  --hi-glint-opacity: 0.12;
  /* <- glare mÃ¡s presente */
}

/* =========================================================
   METAL FRAME
   ========================================================= */
[data-material="metalFrame"] {
  --hi-rim-strength: 0.08;
  --hi-spec-strength: 0.10;

  --hi-glass-opacity: 0.00;
  --hi-glass-frost: 0.00;
  --hi-grain-amount: 0.00;

  --hi-glow-strength: 0.00;
  --hi-glint-opacity: 0.00;
}

/* =========================================================
   CHART INK
   ========================================================= */
[data-material="chartInk"] {
  --hi-ink-contrast: 0.80;
  --hi-glow-strength: 0.00;
  --hi-grain-amount: 0.00;
}

/* =========================================================
   OPTIONAL: Micro-grain (inside glass) driven by token
   - No rayas diagonales, solo textura suave
   ========================================================= */
[data-material="glassCold"] .hi-grain,
[data-material="glassCritical"] .hi-grain {
  opacity: var(--hi-grain-amount);
}