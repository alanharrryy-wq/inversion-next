/* =========================================================
   FULLSCREEN UNIVERSE (cosmic.stage.css)
   Goal: deep starfield + nebula + sparkle + cinematic haze
   ========================================================= */

:root {
    --cosmic-bg: #05070c;
    --cosmic-ink: rgba(255, 255, 255, 0.06);

    /* knobs (tune fast) */
    --nebula-a: 0.14;
    --nebula-b: 0.10;
    --stars-fine-a: 0.85;
    --stars-fat-a: 0.55;
    --twinkle-a: 0.55;
    --dust-a: 0.16;
    --haze-a: 0.55;
    --vignette-a: 0.62;
    --grain-a: 0.09;
    --bloom-a: 0.80;

    /* board */
    --board-radius: 28px;
    --board-border: rgba(255, 255, 255, 0.11);
    --board-glass: rgba(255, 255, 255, 0.025);
    --board-shadow: rgba(0, 0, 0, 0.55);
}

@media (prefers-reduced-motion: reduce) {

    .cosmic-twinkle,
    .cosmic-drift,
    .cosmic-sparkle {
        animation: none !important;
    }
}

/* FULLSCREEN UNIVERSE */
.cosmic-stage {
    position: fixed;
    inset: 0;
    overflow: hidden;
    background: var(--cosmic-bg);
}

/* each layer */
.cosmic-layer {
    position: absolute;
    inset: -12%;
    pointer-events: none;
    transform: translateZ(0);
    will-change: transform, opacity, filter;
}

/* content host (scaled board lives above) */
.cosmic-content {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

/* -----------------------------
   1) BASE: deep space base + faint directional light
------------------------------ */
.cosmic-base {
    background:
        radial-gradient(1400px 900px at 18% 10%, rgba(255, 255, 255, 0.05), transparent 62%),
        radial-gradient(1200px 820px at 84% 6%, rgba(170, 200, 255, 0.05), transparent 64%),
        radial-gradient(1800px 1100px at 55% 75%, rgba(90, 110, 150, 0.05), transparent 70%),
        linear-gradient(180deg, rgba(0, 0, 0, 0.20), rgba(0, 0, 0, 0.55)),
        var(--cosmic-bg);
    opacity: 1;
}

/* -----------------------------
   2) NEBULA: richer colors, deeper blur, layered
------------------------------ */
.cosmic-nebula {
    background:
        radial-gradient(900px 650px at 25% 78%, rgba(120, 190, 255, var(--nebula-a)), transparent 68%),
        radial-gradient(900px 720px at 70% 28%, rgba(255, 160, 220, var(--nebula-b)), transparent 70%),
        radial-gradient(1100px 780px at 60% 88%, rgba(190, 220, 255, 0.08), transparent 72%),
        radial-gradient(800px 520px at 82% 62%, rgba(140, 255, 220, 0.05), transparent 70%);
    filter: blur(18px) saturate(1.18);
    opacity: 0.95;
    mix-blend-mode: screen;
}

/* subtle drift (parallax vibe without JS) */
.cosmic-drift {
    animation: drift 18s ease-in-out infinite;
}

@keyframes drift {

    0%,
    100% {
        transform: translate3d(0, 0, 0) scale(1.02);
    }

    50% {
        transform: translate3d(-1.2%, 0.8%, 0) scale(1.03);
    }
}

/* -----------------------------
   3) STARS: fine layer (many)
   (repeat the pattern by scaling layer slightly)
------------------------------ */
.cosmic-stars {
    background-image:
        radial-gradient(1px 1px at 12% 18%, rgba(255, 255, 255, 0.42), transparent 45%),
        radial-gradient(1px 1px at 22% 72%, rgba(255, 255, 255, 0.26), transparent 45%),
        radial-gradient(1px 1px at 38% 44%, rgba(255, 255, 255, 0.22), transparent 45%),
        radial-gradient(1px 1px at 49% 12%, rgba(255, 255, 255, 0.36), transparent 45%),
        radial-gradient(1px 1px at 57% 63%, rgba(255, 255, 255, 0.22), transparent 45%),
        radial-gradient(1px 1px at 66% 28%, rgba(255, 255, 255, 0.26), transparent 45%),
        radial-gradient(1px 1px at 78% 58%, rgba(255, 255, 255, 0.18), transparent 45%),
        radial-gradient(1px 1px at 86% 22%, rgba(255, 255, 255, 0.26), transparent 45%),
        radial-gradient(1px 1px at 92% 76%, rgba(255, 255, 255, 0.20), transparent 45%),
        radial-gradient(1px 1px at 8% 86%, rgba(255, 255, 255, 0.18), transparent 45%);
    opacity: var(--stars-fine-a);
    filter: blur(0.15px);
}

/* starfield duplicate pass (gives density) */
.cosmic-stars.cosmic-stars-2 {
    transform: scale(1.15);
    opacity: 0.55;
    filter: blur(0.25px);
}

/* -----------------------------
   4) BIG STARS / GLINTS: fat stars with bloom
------------------------------ */
.cosmic-fatstars {
    background-image:
        radial-gradient(2px 2px at 18% 30%, rgba(255, 255, 255, 0.20), transparent 62%),
        radial-gradient(2px 2px at 62% 22%, rgba(255, 255, 255, 0.16), transparent 62%),
        radial-gradient(2px 2px at 82% 40%, rgba(255, 255, 255, 0.18), transparent 62%),
        radial-gradient(3px 3px at 72% 78%, rgba(255, 255, 255, 0.12), transparent 66%),
        radial-gradient(3px 3px at 28% 74%, rgba(255, 255, 255, 0.10), transparent 66%),
        radial-gradient(4px 4px at 90% 18%, rgba(200, 230, 255, 0.11), transparent 70%),
        radial-gradient(4px 4px at 10% 58%, rgba(255, 220, 240, 0.10), transparent 70%);
    opacity: var(--stars-fat-a);
    filter: blur(0.2px);
    mix-blend-mode: screen;
}

/* -----------------------------
   5) TWINKLE: animate micro-opacity + tiny scale
------------------------------ */
.cosmic-twinkle {
    animation: twinkle 7s ease-in-out infinite;
    opacity: var(--twinkle-a);
}

@keyframes twinkle {

    0%,
    100% {
        opacity: 0.30;
        transform: translateZ(0) scale(1);
    }

    50% {
        opacity: 0.78;
        transform: translateZ(0) scale(1.01);
    }
}

/* -----------------------------
   6) SPARKLE: occasional tiny glints (very subtle)
------------------------------ */
.cosmic-sparkle {
    background:
        radial-gradient(10px 10px at 22% 34%, rgba(255, 255, 255, 0.08), transparent 62%),
        radial-gradient(14px 14px at 68% 22%, rgba(200, 230, 255, 0.06), transparent 64%),
        radial-gradient(12px 12px at 84% 52%, rgba(255, 220, 240, 0.06), transparent 66%),
        radial-gradient(10px 10px at 35% 78%, rgba(255, 255, 255, 0.05), transparent 65%);
    mix-blend-mode: screen;
    filter: blur(0.6px);
    opacity: 0.6;
    animation: sparkle 11s ease-in-out infinite;
}

@keyframes sparkle {

    0%,
    100% {
        opacity: 0.35;
        transform: translate3d(0, 0, 0) scale(1);
    }

    50% {
        opacity: 0.70;
        transform: translate3d(0.6%, -0.4%, 0) scale(1.02);
    }
}

/* -----------------------------
   7) DUST: subtle depth texture (no more diagonal jailbars)
------------------------------ */
.cosmic-dust {
    background:
        radial-gradient(900px 420px at 35% 88%, rgba(255, 255, 255, 0.05), transparent 72%),
        radial-gradient(700px 360px at 70% 84%, rgba(255, 255, 255, 0.04), transparent 74%),
        radial-gradient(850px 420px at 60% 40%, rgba(255, 255, 255, 0.03), transparent 76%);
    filter: blur(20px);
    opacity: var(--dust-a);
}

/* -----------------------------
   8) HAZE: lens haze / atmospheric glow
------------------------------ */
.cosmic-haze {
    background:
        radial-gradient(1600px 900px at 50% 45%, rgba(255, 255, 255, 0.04), transparent 68%),
        radial-gradient(1200px 700px at 60% 20%, rgba(160, 220, 255, 0.03), transparent 70%),
        radial-gradient(1200px 700px at 40% 80%, rgba(255, 180, 220, 0.025), transparent 72%);
    filter: blur(18px);
    opacity: var(--haze-a);
    mix-blend-mode: screen;
}

/* -----------------------------
   9) VIGNETTE: cinematic framing
------------------------------ */
.cosmic-vignette {
    background:
        radial-gradient(1200px 900px at 50% 40%, rgba(0, 0, 0, 0), rgba(0, 0, 0, var(--vignette-a)));
    opacity: 1;
}

/* -----------------------------
   10) GRAIN: subtle, non-band, film-like
------------------------------ */
.cosmic-grain {
    background:
        radial-gradient(1200px 900px at 50% 50%, rgba(255, 255, 255, 0.02), transparent 70%),
        repeating-linear-gradient(0deg,
            rgba(255, 255, 255, 0.010) 0px,
            rgba(255, 255, 255, 0.010) 1px,
            transparent 2px,
            transparent 6px);
    mix-blend-mode: overlay;
    opacity: var(--grain-a);
}

/* -----------------------------
   11) BLOOM: corner bloom for “expensive”
------------------------------ */
.cosmic-bloom {
    background:
        radial-gradient(900px 520px at 65% 18%, rgba(160, 220, 255, 0.06), transparent 66%),
        radial-gradient(700px 420px at 18% 22%, rgba(255, 200, 230, 0.05), transparent 70%);
    filter: blur(22px);
    opacity: var(--bloom-a);
    mix-blend-mode: screen;
}

/* =========================================================
   SCALER
   ========================================================= */

.scale-host {
    position: absolute;
    inset: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.scale-canvas {
    position: absolute;
    left: 50%;
    top: 50%;
    transform-origin: center center;
}

/* =========================================================
   BOARD (physical object feel)
   ========================================================= */

.board-frame {
    position: relative;
    width: 100%;
    height: 100%;
    transform: translateZ(0);
}

.board-shadow {
    position: absolute;
    inset: -3.5%;
    background:
        radial-gradient(1200px 620px at 50% 85%, var(--board-shadow), transparent 70%),
        radial-gradient(900px 420px at 50% 15%, rgba(0, 0, 0, 0.35), transparent 72%);
    filter: blur(20px);
    opacity: 0.95;
}

.board-glass {
    position: absolute;
    inset: 0;
    border-radius: var(--board-radius);
    border: 1px solid var(--board-border);
    background: var(--board-glass);
    box-shadow:
        0 30px 120px rgba(0, 0, 0, 0.45),
        inset 0 1px 0 rgba(255, 255, 255, 0.10);
    overflow: hidden;
    backdrop-filter: blur(10px);
}

/* inner rim light (thin) */
.board-glass::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: var(--board-radius);
    pointer-events: none;
    background:
        radial-gradient(1200px 500px at 50% 0%, rgba(255, 255, 255, 0.10), transparent 60%),
        linear-gradient(180deg, rgba(255, 255, 255, 0.06), transparent 35%);
    opacity: 0.55;
}

/* subtle chroma edge (very slight) */
.board-glass::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: var(--board-radius);
    pointer-events: none;
    background:
        radial-gradient(900px 420px at 20% 30%, rgba(120, 190, 255, 0.06), transparent 60%),
        radial-gradient(900px 420px at 80% 30%, rgba(255, 160, 220, 0.05), transparent 60%);
    mix-blend-mode: screen;
    opacity: 0.35;
}

.board-reflection {
    position: absolute;
    left: -10%;
    right: -10%;
    bottom: -22%;
    height: 42%;
    background:
        radial-gradient(800px 260px at 50% 0%, rgba(255, 255, 255, 0.10), transparent 70%),
        radial-gradient(900px 320px at 70% 25%, rgba(160, 220, 255, 0.06), transparent 74%),
        radial-gradient(900px 320px at 30% 25%, rgba(255, 200, 230, 0.05), transparent 74%);
    filter: blur(14px);
    opacity: 0.28;
    transform: scaleY(-1);
    mix-blend-mode: screen;
}

/* optional: micro noise on board to feel “material” */
.board-noise {
    position: absolute;
    inset: 0;
    border-radius: var(--board-radius);
    pointer-events: none;
    background:
        repeating-linear-gradient(90deg,
            rgba(255, 255, 255, 0.006) 0px,
            rgba(255, 255, 255, 0.006) 1px,
            transparent 2px,
            transparent 7px);
    opacity: 0.20;
    mix-blend-mode: overlay;
}