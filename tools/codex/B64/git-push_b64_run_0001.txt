### BEGIN B64 FILE: git-push.ps1
### BEGIN B64 CHUNK 1/1
PCMKZ2l0LXB1c2gucHMxIChWNS4wIFBST0RVQ1RJT04pCkFkZHM6CiAgLSBDaGVja3NNb2RlOiBTbWFydCB8IEZ1bGwgfCBPZmYKICAtIFdhdGNoIG1vZGUgd2l0aCBkZWJvdW5jZSArIGxvY2sgZmlsZQogIC0gU2FmZSBkZWZhdWx0cyAoYXV0by8qIGJyYW5jaCkKICAtIERldGVjdCByZW1vdGUgZGVmYXVsdCBicmFuY2ggKG9yaWdpbiBIRUFEIGJyYW5jaCkKICAtIE9wdGlvbmFsIEZpeFJlbW90ZUhlYWRNYWluIChsb2NhbCBvbmx5KQoKVVNBR0U6CiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgRmFzdCAtQWxsb3dNYWluIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQXV0b1N0YXNoIC1PcGVuUHIgLU9wZW5Mb2dPbkZhaWwKICAuXGdpdC1wdXNoLnBzMSAtTW9kZSBTYWZlIC1DaGVja3NNb2RlIFNtYXJ0IC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQ2hlY2tzTW9kZSBGdWxsIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLVdhdGNoIC1Nb2RlIFNhZmUgLUF1dG9TdGFzaCAtT3BlbkxvZ09uRmFpbAojPgoKI3JlcXVpcmVzIC1WZXJzaW9uIDcuMApbQ21kbGV0QmluZGluZygpXQpwYXJhbSgKICAgIFtWYWxpZGF0ZVNldCgnU2FmZScsJ0Zhc3QnKV0KICAgIFtzdHJpbmddJE1vZGUgPSAnRmFzdCcsCgogICAgW3N0cmluZ10kTWVzc2FnZSA9ICcnLAoKICAgIFtzd2l0Y2hdJERyeVJ1biwKICAgIFtzd2l0Y2hdJE9wZW5Mb2dPbkZhaWwsCiAgICBbc3dpdGNoXSROb0F1dG9QdWxsLAogICAgW3N3aXRjaF0kQXV0b1N0YXNoLAoKICAgIFtzd2l0Y2hdJEFsbG93TWFpbiwKICAgIFtzd2l0Y2hdJE9wZW5QciwKICAgIFtzd2l0Y2hdJE9wZW5QckluQnJvd3NlciwKICAgIFtzd2l0Y2hdJENyZWF0ZVJlbGVhc2UsCgogICAgW2Jvb2xdJEdlbmVyYXRlQ2hhbmdlbG9nID0gJHRydWUsCiAgICBbc3dpdGNoXSRTa2lwQ2hlY2tzLAogICAgW3N3aXRjaF0kU2tpcFNlY3JldFNjYW4sCiAgICBbc3dpdGNoXSRTa2lwTGFyZ2VGaWxlU2NhbiwKICAgIFtzd2l0Y2hdJFNraXBBdWRpdCwKCiAgICBbVmFsaWRhdGVTZXQoJ25vbmUnLCdwYXRjaCcsJ21pbm9yJywnbWFqb3InKV0KICAgIFtzdHJpbmddJFZlcnNpb25CdW1wID0gJ25vbmUnLAoKICAgIFtzd2l0Y2hdJFRhZywKICAgIFtib29sXSRQdXNoVGFnID0gJHRydWUsCgogICAgW3N3aXRjaF0kRmFpbE9uQXVkaXQsCiAgICBbVmFsaWRhdGVTZXQoJ2xvdycsJ21vZGVyYXRlJywnaGlnaCcsJ2NyaXRpY2FsJyldCiAgICBbc3RyaW5nXSRBdWRpdExldmVsID0gJ2hpZ2gnLAoKICAgIFtpbnRdJE1heEZpbGVNQiA9IDIwLAogICAgW2ludF0kVGFpbExpbmVzID0gMTYwLAogICAgW2ludF0kS2VlcExvZ1J1bnMgPSAzMCwKCiAgICBbVmFsaWRhdGVTZXQoJ1NtYXJ0JywnRnVsbCcsJ09mZicpXQogICAgW3N0cmluZ10kQ2hlY2tzTW9kZSA9ICdTbWFydCcsCgogICAgW3N3aXRjaF0kV2F0Y2gsCiAgICBbaW50XSRXYXRjaEludGVydmFsU2VjID0gNSwKICAgIFtpbnRdJFdhdGNoRGVib3VuY2VTZWMgPSAxNSwKICAgIFtzd2l0Y2hdJFdhdGNoT25jZSwKICAgIFtzd2l0Y2hdJFdhdGNoU3RvcE9uRmFpbCwKCiAgICBbc3RyaW5nXSRCYXNlQnJhbmNoID0gJycsCiAgICBbc3dpdGNoXSRGaXhSZW1vdGVIZWFkTWFpbiwKCiAgICBbc3dpdGNoXSRTYWZlVXNlQ3VycmVudEJyYW5jaAopCgokRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCgokc2NyaXB0OlJvb3QgPSAkbnVsbAokc2NyaXB0OlJ1bkRpciA9ICRudWxsCiRzY3JpcHQ6V2F0Y2hMb2dEaXIgPSAkbnVsbAokc2NyaXB0OlJ1blN0YXJ0ID0gJG51bGwKJHNjcmlwdDpSdW5Mb2NrSGFuZGxlID0gJG51bGwKJHNjcmlwdDpMb2dDb3VudGVycyA9IEB7fQokc2NyaXB0OlN1bW1hcnkgPSBbb3JkZXJlZF1Ae30KCmZ1bmN0aW9uIFdyaXRlLVN0ZXAoW2ludF0kcGVyY2VudCwgW3N0cmluZ10kbWVzc2FnZSkgewogICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtU3RhdHVzICRtZXNzYWdlIC1QZXJjZW50Q29tcGxldGUgJHBlcmNlbnQKICAgIFdyaXRlLUhvc3QgKCJbezAsM30lXSB7MX0iIC1mICRwZXJjZW50LCAkbWVzc2FnZSkKfQoKZnVuY3Rpb24gV3JpdGUtV2Fybihbc3RyaW5nXSRtZXNzYWdlKSB7CiAgICBXcml0ZS1Ib3N0ICgiV0FSTjogezB9IiAtZiAkbWVzc2FnZSkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKfQoKZnVuY3Rpb24gSW52b2tlLVRvYXN0KFtzdHJpbmddJFRpdGxlLCBbc3RyaW5nXSRCb2R5KSB7CiAgICB0cnkgewogICAgICAgIGlmIChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIC1OYW1lIEJ1cm50VG9hc3QpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEltcG9ydC1Nb2R1bGUgQnVybnRUb2FzdCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICBpZiAoR2V0LUNvbW1hbmQgTmV3LUJ1cm50VG9hc3ROb3RpZmljYXRpb24gLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHsKICAgICAgICAgICAgICAgICAgICBOZXctQnVybnRUb2FzdE5vdGlmaWNhdGlvbiAtVGV4dCAkVGl0bGUsICRCb2R5IHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICgiVG9hc3QgbW9kdWxlIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gKCJUb2FzdCBjaGVjayBmYWlsZWQ6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9CiAgICB0cnkgeyBbY29uc29sZV06OkJlZXAoOTAwLCAxNTApIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdCZWVwIGZhaWxlZC4nIH0KICAgIFdyaXRlLUhvc3QgKCIhISB7MH0gLSB7MX0iIC1mICRUaXRsZSwgJEJvZHkpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0N5YW4KfQoKZnVuY3Rpb24gRW5zdXJlLURpcihbc3RyaW5nXSRQYXRoKSB7CiAgICBpZiAoLW5vdCAkUGF0aCkgeyB0aHJvdyAnRW5zdXJlLURpcjogcGF0aCBpcyBlbXB0eS4nIH0KICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhdGgpKSB7CiAgICAgICAgTmV3LUl0ZW0gLUl0ZW1UeXBlIERpcmVjdG9yeSAtUGF0aCAkUGF0aCAtRm9yY2UgfCBPdXQtTnVsbAogICAgfQp9CgpmdW5jdGlvbiBOZXctUnVuTG9nRGlyKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICAkcWFEaXIgPSBKb2luLVBhdGggJFJlcG9Sb290ICdxYScKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRxYURpciAnbG9ncycKICAgIEVuc3VyZS1EaXIgJHFhRGlyCiAgICBFbnN1cmUtRGlyICRsb2dzRGlyCiAgICAkcnVuRGlyID0gSm9pbi1QYXRoICRsb2dzRGlyICgicnVuX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkcnVuRGlyCiAgICByZXR1cm4gJHJ1bkRpcgp9CgpmdW5jdGlvbiBOZXctV2F0Y2hMb2dEaXIoW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRxYURpciA9IEpvaW4tUGF0aCAkUmVwb1Jvb3QgJ3FhJwogICAgJGxvZ3NEaXIgPSBKb2luLVBhdGggJHFhRGlyICdsb2dzJwogICAgRW5zdXJlLURpciAkcWFEaXIKICAgIEVuc3VyZS1EaXIgJGxvZ3NEaXIKICAgICR3YXRjaERpciA9IEpvaW4tUGF0aCAkbG9nc0RpciAoIndhdGNoX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkd2F0Y2hEaXIKICAgIHJldHVybiAkd2F0Y2hEaXIKfQoKZnVuY3Rpb24gUmVtb3ZlLU9sZExvZ1J1bnMoW3N0cmluZ10kUmVwb1Jvb3QsIFtpbnRdJEtlZXApIHsKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRSZXBvUm9vdCAncWFcbG9ncycKICAgIGlmICgtbm90IChUZXN0LVBhdGggJGxvZ3NEaXIpKSB7IHJldHVybiB9CiAgICB0cnkgewogICAgICAgICRkaXJzID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkbG9nc0RpciAtRGlyZWN0b3J5IC1FcnJvckFjdGlvbiBTdG9wIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uTmFtZSAtbGlrZSAncnVuXyonIH0gfAogICAgICAgICAgICBTb3J0LU9iamVjdCBOYW1lIC1EZXNjZW5kaW5nCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBsaXN0IGxvZyBkaXJzOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgIHJldHVybgogICAgfQogICAgaWYgKCRkaXJzLkNvdW50IC1sZSAkS2VlcCkgeyByZXR1cm4gfQogICAgJHRvRGVsZXRlID0gJGRpcnMgfCBTZWxlY3QtT2JqZWN0IC1Ta2lwICRLZWVwCiAgICBmb3JlYWNoICgkZCBpbiAkdG9EZWxldGUpIHsKICAgICAgICB0cnkgeyBSZW1vdmUtSXRlbSAtUmVjdXJzZSAtRm9yY2UgJGQuRnVsbE5hbWUgLUVycm9yQWN0aW9uIFN0b3AgfQogICAgICAgIGNhdGNoIHsgV3JpdGUtV2FybiAoIkZhaWxlZCB0byByZW1vdmUgb2xkIGxvZyBkaXIgezB9OiB7MX0iIC1mICRkLkZ1bGxOYW1lLCAkXy5FeGNlcHRpb24uTWVzc2FnZSkgfQogICAgfQp9CgpmdW5jdGlvbiBTZXQtTG9jYWxFeGNsdWRlKFtzdHJpbmddJFJlcG9Sb290LCBbc3RyaW5nW11dJFBhdHRlcm5zKSB7CiAgICAkZXhjbHVkZVBhdGggPSBKb2luLVBhdGggJFJlcG9Sb290ICcuZ2l0XGluZm9cZXhjbHVkZScKICAgIHRyeSB7CiAgICAgICAgJGRpciA9IFNwbGl0LVBhdGggJGV4Y2x1ZGVQYXRoIC1QYXJlbnQKICAgICAgICBFbnN1cmUtRGlyICRkaXIKICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRleGNsdWRlUGF0aCkpIHsgTmV3LUl0ZW0gLUl0ZW1UeXBlIEZpbGUgLVBhdGggJGV4Y2x1ZGVQYXRoIC1Gb3JjZSB8IE91dC1OdWxsIH0KICAgICAgICAkZXhpc3RpbmcgPSBAKCkKICAgICAgICB0cnkgeyAkZXhpc3RpbmcgPSBHZXQtQ29udGVudCAkZXhjbHVkZVBhdGggLUVycm9yQWN0aW9uIFN0b3AgfSBjYXRjaCB7ICRleGlzdGluZyA9IEAoKSB9CiAgICAgICAgZm9yZWFjaCAoJHAgaW4gJFBhdHRlcm5zKSB7CiAgICAgICAgICAgIGlmICgtbm90ICgkZXhpc3RpbmcgLWNvbnRhaW5zICRwKSkgeyBBZGQtQ29udGVudCAtUGF0aCAkZXhjbHVkZVBhdGggLVZhbHVlICRwIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgdGhyb3cgKCJGYWlsZWQgdG8gdXBkYXRlIGxvY2FsIGdpdCBleGNsdWRlIGZpbGU6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9Cn0KCmZ1bmN0aW9uIE5ldy1Mb2dGaWxlUGF0aChbc3RyaW5nXSRQcmVmaXgsIFtzdHJpbmddJExvZ0RpcikgewogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJHNjcmlwdDpSdW5EaXIgfQogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJGVudjpURU1QIH0KICAgIEVuc3VyZS1EaXIgJExvZ0RpcgogICAgaWYgKC1ub3QgJHNjcmlwdDpMb2dDb3VudGVycy5Db250YWluc0tleSgkTG9nRGlyKSkgeyAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdID0gMCB9CiAgICAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdKysKICAgICRzYWZlID0gKCRQcmVmaXggLXJlcGxhY2UgJ1teYS16QS1aMC05Xy4tXScsJ18nKQogICAgcmV0dXJuIEpvaW4tUGF0aCAkTG9nRGlyICgiezA6MDAwfV97MX0ubG9nIiAtZiAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdLCAkc2FmZSkKfQoKZnVuY3Rpb24gV3JpdGUtTG9nVGFpbChbc3RyaW5nXSRMb2dQYXRoLCBbaW50XSRUYWlsTGluZXMpIHsKICAgIHRyeSB7CiAgICAgICAgJHRhaWwgPSBHZXQtQ29udGVudCAtUGF0aCAkTG9nUGF0aCAtVGFpbCAkVGFpbExpbmVzIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgaWYgKCR0YWlsKSB7CiAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0xhc3QgbG9nIGxpbmVzOicgLUZvcmVncm91bmRDb2xvciBNYWdlbnRhCiAgICAgICAgICAgICR0YWlsIHwgRm9yRWFjaC1PYmplY3QgeyBXcml0ZS1Ib3N0ICRfIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkNvdWxkIG5vdCByZWFkIGxvZyB0YWlsOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgfQp9CgpmdW5jdGlvbiBJbnZva2UtQ21kKFtzdHJpbmddJExhYmVsLCBbc3RyaW5nXSRDb21tYW5kLCBbc3RyaW5nXSRMb2dQYXRoID0gJG51bGwsIFtzdHJpbmddJExvZ0RpciA9ICRudWxsLCBbc3dpdGNoXSRBbGxvd0ZhaWx1cmUpIHsKICAgIGlmICgtbm90ICRMb2dQYXRoKSB7ICRMb2dQYXRoID0gTmV3LUxvZ0ZpbGVQYXRoICRMYWJlbCAkTG9nRGlyIH0KICAgICRsb2dQYXJlbnQgPSBTcGxpdC1QYXRoICRMb2dQYXRoIC1QYXJlbnQKICAgIEVuc3VyZS1EaXIgJGxvZ1BhcmVudAoKICAgIFdyaXRlLUhvc3QgJycKICAgIFdyaXRlLUhvc3QgKCItPiB7MH0iIC1mICRMYWJlbCkgLUZvcmVncm91bmRDb2xvciBDeWFuCiAgICBXcml0ZS1Ib3N0ICgiICAgJCB7MH0iIC1mICRDb21tYW5kKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5CgogICAgJHN0YXJ0ID0gR2V0LURhdGUKICAgICRvdXRwdXQgPSAmIGNtZC5leGUgL2MgJENvbW1hbmQgMj4mMQogICAgJGV4aXQgPSAkTEFTVEVYSVRDT0RFCiAgICAkZW5kID0gR2V0LURhdGUKICAgICRoZWFkZXIgPSBAKAogICAgICAgICgiQ09NTUFORDogezB9IiAtZiAkQ29tbWFuZCksCiAgICAgICAgKCJTVEFSVDogezB9IiAtZiAkc3RhcnQpLAogICAgICAgICgiRU5EOiB7MH0iIC1mICRlbmQpLAogICAgICAgICgiRVhJVDogezB9IiAtZiAkZXhpdCksCiAgICAgICAgJy0tLS0nCiAgICApCiAgICAkaGVhZGVyICsgJG91dHB1dCB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRW5jb2RpbmcgdXRmOAoKICAgIGlmICgkZXhpdCAtbmUgMCkgewogICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICBXcml0ZS1Ib3N0ICgiISEgRkFJTDogezB9IiAtZiAkTGFiZWwpIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkCiAgICAgICAgV3JpdGUtSG9zdCAoIkxvZzogezB9IiAtZiAkTG9nUGF0aCkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKICAgICAgICBpZiAoJE9wZW5Mb2dPbkZhaWwgLWFuZCAoR2V0LUNvbW1hbmQgY29kZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkpIHsKICAgICAgICAgICAgdHJ5IHsgV3JpdGUtSG9zdCAnT3BlbmluZyBsb2cgaW4gVlMgQ29kZS4uLicgLUZvcmVncm91bmRDb2xvciBDeWFuOyBjb2RlICRMb2dQYXRoIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gb3BlbiBsb2cgaW4gVlMgQ29kZS4nIH0KICAgICAgICB9CiAgICAgICAgV3JpdGUtSG9zdCAnJwogICAgICAgIFdyaXRlLUxvZ1RhaWwgJExvZ1BhdGggJFRhaWxMaW5lcwogICAgICAgIGlmICgtbm90ICRBbGxvd0ZhaWx1cmUpIHsgdGhyb3cgKCJBYm9ydGVkIGR1ZSB0byBlcnJvciBpbjogezB9IiAtZiAkTGFiZWwpIH0KICAgICAgICBXcml0ZS1XYXJuICgiQ29udGludWluZyBhZnRlciBub24tZmF0YWwgZmFpbHVyZSBpbjogezB9IiAtZiAkTGFiZWwpCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBXcml0ZS1Ib3N0ICgiT0s6IHswfSIgLWYgJExhYmVsKSAtRm9yZWdyb3VuZENvbG9yIEdyZWVuCiAgICB9CgogICAgcmV0dXJuIFtQU0N1c3RvbU9iamVjdF1AeyBFeGl0Q29kZSA9ICRleGl0OyBPdXRwdXQgPSAkb3V0cHV0OyBMb2dQYXRoID0gJExvZ1BhdGggfQp9CgpmdW5jdGlvbiBJbnZva2UtQ21kQ2FwdHVyZShbc3RyaW5nXSRMYWJlbCwgW3N0cmluZ10kQ29tbWFuZCwgW3N0cmluZ10kTG9nUGF0aCA9ICRudWxsLCBbc3RyaW5nXSRMb2dEaXIgPSAkbnVsbCwgW3N3aXRjaF0kQWxsb3dGYWlsdXJlKSB7CiAgICByZXR1cm4gSW52b2tlLUNtZCAtTGFiZWwgJExhYmVsIC1Db21tYW5kICRDb21tYW5kIC1Mb2dQYXRoICRMb2dQYXRoIC1Mb2dEaXIgJExvZ0RpciAtQWxsb3dGYWlsdXJlOiRBbGxvd0ZhaWx1cmUKfQoKZnVuY3Rpb24gVGVzdC1Db21tYW5kRXhpc3RzKFtzdHJpbmddJENtZCkgeyByZXR1cm4gW2Jvb2xdKEdldC1Db21tYW5kICRDbWQgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpIH0KCmZ1bmN0aW9uIEdldC1Mb2NrRmlsZVBhdGgoW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgIHJldHVybiBKb2luLVBhdGggJFJlcG9Sb290ICdxYVxsb2dzXGdpdC1wdXNoLmxvY2snCn0KCmZ1bmN0aW9uIEFjcXVpcmUtUnVuTG9jayhbc3RyaW5nXSRSZXBvUm9vdCkgewogICAgJGxvY2tQYXRoID0gR2V0LUxvY2tGaWxlUGF0aCAkUmVwb1Jvb3QKICAgICRsb2NrRGlyID0gU3BsaXQtUGF0aCAkbG9ja1BhdGggLVBhcmVudAogICAgRW5zdXJlLURpciAkbG9ja0RpcgogICAgdHJ5IHsKICAgICAgICAkZnMgPSBbU3lzdGVtLklPLkZpbGVdOjpPcGVuKCRsb2NrUGF0aCwgW1N5c3RlbS5JTy5GaWxlTW9kZV06Ok9wZW5PckNyZWF0ZSwgW1N5c3RlbS5JTy5GaWxlQWNjZXNzXTo6UmVhZFdyaXRlLCBbU3lzdGVtLklPLkZpbGVTaGFyZV06Ok5vbmUpCiAgICAgICAgJGZzLlNldExlbmd0aCgwKQogICAgICAgICR3cml0ZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5JTy5TdHJlYW1Xcml0ZXIoJGZzLCBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LCAxMDI0LCAkdHJ1ZSkKICAgICAgICAkd3JpdGVyLldyaXRlTGluZSgicGlkPSRQSUQiKQogICAgICAgICR3cml0ZXIuV3JpdGVMaW5lKCJzdGFydGVkPSQoR2V0LURhdGUgLUZvcm1hdCAneXl5eS1NTS1kZCBISDptbTpzcycpIikKICAgICAgICAkd3JpdGVyLkZsdXNoKCkKICAgICAgICByZXR1cm4gJGZzCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgdGhyb3cgKCJBbm90aGVyIGluc3RhbmNlIGlzIHJ1bm5pbmcuIExvY2sgZmlsZTogezB9IiAtZiAkbG9ja1BhdGgpCiAgICB9Cn0KCmZ1bmN0aW9uIFRyeS1BY3F1aXJlUnVuTG9jayhbc3RyaW5nXSRSZXBvUm9vdCkgewogICAgdHJ5IHsgcmV0dXJuIEFjcXVpcmUtUnVuTG9jayAkUmVwb1Jvb3QgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gJF8uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICByZXR1cm4gJG51bGwKICAgIH0KfQoKZnVuY3Rpb24gUmVsZWFzZS1SdW5Mb2NrKCRIYW5kbGUpIHsKICAgIGlmICgkSGFuZGxlKSB7CiAgICAgICAgdHJ5IHsgJEhhbmRsZS5EaXNwb3NlKCkgfSBjYXRjaCB7IFdyaXRlLVdhcm4gJ0ZhaWxlZCB0byByZWxlYXNlIGxvY2suJyB9CiAgICB9Cn0KCmZ1bmN0aW9uIEZpbmQtR2l0Um9vdCB7CiAgICAkZGlyID0gKEdldC1Mb2NhdGlvbikuUGF0aAogICAgd2hpbGUgKCR0cnVlKSB7CiAgICAgICAgaWYgKFRlc3QtUGF0aCAoSm9pbi1QYXRoICRkaXIgJy5naXQnKSkgeyByZXR1cm4gJGRpciB9CiAgICAgICAgJHBhcmVudCA9IFNwbGl0LVBhdGggJGRpciAtUGFyZW50CiAgICAgICAgaWYgKC1ub3QgJHBhcmVudCAtb3IgJHBhcmVudCAtZXEgJGRpcikgeyBicmVhayB9CiAgICAgICAgJGRpciA9ICRwYXJlbnQKICAgIH0KICAgIHRocm93ICdOb3QgaW5zaWRlIGEgR2l0IHJlcG8gKG5vIC5naXQgZm91bmQpLicKfQoKZnVuY3Rpb24gVGVzdC1JbkdpdFJlcG8gewogICAgJHJvb3QgPSBGaW5kLUdpdFJvb3QKICAgIFNldC1Mb2NhdGlvbiAkcm9vdAogICAgcmV0dXJuICRyb290Cn0KCmZ1bmN0aW9uIEdldC1HaXRDb250ZXh0IHsKICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ2dpdCcpKSB7IHRocm93ICdHaXQgQ0xJIG5vdCBmb3VuZCBpbiBQQVRILicgfQogICAgJGJyYW5jaFJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgQnJhbmNoJyAnZ2l0IGJyYW5jaCAtLXNob3ctY3VycmVudCcKICAgICRicmFuY2ggPSAoJGJyYW5jaFJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKS5UcmltKCkKICAgIGlmICgtbm90ICRicmFuY2gpIHsgdGhyb3cgJ05vIGN1cnJlbnQgYnJhbmNoIGRldGVjdGVkIChkZXRhY2hlZCBIRUFEPykuJyB9CiAgICAkb3JpZ2luUmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBSZW1vdGUnICdnaXQgcmVtb3RlIGdldC11cmwgb3JpZ2luJwogICAgJG9yaWdpbiA9ICgkb3JpZ2luUmVzLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpLlRyaW0oKQogICAgaWYgKC1ub3QgJG9yaWdpbikgeyB0aHJvdyAiUmVtb3RlICdvcmlnaW4nIG5vdCBmb3VuZC4iIH0KICAgIHJldHVybiBAeyBCcmFuY2ggPSAkYnJhbmNoOyBPcmlnaW4gPSAkb3JpZ2luIH0KfQoKZnVuY3Rpb24gR2V0LVJlbW90ZURlZmF1bHRCcmFuY2ggewogICAgJHJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmVtb3RlIEhFQUQnICdnaXQgc3ltYm9saWMtcmVmIC0tcXVpZXQgLS1zaG9ydCByZWZzL3JlbW90ZXMvb3JpZ2luL0hFQUQnIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkcmVzLkV4aXRDb2RlIC1lcSAwKSB7CiAgICAgICAgJGxpbmUgPSAoJHJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKS5UcmltKCkKICAgICAgICBpZiAoJGxpbmUpIHsgcmV0dXJuICgkbGluZSAtcmVwbGFjZSAnXm9yaWdpbi8nLCcnKSB9CiAgICB9CiAgICBpZiAoJHJlcy5FeGl0Q29kZSAtbmUgMCkgeyBXcml0ZS1XYXJuICdDb3VsZCBub3QgcmVhZCBvcmlnaW4vSEVBRCB2aWEgc3ltYm9saWMtcmVmOyBmYWxsaW5nIGJhY2suJyB9CiAgICAkcmVzMiA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmVtb3RlIFNob3cnICdnaXQgcmVtb3RlIHNob3cgb3JpZ2luJyAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJHJlczIuRXhpdENvZGUgLWVxIDApIHsKICAgICAgICBmb3JlYWNoICgkbGluZSBpbiAkcmVzMi5PdXRwdXQpIHsKICAgICAgICAgICAgaWYgKCRsaW5lIC1tYXRjaCAnSEVBRCBicmFuY2g6XHMqKFxTKylccyokJykgeyByZXR1cm4gJE1hdGNoZXNbMV0gfQogICAgICAgIH0KICAgIH0KICAgIFdyaXRlLVdhcm4gJ0NvdWxkIG5vdCBkZXRlY3QgcmVtb3RlIGRlZmF1bHQgYnJhbmNoOyB1c2luZyBtYWluLicKICAgIHJldHVybiAnbWFpbicKfQoKZnVuY3Rpb24gRW5zdXJlLUxvY2FsQnJhbmNoKFtzdHJpbmddJEJyYW5jaE5hbWUpIHsKICAgICRjaGVjayA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgQnJhbmNoIEV4aXN0cycgKCJnaXQgc2hvdy1yZWYgLS12ZXJpZnkgLS1xdWlldCByZWZzL2hlYWRzL3swfSIgLWYgJEJyYW5jaE5hbWUpIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkY2hlY2suRXhpdENvZGUgLWVxIDApIHsgcmV0dXJuIH0KCiAgICBpZiAoJERyeVJ1bikgewogICAgICAgIFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaXQgZmV0Y2ggb3JpZ2luIHswfSAmJiBnaXQgY2hlY2tvdXQgLWIgezB9IG9yaWdpbi97MH0iIC1mICRCcmFuY2hOYW1lKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5CiAgICAgICAgcmV0dXJuCiAgICB9CgogICAgSW52b2tlLUNtZCAnR2l0IEZldGNoJyAoImdpdCBmZXRjaCBvcmlnaW4gezB9IiAtZiAkQnJhbmNoTmFtZSkKICAgIEludm9rZS1DbWQgJ0NoZWNrb3V0IGJhc2UgYnJhbmNoJyAoImdpdCBjaGVja291dCAtYiB7MH0gb3JpZ2luL3swfSIgLWYgJEJyYW5jaE5hbWUpCn0KCmZ1bmN0aW9uIEdldC1TdGF0dXNQb3JjZWxhaW4oW3N0cmluZ10kTG9nRGlyID0gJG51bGwpIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFN0YXR1cyAocG9yY2VsYWluKScgJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nIC1Mb2dEaXIgJExvZ0RpcgogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0KfQoKZnVuY3Rpb24gR2V0LVN0YWdlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmYgKHN0YWdlZCknICdnaXQgZGlmZiAtLWNhY2hlZCAtLW5hbWUtb25seSAtLWRpZmYtZmlsdGVyPUFDTVJUVVhCJwogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1VbnN0YWdlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmYgKHVuc3RhZ2VkKScgJ2dpdCBkaWZmIC0tbmFtZS1vbmx5IC0tZGlmZi1maWx0ZXI9QUNNUlRVWEInCiAgICByZXR1cm4gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gR2V0LVVudHJhY2tlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFVudHJhY2tlZCcgJ2dpdCBscy1maWxlcyAtLW90aGVycyAtLWV4Y2x1ZGUtc3RhbmRhcmQnCiAgICByZXR1cm4gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gR2V0LUNoYW5nZWRGaWxlcyB7CiAgICAkYWxsID0gQCgpCiAgICAkYWxsICs9IEdldC1TdGFnZWRGaWxlcwogICAgJGFsbCArPSBHZXQtVW5zdGFnZWRGaWxlcwogICAgJGFsbCArPSBHZXQtVW50cmFja2VkRmlsZXMKICAgIHJldHVybiAkYWxsIHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1DaGFuZ2VkRmlsZXNTaW5jZUJhc2UoW3N0cmluZ10kQmFzZUJyYW5jaCkgewogICAgaWYgKC1ub3QgJEJhc2VCcmFuY2gpIHsgcmV0dXJuIEAoKSB9CiAgICAkbWIgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IE1lcmdlLUJhc2UnICgiZ2l0IG1lcmdlLWJhc2UgSEVBRCB7MH0iIC1mICRCYXNlQnJhbmNoKSAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJG1iLkV4aXRDb2RlIC1uZSAwKSB7CiAgICAgICAgV3JpdGUtV2FybiAnQ291bGQgbm90IGNvbXB1dGUgbWVyZ2UtYmFzZS4nCiAgICAgICAgcmV0dXJuIEAoKQogICAgfQogICAgJGhhc2ggPSAoJG1iLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpLlRyaW0oKQogICAgaWYgKC1ub3QgJGhhc2gpIHsgcmV0dXJuIEAoKSB9CiAgICAkZGlmZiA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgRGlmZiAoYmFzZS4uSEVBRCknICgiZ2l0IGRpZmYgLS1uYW1lLW9ubHkgezB9IEhFQUQiIC1mICRoYXNoKQogICAgcmV0dXJuICRkaWZmLk91dHB1dCB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9IHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9DQoKZnVuY3Rpb24gTm9ybWFsaXplLVJlbFBhdGgoW3N0cmluZ10kUGF0aCkgewogICAgaWYgKC1ub3QgJFBhdGgpIHsgcmV0dXJuICcnIH0KICAgICRwID0gJFBhdGggLXJlcGxhY2UgJ1xcJywnLycKICAgICRwID0gJHAuVHJpbVN0YXJ0KCcuLycpCiAgICByZXR1cm4gJHAKfQoKZnVuY3Rpb24gR2V0LUd1YXJkSWdub3JlUHJlZml4ZXMgewogICAgcmV0dXJuIEAoCiAgICAgICAgJy5naXQvJywKICAgICAgICAnbm9kZV9tb2R1bGVzLycsCiAgICAgICAgJ2Rpc3QvJywKICAgICAgICAnYnVpbGQvJywKICAgICAgICAnb3V0LycsCiAgICAgICAgJ2NvdmVyYWdlLycsCiAgICAgICAgJy5jYWNoZS8nLAogICAgICAgICcubmV4dC8nLAogICAgICAgICdxYS9sb2dzLycKICAgICkKfQoKZnVuY3Rpb24gVGVzdC1Jc0lnbm9yZWRQYXRoKFtzdHJpbmddJFBhdGgpIHsKICAgICRwID0gTm9ybWFsaXplLVJlbFBhdGggJFBhdGgKICAgIGZvcmVhY2ggKCRwcmVmaXggaW4gKEdldC1HdWFyZElnbm9yZVByZWZpeGVzKSkgewogICAgICAgIGlmICgkcC5TdGFydHNXaXRoKCRwcmVmaXgpKSB7IHJldHVybiAkdHJ1ZSB9CiAgICB9CiAgICByZXR1cm4gJGZhbHNlCn0KCmZ1bmN0aW9uIFRlc3QtRG9jc09ubHlDaGFuZ2UoW3N0cmluZ1tdXSRQYXRocykgewogICAgaWYgKC1ub3QgJFBhdGhzIC1vciAkUGF0aHMuQ291bnQgLWVxIDApIHsgcmV0dXJuICRmYWxzZSB9CiAgICAkZG9jUGF0dGVybnMgPSBAKAogICAgICAgICdeKFJFQURNRXxDSEFOR0VMT0d8TElDRU5TRSlcYicsCiAgICAgICAgJ15kb2NzW1xcL10nLAogICAgICAgICdecWFbXFwvXScsCiAgICAgICAgJ1wubWQkJywKICAgICAgICAnXC50eHQkJywKICAgICAgICAnXlwuKGdpdGlnbm9yZXxnaXRhdHRyaWJ1dGVzKSQnCiAgICApCiAgICBmb3JlYWNoICgkcCBpbiAkUGF0aHMpIHsKICAgICAgICAkaXNEb2MgPSAkZmFsc2UKICAgICAgICBmb3JlYWNoICgkcnggaW4gJGRvY1BhdHRlcm5zKSB7CiAgICAgICAgICAgIGlmICgkcCAtbWF0Y2ggJHJ4KSB7ICRpc0RvYyA9ICR0cnVlOyBicmVhayB9CiAgICAgICAgfQogICAgICAgIGlmICgtbm90ICRpc0RvYykgeyByZXR1cm4gJGZhbHNlIH0KICAgIH0KICAgIHJldHVybiAkdHJ1ZQp9CgpmdW5jdGlvbiBUZXN0LVRvdWNoZWRTcmMoW3N0cmluZ1tdXSRQYXRocykgewogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7IGlmICgkcCAtbWF0Y2ggJ15zcmNbXFwvXScpIHsgcmV0dXJuICR0cnVlIH0gfQogICAgcmV0dXJuICRmYWxzZQp9CgpmdW5jdGlvbiBUZXN0LVRvdWNoZWRDb25maWcoW3N0cmluZ1tdXSRQYXRocykgewogICAgaWYgKC1ub3QgJFBhdGhzKSB7IHJldHVybiAkZmFsc2UgfQogICAgJHBhdHRlcm5zID0gQCgKICAgICAgICAnXnBhY2thZ2VcLmpzb24kJywKICAgICAgICAnXnBhY2thZ2UtbG9ja1wuanNvbiQnLAogICAgICAgICdecG5wbS1sb2NrXC55YW1sJCcsCiAgICAgICAgJ155YXJuXC5sb2NrJCcsCiAgICAgICAgJ150c2NvbmZpZyhcLi4rKT9cLmpzb24kJywKICAgICAgICAnXnZpdGVcLmNvbmZpZ1wuJywKICAgICAgICAnXmVzbGludFwuY29uZmlnXC4nLAogICAgICAgICdeXC5lc2xpbnRyYycsCiAgICAgICAgJ15cLnByZXR0aWVycmMnLAogICAgICAgICdeXC5lZGl0b3Jjb25maWckJywKICAgICAgICAnXlwubnBtcmMkJywKICAgICAgICAnXlwubnZtcmMkJywKICAgICAgICAnXnNjcmlwdHNbXFwvXScsCiAgICAgICAgJ15jb25maWdbXFwvXScsCiAgICAgICAgJ15cLmdpdGh1YltcXC9dJywKICAgICAgICAnXlwudnNjb2RlW1xcL10nCiAgICApCiAgICBmb3JlYWNoICgkcCBpbiAkUGF0aHMpIHsKICAgICAgICAkbiA9IE5vcm1hbGl6ZS1SZWxQYXRoICRwCiAgICAgICAgZm9yZWFjaCAoJHJ4IGluICRwYXR0ZXJucykgewogICAgICAgICAgICBpZiAoJG4gLW1hdGNoICRyeCkgeyByZXR1cm4gJHRydWUgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAkZmFsc2UKfQoKZnVuY3Rpb24gVGVzdC1Db21taXRNZXNzYWdlKFtzdHJpbmddJE1zZykgewogICAgaWYgKC1ub3QgJE1zZykgeyByZXR1cm4gfQogICAgaWYgKCRNc2cgLW1hdGNoICcoP2kpXGJXSVBcYicpIHsgdGhyb3cgIkNvbW1pdCBtZXNzYWdlIGNvbnRhaW5zICdXSVAnLiBCbG9ja2VkLiIgfQp9CgpmdW5jdGlvbiBUZXN0LUJyYW5jaFBvbGljeShbc3RyaW5nXSRNb2RlVmFsdWUsIFtzdHJpbmddJEJyYW5jaCkgewogICAgaWYgKCRNb2RlVmFsdWUgLWVxICdTYWZlJykgeyByZXR1cm4gfQogICAgaWYgKCRNb2RlVmFsdWUgLWVxICdGYXN0JyAtYW5kICRCcmFuY2ggLWVxICdtYWluJyAtYW5kIC1ub3QgJEFsbG93TWFpbikgewogICAgICAgIHRocm93ICdZb3UgYXJlIG9uIG1haW4uIEluIEZhc3QgbW9kZSB5b3UgbXVzdCBwYXNzIC1BbGxvd01haW4gdG8gYXV0by1jb21taXQvcHVzaC4nCiAgICB9Cn0KCmZ1bmN0aW9uIE5ldy1BdXRvQnJhbmNoTmFtZSB7IHJldHVybiAoImF1dG8vezB9IiAtZiAoR2V0LURhdGUgLUZvcm1hdCAneXl5eU1NZGRfSEhtbXNzJykpIH0KCmZ1bmN0aW9uIEludm9rZS1BdXRvUHVsbChbc3RyaW5nXSRCYXNlQnJhbmNoKSB7CiAgICBpZiAoJE5vQXV0b1B1bGwpIHsgcmV0dXJuIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaXQgcHVsbCAtLXJlYmFzZSBvcmlnaW4gezB9IiAtZiAkQmFzZUJyYW5jaCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuIH0KICAgIEludm9rZS1DbWQgJ0dpdCBQdWxsIChyZWJhc2UpJyAoImdpdCBwdWxsIC0tcmViYXNlIG9yaWdpbiB7MH0iIC1mICRCYXNlQnJhbmNoKQp9CgpmdW5jdGlvbiBJbnZva2UtQXV0b1N0YXNoKFtzd2l0Y2hdJEVuYWJsZSkgewogICAgaWYgKC1ub3QgJEVuYWJsZSkgeyByZXR1cm4gJGZhbHNlIH0KICAgICRwb3JjZWxhaW4gPSBHZXQtU3RhdHVzUG9yY2VsYWluCiAgICBpZiAoLW5vdCAkcG9yY2VsYWluIC1vciAkcG9yY2VsYWluLkNvdW50IC1lcSAwKSB7IHJldHVybiAkZmFsc2UgfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogZ2l0IHN0YXNoIHB1c2ggLXUgLW0gImF1dG9zdGFzaCBnaXQtcHVzaC5wczEiJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gJHRydWUgfQogICAgSW52b2tlLUNtZCAnR2l0IFN0YXNoJyAnZ2l0IHN0YXNoIHB1c2ggLXUgLW0gImF1dG9zdGFzaCBnaXQtcHVzaC5wczEiJwogICAgcmV0dXJuICR0cnVlCn0KCmZ1bmN0aW9uIEludm9rZS1BdXRvUG9wU3Rhc2goW2Jvb2xdJERpZFN0YXNoKSB7CiAgICBpZiAoLW5vdCAkRGlkU3Rhc2gpIHsgcmV0dXJuIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCBzdGFzaCBwb3AnIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICdHaXQgU3Rhc2ggUG9wJyAnZ2l0IHN0YXNoIHBvcCcKfQoKZnVuY3Rpb24gUXVvdGUtQ21kQXJnKFtzdHJpbmddJHMpIHsKICAgIGlmICgkbnVsbCAtZXEgJHMpIHsgcmV0dXJuICciIicgfQogICAgJHQgPSAkcy5SZXBsYWNlKCciJywnXCInKQogICAgcmV0dXJuICciJyArICR0ICsgJyInCn0KCmZ1bmN0aW9uIFJlc29sdmUtRXNsaW50Q21kKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICAkbG9jYWwgPSBKb2luLVBhdGggJFJlcG9Sb290ICdub2RlX21vZHVsZXNcLmJpblxlc2xpbnQuY21kJwogICAgaWYgKFRlc3QtUGF0aCAkbG9jYWwpIHsgcmV0dXJuICRsb2NhbCB9CiAgICByZXR1cm4gJ25weCAtLW5vLWluc3RhbGwgZXNsaW50Jwp9CgpmdW5jdGlvbiBHZXQtTGludGFibGVGaWxlcyhbc3RyaW5nW11dJFBhdGhzKSB7CiAgICAkb2sgPSBAKCcuanMnLCcuanN4JywnLnRzJywnLnRzeCcsJy5tanMnLCcuY2pzJywnLm10cycsJy5jdHMnKQogICAgJG91dCA9IEAoKQogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7CiAgICAgICAgJGV4dCA9IFtJTy5QYXRoXTo6R2V0RXh0ZW5zaW9uKCRwKS5Ub0xvd2VySW52YXJpYW50KCkKICAgICAgICBpZiAoJG9rIC1jb250YWlucyAkZXh0KSB7ICRvdXQgKz0gJHAgfQogICAgfQogICAgcmV0dXJuICRvdXQgfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEludm9rZS1TbWFydExpbnQoW3N0cmluZ10kUmVwb1Jvb3QsIFtzdHJpbmdbXV0kQ2hhbmdlZEZpbGVzLCBbc3RyaW5nXSRSdW5EaXIpIHsKICAgICRsaW50RmlsZXMgPSBHZXQtTGludGFibGVGaWxlcyAkQ2hhbmdlZEZpbGVzCiAgICBpZiAoLW5vdCAkbGludEZpbGVzIC1vciAkbGludEZpbGVzLkNvdW50IC1lcSAwKSB7CiAgICAgICAgV3JpdGUtU3RlcCA0NCAnU21hcnQgTGludDogbm8gSlMvVFMgZmlsZXMgY2hhbmdlZC4gU2tpcC4nCiAgICAgICAgcmV0dXJuCiAgICB9CgogICAgJGVzbGludCA9IFJlc29sdmUtRXNsaW50Q21kICRSZXBvUm9vdAoKICAgICRjaHVua1NpemUgPSAzNQogICAgJGNodW5rcyA9IEAoKQogICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkbGludEZpbGVzLkNvdW50OyAkaSArPSAkY2h1bmtTaXplKSB7CiAgICAgICAgJGVuZCA9IFtNYXRoXTo6TWluKCRpICsgJGNodW5rU2l6ZSAtIDEsICRsaW50RmlsZXMuQ291bnQgLSAxKQogICAgICAgICRjaHVua3MgKz0gLCAoJGxpbnRGaWxlc1skaS4uJGVuZF0pCiAgICB9CgogICAgJGlkeCA9IDAKICAgIGZvcmVhY2ggKCRjIGluICRjaHVua3MpIHsKICAgICAgICAkaWR4KysKICAgICAgICAkYXJncyA9IEAoJy0tbWF4LXdhcm5pbmdzPTAnLCAnLS1uby1lcnJvci1vbi11bm1hdGNoZWQtcGF0dGVybicsICctLWNhY2hlJywgJy0tY2FjaGUtbG9jYXRpb24nLCAncWEvZXNsaW50LmNhY2hlJykKICAgICAgICAkcXVvdGVkRmlsZXMgPSAkYyB8IEZvckVhY2gtT2JqZWN0IHsgUXVvdGUtQ21kQXJnICRfIH0KICAgICAgICAkY21kID0KICAgICAgICBpZiAoJGVzbGludCAtbGlrZSAnbnB4KicpIHsKICAgICAgICAgICAgInswfSB7MX0gezJ9IiAtZiAkZXNsaW50LCAoJGFyZ3MgLWpvaW4gJyAnKSwgKCRxdW90ZWRGaWxlcyAtam9pbiAnICcpCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAiezB9IHsxfSB7Mn0iIC1mIChRdW90ZS1DbWRBcmcgJGVzbGludCksICgkYXJncyAtam9pbiAnICcpLCAoJHF1b3RlZEZpbGVzIC1qb2luICcgJykKICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgNTIgKCJTbWFydCBMaW50OiBjaHVuayB7MH0vezF9IiAtZiAkaWR4LCAkY2h1bmtzLkNvdW50KQogICAgICAgIEludm9rZS1DbWQgJ0xpbnQgKGNoYW5nZWQpJyAkY21kCiAgICB9Cn0KCmZ1bmN0aW9uIEdldC1QYWNrYWdlU2NyaXB0cyhbc3RyaW5nXSRQYWNrYWdlSnNvblBhdGgpIHsKICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhY2thZ2VKc29uUGF0aCkpIHsgcmV0dXJuIEB7fSB9CiAgICB0cnkgewogICAgICAgICRqc29uID0gR2V0LUNvbnRlbnQgJFBhY2thZ2VKc29uUGF0aCAtUmF3IHwgQ29udmVydEZyb20tSnNvbgogICAgICAgIGlmICgkbnVsbCAtZXEgJGpzb24uc2NyaXB0cykgeyByZXR1cm4gQHt9IH0KICAgICAgICAkc2NyaXB0cyA9IEB7fQogICAgICAgICRqc29uLnNjcmlwdHMuUFNPYmplY3QuUHJvcGVydGllcyB8IEZvckVhY2gtT2JqZWN0IHsgJHNjcmlwdHNbJF8uTmFtZV0gPSAkXy5WYWx1ZSB9CiAgICAgICAgcmV0dXJuICRzY3JpcHRzCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBwYXJzZSBwYWNrYWdlLmpzb24gc2NyaXB0czogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkKICAgICAgICByZXR1cm4gQHt9CiAgICB9Cn0KCmZ1bmN0aW9uIEdldC1QYWNrYWdlVmVyc2lvbihbc3RyaW5nXSRQYWNrYWdlSnNvblBhdGgpIHsKICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhY2thZ2VKc29uUGF0aCkpIHsgcmV0dXJuICcnIH0KICAgIHRyeSB7CiAgICAgICAgJGpzb24gPSBHZXQtQ29udGVudCAkUGFja2FnZUpzb25QYXRoIC1SYXcgfCBDb252ZXJ0RnJvbS1Kc29uCiAgICAgICAgaWYgKCRqc29uLnZlcnNpb24pIHsgcmV0dXJuIFtzdHJpbmddJGpzb24udmVyc2lvbiB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBwYXJzZSBwYWNrYWdlLmpzb24gdmVyc2lvbjogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkKICAgIH0KICAgIHJldHVybiAnJwp9CgpmdW5jdGlvbiBJbnZva2UtVmVyc2lvbkJ1bXAoW3N0cmluZ10kQnVtcCkgewogICAgaWYgKCRCdW1wIC1lcSAnbm9uZScpIHsgcmV0dXJuIH0KICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ25wbScpKSB7IHRocm93ICducG0gbm90IGZvdW5kLCBjYW5ub3QgYnVtcCB2ZXJzaW9uLicgfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IG5wbSB2ZXJzaW9uIHswfSAtLW5vLWdpdC10YWctdmVyc2lvbiIgLWYgJEJ1bXApIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICducG0gdmVyc2lvbiBidW1wJyAoIm5wbSB2ZXJzaW9uIHswfSAtLW5vLWdpdC10YWctdmVyc2lvbiIgLWYgJEJ1bXApCn0KCmZ1bmN0aW9uIEludm9rZS1BdWRpdChbc3RyaW5nXSRMZXZlbCkgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnbnBtJykpIHsgcmV0dXJuIEB7IFJhbiA9ICRmYWxzZTsgRmFpbGVkID0gJGZhbHNlOyBUZXh0TG9nID0gJyc7IEpzb25Mb2cgPSAnJyB9IH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBucG0gYXVkaXQgLS1hdWRpdC1sZXZlbD17MH0iIC1mICRMZXZlbCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuIEB7IFJhbiA9ICR0cnVlOyBGYWlsZWQgPSAkZmFsc2U7IFRleHRMb2cgPSAnJzsgSnNvbkxvZyA9ICcnIH0gfQoKICAgICRqc29uTG9nID0gSm9pbi1QYXRoICRzY3JpcHQ6UnVuRGlyICdhdWRpdC5qc29uLmxvZycKICAgICR0ZXh0TG9nID0gSm9pbi1QYXRoICRzY3JpcHQ6UnVuRGlyICdhdWRpdC50eHQubG9nJwogICAgJGpzb25SZXMgPSBJbnZva2UtQ21kICducG0gYXVkaXQgKGpzb24pJyAnbnBtIGF1ZGl0IC0tanNvbicgJGpzb25Mb2cgLUFsbG93RmFpbHVyZQogICAgJHRleHRSZXMgPSBJbnZva2UtQ21kICgnbnBtIGF1ZGl0IChsZXZlbD17MH0pJyAtZiAkTGV2ZWwpICgibnBtIGF1ZGl0IC0tYXVkaXQtbGV2ZWw9ezB9IiAtZiAkTGV2ZWwpICR0ZXh0TG9nIC1BbGxvd0ZhaWx1cmUKICAgICRmYWlsZWQgPSAoJGpzb25SZXMuRXhpdENvZGUgLW5lIDAgLW9yICR0ZXh0UmVzLkV4aXRDb2RlIC1uZSAwKQogICAgcmV0dXJuIEB7IFJhbiA9ICR0cnVlOyBGYWlsZWQgPSAkZmFpbGVkOyBUZXh0TG9nID0gJHRleHRMb2c7IEpzb25Mb2cgPSAkanNvbkxvZyB9Cn0KCmZ1bmN0aW9uIE5ldy1DaGFuZ2Vsb2coW3N0cmluZ10kUGF0aCwgW3N0cmluZ10kTW9kZVZhbHVlLCBbc3RyaW5nXSRCcmFuY2gsIFtzdHJpbmddJEJhc2VCcmFuY2gsIFtzdHJpbmddJE1lc3NhZ2VWYWx1ZSwgW3N0cmluZ1tdXSRGaWxlcykgewogICAgJG5vdyA9IEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnCiAgICAkZGlmZkxvZyA9IEpvaW4tUGF0aCAoU3BsaXQtUGF0aCAkUGF0aCAtUGFyZW50KSAnZGlmZnN0YXQubG9nJwogICAgJHN0YXRSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmZzdGF0JyAnZ2l0IGRpZmYgLS1jYWNoZWQgLS1zdGF0JyAkZGlmZkxvZyAtQWxsb3dGYWlsdXJlCiAgICAkc3RhdCA9ICRzdGF0UmVzLk91dHB1dAoKICAgICRsaW5lcyA9IEAoKQogICAgJGxpbmVzICs9ICcjIEF1dG8gQ2hhbmdlbG9nJwogICAgJGxpbmVzICs9ICcnCiAgICAkbGluZXMgKz0gIi0gRGF0ZTogJG5vdyIKICAgICRsaW5lcyArPSAiLSBNb2RlOiAkTW9kZVZhbHVlIgogICAgJGxpbmVzICs9ICItIEJyYW5jaDogJEJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBCYXNlOiAkQmFzZUJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBNZXNzYWdlOiAkTWVzc2FnZVZhbHVlIgogICAgJGxpbmVzICs9ICcnCiAgICAkbGluZXMgKz0gJyMjIEZpbGVzJwogICAgZm9yZWFjaCAoJGYgaW4gJEZpbGVzKSB7ICRsaW5lcyArPSAiLSAkZiIgfQogICAgJGxpbmVzICs9ICcnCiAgICAkbGluZXMgKz0gJyMjIERpZmZzdGF0JwogICAgJGxpbmVzICs9ICdgYGAnCiAgICBpZiAoJHN0YXQpIHsgJGxpbmVzICs9ICRzdGF0IH0gZWxzZSB7ICRsaW5lcyArPSAnKG5vIGRpZmZzdGF0KScgfQogICAgJGxpbmVzICs9ICdgYGAnCgogICAgJGxpbmVzIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIE5ldy1TdW1tYXJ5KFtzdHJpbmddJFBhdGgsIFtzdHJpbmddJE1vZGVWYWx1ZSwgW3N0cmluZ10kQnJhbmNoLCBbc3RyaW5nXSRCYXNlQnJhbmNoLCBbc3RyaW5nXSRDb21taXQsIFtzdHJpbmddJFByVXJsLCBbc3RyaW5nXSRSZWxlYXNlVXJsLCBbc3RyaW5nXSRSdW5EaXIsIFtkYXRldGltZV0kU3RhcnRUaW1lLCBbZGF0ZXRpbWVdJEVuZFRpbWUsIFtib29sXSRXYXNEcnlSdW4pIHsKICAgICRkdXJhdGlvbiA9IFtNYXRoXTo6Um91bmQoKCRFbmRUaW1lIC0gJFN0YXJ0VGltZSkuVG90YWxTZWNvbmRzLCAyKQogICAgJGxpbmVzID0gQCgpCiAgICAkbGluZXMgKz0gJyMgUnVuIFN1bW1hcnknCiAgICAkbGluZXMgKz0gJycKICAgICRsaW5lcyArPSAiLSBEYXRlOiAkKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnKSIKICAgICRsaW5lcyArPSAiLSBNb2RlOiAkTW9kZVZhbHVlIgogICAgJGxpbmVzICs9ICItIEJyYW5jaDogJEJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBCYXNlOiAkQmFzZUJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBDb21taXQ6ICRDb21taXQiCiAgICAkbGluZXMgKz0gIi0gUFI6ICRQclVybCIKICAgICRsaW5lcyArPSAiLSBSZWxlYXNlOiAkUmVsZWFzZVVybCIKICAgICRsaW5lcyArPSAiLSBEcnlSdW46ICRXYXNEcnlSdW4iCiAgICAkbGluZXMgKz0gIi0gRHVyYXRpb25TZWM6ICRkdXJhdGlvbiIKICAgICRsaW5lcyArPSAiLSBMb2dzOiAkUnVuRGlyIgogICAgJGxpbmVzIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIEludm9rZS1UYWcoW3N0cmluZ10kVmVyc2lvbikgewogICAgaWYgKC1ub3QgJFZlcnNpb24pIHsgdGhyb3cgJ0Nhbm5vdCB0YWcgd2l0aG91dCB2ZXJzaW9uLicgfQogICAgJHRhZ05hbWUgPSAidiRWZXJzaW9uIgogICAgJGV4aXN0aW5nID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBUYWcgTGlzdCcgKCJnaXQgdGFnIC1sIHswfSIgLWYgJHRhZ05hbWUpCiAgICBpZiAoJGV4aXN0aW5nLk91dHB1dCAtYW5kICgkZXhpc3RpbmcuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkuVHJpbSgpIC1lcSAkdGFnTmFtZSkgeyB0aHJvdyAoIlRhZyB7MH0gYWxyZWFkeSBleGlzdHMuIiAtZiAkdGFnTmFtZSkgfQoKICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCdEUlkgUlVOOiBnaXQgdGFnIC1hIHswfSAtbSAiUmVsZWFzZSB7MH0iJyAtZiAkdGFnTmFtZSkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuICR0YWdOYW1lIH0KICAgICRjbWQgPSAnZ2l0IHRhZyAtYSAiezB9IiAtbSAiUmVsZWFzZSB7MH0iJyAtZiAkdGFnTmFtZQogICAgSW52b2tlLUNtZCAnR2l0IFRhZycgJGNtZAogICAgcmV0dXJuICR0YWdOYW1lCn0KCmZ1bmN0aW9uIEludm9rZS1QdXNoVGFnKFtzdHJpbmddJFRhZ05hbWUpIHsKICAgIGlmICgtbm90ICRUYWdOYW1lKSB7IHJldHVybiB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IHB1c2ggb3JpZ2luIHswfSIgLWYgJFRhZ05hbWUpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICdQdXNoIFRhZycgKCJnaXQgcHVzaCBvcmlnaW4gezB9IiAtZiAkVGFnTmFtZSkKfQoKZnVuY3Rpb24gSW52b2tlLU9wZW5Qcihbc3RyaW5nXSRCYXNlQnJhbmNoLCBbc3RyaW5nXSRIZWFkQnJhbmNoLCBbc3RyaW5nXSRCb2R5RmlsZSkgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnZ2gnKSkgeyB0aHJvdyAnZ2ggQ0xJIG5vdCBmb3VuZC4gSW5zdGFsbCBpdCBvciBjcmVhdGUgUFIgbWFudWFsbHkuJyB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaCBwciBjcmVhdGUgLi4uJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gJG51bGwgfQogICAgJGNtZCA9ICdnaCBwciBjcmVhdGUgLS1iYXNlICJ7MH0iIC0taGVhZCAiezF9IiAtLXRpdGxlICJ7Mn0iIC0tYm9keS1maWxlICJ7M30iJyAtZiAkQmFzZUJyYW5jaCwgJEhlYWRCcmFuY2gsICRIZWFkQnJhbmNoLCAkQm9keUZpbGUKICAgIEludm9rZS1DbWQgJ0dpdEh1YiBQUiBDcmVhdGUnICRjbWQKICAgICR1cmxSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0SHViIFBSIFVSTCcgJ2doIHByIHZpZXcgLS1qc29uIHVybCAtLWpxIC51cmwnIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkdXJsUmVzLkV4aXRDb2RlIC1lcSAwKSB7IHJldHVybiAoJHVybFJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKS5UcmltKCkgfQogICAgcmV0dXJuICRudWxsCn0KCmZ1bmN0aW9uIEludm9rZS1PcGVuUHJJbkJyb3dzZXIgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnZ2gnKSkgeyBXcml0ZS1XYXJuICdnaCBDTEkgbm90IGZvdW5kIGZvciBQUiB2aWV3Lic7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICdHaXRIdWIgUFIgVmlldyAod2ViKScgJ2doIHByIHZpZXcgLS13ZWInIC1BbGxvd0ZhaWx1cmUKfQoKZnVuY3Rpb24gSW52b2tlLUNyZWF0ZVJlbGVhc2UoW3N0cmluZ10kVGFnTmFtZSkgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnZ2gnKSkgeyB0aHJvdyAnZ2ggQ0xJIG5vdCBmb3VuZCBmb3IgUmVsZWFzZSBjcmVhdGlvbi4nIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaCByZWxlYXNlIGNyZWF0ZSB7MH0gLS1nZW5lcmF0ZS1ub3RlcyIgLWYgJFRhZ05hbWUpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiAkbnVsbCB9CiAgICAkY21kID0gJ2doIHJlbGVhc2UgY3JlYXRlICJ7MH0iIC0tdGl0bGUgInswfSIgLS1nZW5lcmF0ZS1ub3RlcycgLWYgJFRhZ05hbWUKICAgIEludm9rZS1DbWQgJ0dpdEh1YiBSZWxlYXNlIENyZWF0ZScgJGNtZAogICAgJHVybFJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXRIdWIgUmVsZWFzZSBVUkwnICgiZ2ggcmVsZWFzZSB2aWV3IHswfSAtLWpzb24gdXJsIC0tanEgLnVybCIgLWYgJFRhZ05hbWUpIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkdXJsUmVzLkV4aXRDb2RlIC1lcSAwKSB7IHJldHVybiAoJHVybFJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKS5UcmltKCkgfQogICAgcmV0dXJuICRudWxsCn0NCgpmdW5jdGlvbiBOZXctQ29tbWl0TWVzc2FnZShbc3RyaW5nXSRGYWxsYmFjaywgW3N0cmluZ1tdXSRTdGFnZWRGaWxlcykgewogICAgJHN0YW1wID0gR2V0LURhdGUgLUZvcm1hdCAneXl5eS1NTS1kZCBISDptbScKICAgIGlmICgkRmFsbGJhY2sgLWFuZCAkRmFsbGJhY2suVHJpbSgpLkxlbmd0aCAtZ3QgMCkgeyByZXR1cm4gJEZhbGxiYWNrLlRyaW0oKSB9CgogICAgJHRvcCA9ICRTdGFnZWRGaWxlcyB8CiAgICAgICAgRm9yRWFjaC1PYmplY3QgeyAoJF8gLXNwbGl0ICJbL1xcXSIpWzBdIH0gfAogICAgICAgIFdoZXJlLU9iamVjdCB7ICRfIH0gfAogICAgICAgIEdyb3VwLU9iamVjdCB8CiAgICAgICAgU29ydC1PYmplY3QgQ291bnQgLURlc2NlbmRpbmcgfAogICAgICAgIFNlbGVjdC1PYmplY3QgLUZpcnN0IDMKCiAgICAkdGFnID0gaWYgKCR0b3AuQ291bnQgLWd0IDApIHsgKCR0b3AgfCBGb3JFYWNoLU9iamVjdCB7ICRfLk5hbWUgfSkgLWpvaW4gJywnIH0gZWxzZSB7ICdyZXBvJyB9CiAgICByZXR1cm4gImNob3JlKCR0YWcpOiBhdXRvIHVwZGF0ZSAkc3RhbXAiCn0KCmZ1bmN0aW9uIFdyaXRlLVJ1blN1bW1hcnkoW3N0cmluZ10kQnJhbmNoLCBbc3RyaW5nXSRPcmlnaW4sIFtzdHJpbmddJFJ1bkRpcikgewogICAgV3JpdGUtSG9zdCAnJwogICAgV3JpdGUtSG9zdCAnU3VtbWFyeTonIC1Gb3JlZ3JvdW5kQ29sb3IgQ3lhbgogICAgV3JpdGUtSG9zdCAoIi0gQnJhbmNoOiB7MH0iIC1mICRCcmFuY2gpCiAgICBXcml0ZS1Ib3N0ICgiLSBSZW1vdGU6IHswfSIgLWYgJE9yaWdpbikKICAgICRoZWFkUmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBSZXYtUGFyc2UnICdnaXQgcmV2LXBhcnNlIEhFQUQnCiAgICAkaGVhZCA9ICgkaGVhZFJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKS5UcmltKCkKICAgIGlmICgkaGVhZCkgeyBXcml0ZS1Ib3N0ICgiLSBDb21taXQ6IHswfSIgLWYgJGhlYWQuU3Vic3RyaW5nKDAsIFtNYXRoXTo6TWluKDgsICRoZWFkLkxlbmd0aCkpKSB9CiAgICBXcml0ZS1Ib3N0ICgiLSBMb2dzOiB7MH0iIC1mICRSdW5EaXIpCiAgICBXcml0ZS1Ib3N0ICcnCiAgICAkc3RhdHVzUmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBTdGF0dXMgKHNob3J0KScgJ2dpdCBzdGF0dXMgLXNiJwogICAgaWYgKCRzdGF0dXNSZXMuT3V0cHV0KSB7ICRzdGF0dXNSZXMuT3V0cHV0IHwgRm9yRWFjaC1PYmplY3QgeyBXcml0ZS1Ib3N0ICRfIH0gfQp9CgpmdW5jdGlvbiBHZXQtSGVhZENvbW1pdCB7CiAgICAkcmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBSZXYtUGFyc2UnICdnaXQgcmV2LXBhcnNlIEhFQUQnCiAgICByZXR1cm4gKCRyZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkuVHJpbSgpCn0KCmZ1bmN0aW9uIFRlc3QtSXNCaW5hcnkoW3N0cmluZ10kUGF0aCkgewogICAgJGZzID0gJG51bGwKICAgIHRyeSB7CiAgICAgICAgJGZzID0gW1N5c3RlbS5JTy5GaWxlXTo6T3BlblJlYWQoJFBhdGgpCiAgICAgICAgJGJ1ZmZlciA9IE5ldy1PYmplY3QgYnl0ZVtdIDgwMDAKICAgICAgICAkcmVhZCA9ICRmcy5SZWFkKCRidWZmZXIsIDAsICRidWZmZXIuTGVuZ3RoKQogICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJHJlYWQ7ICRpKyspIHsKICAgICAgICAgICAgaWYgKCRidWZmZXJbJGldIC1lcSAwKSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAkZmFsc2UKICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1XYXJuICgiQ291bGQgbm90IGluc3BlY3QgZmlsZSBmb3IgYmluYXJ5IGRhdGE6IHswfSIgLWYgJFBhdGgpCiAgICAgICAgcmV0dXJuICR0cnVlCiAgICB9CiAgICBmaW5hbGx5IHsKICAgICAgICBpZiAoJGZzKSB7ICRmcy5EaXNwb3NlKCkgfQogICAgfQp9CgpmdW5jdGlvbiBUZXN0LUlzVGV4dEZpbGUoW3N0cmluZ10kUGF0aCkgewogICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkUGF0aCkpIHsgcmV0dXJuICRmYWxzZSB9CiAgICAkZXh0ID0gW0lPLlBhdGhdOjpHZXRFeHRlbnNpb24oJFBhdGgpLlRvTG93ZXJJbnZhcmlhbnQoKQogICAgJGJpbmFyeUV4dCA9IEAoJy5wbmcnLCcuanBnJywnLmpwZWcnLCcuZ2lmJywnLndlYnAnLCcucGRmJywnLnppcCcsJy43eicsJy5yYXInLCcuZXhlJywnLmRsbCcsJy5iaW4nLCcubXA0JywnLm1vdicsJy5pY28nLCcuc3ZnJywnLnBzZCcsJy5haScsJy50dGYnLCcud29mZicsJy53b2ZmMicpCiAgICBpZiAoJGJpbmFyeUV4dCAtY29udGFpbnMgJGV4dCkgeyByZXR1cm4gJGZhbHNlIH0KICAgIGlmIChUZXN0LUlzQmluYXJ5ICRQYXRoKSB7IHJldHVybiAkZmFsc2UgfQogICAgcmV0dXJuICR0cnVlCn0KCmZ1bmN0aW9uIFJlZGFjdC1MaW5lKFtzdHJpbmddJExpbmUpIHsKICAgICRyZWQgPSAkTGluZQogICAgJHJlZCA9ICRyZWQgLXJlcGxhY2UgJyg/aSkoQXV0aG9yaXphdGlvbjopXHMrXFMrJywgJyQxIFtSRURBQ1RFRF0nCiAgICAkcmVkID0gJHJlZCAtcmVwbGFjZSAnKFtBLVphLXowLTlfLV17MTIsfSknLCAnW1JFREFDVEVEXScKICAgIHJldHVybiAkcmVkCn0KCmZ1bmN0aW9uIEdldC1QYXRoc0Zvckd1YXJkcyB7CiAgICAkc3RhZ2VkID0gR2V0LVN0YWdlZEZpbGVzCiAgICBpZiAoJHN0YWdlZCAtYW5kICRzdGFnZWQuQ291bnQgLWd0IDApIHsgcmV0dXJuICRzdGFnZWQgfQogICAgcmV0dXJuIEdldC1DaGFuZ2VkRmlsZXMKfQoKZnVuY3Rpb24gVGVzdC1TZWNyZXRzKFtzdHJpbmdbXV0kUGF0aHMsIFtzdHJpbmddJExvZ1BhdGgpIHsKICAgICRwYXR0ZXJucyA9IEAoCiAgICAgICAgJyg/aSlBUElfS0VZJywKICAgICAgICAnKD9pKVNFQ1JFVCcsCiAgICAgICAgJyg/aSlUT0tFTicsCiAgICAgICAgJyg/aSlQQVNTV09SRCcsCiAgICAgICAgJyg/aSlCRUdJTiBQUklWQVRFIEtFWScsCiAgICAgICAgJyg/aSlBdXRob3JpemF0aW9uOicsCiAgICAgICAgJ3hveFtiYXByc10tJywKICAgICAgICAnZ2hwXycsCiAgICAgICAgJ2dpdGh1Yl9wYXRfJywKICAgICAgICAnc2stW0EtWmEtejAtOV17MTAsfScsCiAgICAgICAgJ0FLSUFbMC05QS1aXXsxNn0nCiAgICApCiAgICAkaGl0cyA9IEAoKQogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7CiAgICAgICAgaWYgKC1ub3QgJHApIHsgY29udGludWUgfQogICAgICAgIGlmIChUZXN0LUlzSWdub3JlZFBhdGggJHApIHsgY29udGludWUgfQogICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggJHApKSB7IFdyaXRlLVdhcm4gKCJTa2lwcGVkIG1pc3NpbmcgZmlsZTogezB9IiAtZiAkcCk7IGNvbnRpbnVlIH0KICAgICAgICBpZiAoLW5vdCAoVGVzdC1Jc1RleHRGaWxlICRwKSkgeyBjb250aW51ZSB9CiAgICAgICAgJGxpbmVOdW0gPSAwCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGNvbnRlbnQgPSBHZXQtQ29udGVudCAtUGF0aCAkcCAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgIH0KICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgIHRocm93ICgiRmFpbGVkIHRvIHJlYWQgZmlsZSBmb3Igc2VjcmV0IHNjYW46IHswfSIgLWYgJHApCiAgICAgICAgfQogICAgICAgIGZvcmVhY2ggKCRsaW5lIGluICRjb250ZW50KSB7CiAgICAgICAgICAgICRsaW5lTnVtKysKICAgICAgICAgICAgZm9yZWFjaCAoJHBhdCBpbiAkcGF0dGVybnMpIHsKICAgICAgICAgICAgICAgIGlmICgkbGluZSAtbWF0Y2ggJHBhdCkgewogICAgICAgICAgICAgICAgICAgICRyZWQgPSBSZWRhY3QtTGluZSAkbGluZQogICAgICAgICAgICAgICAgICAgICRoaXRzICs9ICgiezB9OnsxfTogcGF0dGVybiAnezJ9JyAtPiB7M30iIC1mICRwLCAkbGluZU51bSwgJHBhdCwgJHJlZCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGlmICgkaGl0cy5Db3VudCAtZ3QgMCkgewogICAgICAgICRoaXRzIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4CiAgICAgICAgdGhyb3cgKCJTZWNyZXQtbGlrZSBjb250ZW50IGRldGVjdGVkLiBMb2c6IHswfSIgLWYgJExvZ1BhdGgpCiAgICB9CiAgICAnTm8gc2VjcmV0LWxpa2UgbWF0Y2hlcyBmb3VuZC4nIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIFRlc3QtTGFyZ2VGaWxlcyhbc3RyaW5nW11dJFBhdGhzLCBbaW50XSRNYXhNQiwgW3N0cmluZ10kTG9nUGF0aCkgewogICAgJGxpbWl0ID0gJE1heE1CICogMTAyNCAqIDEwMjQKICAgICRsYXJnZSA9IEAoKQogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7CiAgICAgICAgaWYgKC1ub3QgJHApIHsgY29udGludWUgfQogICAgICAgIGlmIChUZXN0LUlzSWdub3JlZFBhdGggJHApIHsgY29udGludWUgfQogICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggJHApKSB7IFdyaXRlLVdhcm4gKCJTa2lwcGVkIG1pc3NpbmcgZmlsZTogezB9IiAtZiAkcCk7IGNvbnRpbnVlIH0KICAgICAgICAkaXRlbSA9IEdldC1JdGVtICRwIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgaWYgKCRpdGVtLlBTSXNDb250YWluZXIpIHsgY29udGludWUgfQogICAgICAgIGlmICgkaXRlbS5MZW5ndGggLWd0ICRsaW1pdCkgeyAkbGFyZ2UgKz0gKCJ7MH0gKHsxOk4yfSBNQikiIC1mICRwLCAoJGl0ZW0uTGVuZ3RoIC8gMU1CKSkgfQogICAgfQogICAgaWYgKCRsYXJnZS5Db3VudCAtZ3QgMCkgeyAkbGFyZ2UgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUVuY29kaW5nIHV0Zjg7IHRocm93ICgiTGFyZ2UgZmlsZSBndWFyZCB0cmlnZ2VyZWQuIExvZzogezB9IiAtZiAkTG9nUGF0aCkgfQogICAgJ05vIG92ZXJzaXplZCBmaWxlcyBpbiBjaGFuZ2VkIHNldC4nIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIEdldC1TdGF0dXNTaWduYXR1cmUoW3N0cmluZ10kTG9nRGlyKSB7CiAgICAkcmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBTdGF0dXMgKHdhdGNoKScgJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nIC1Mb2dEaXIgJExvZ0RpcgogICAgJGxpbmVzID0gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0CiAgICBpZiAoLW5vdCAkbGluZXMgLW9yICRsaW5lcy5Db3VudCAtZXEgMCkgeyByZXR1cm4gJycgfQogICAgcmV0dXJuICgkbGluZXMgLWpvaW4gW0Vudmlyb25tZW50XTo6TmV3TGluZSkKfQoKZnVuY3Rpb24gSW52b2tlLUdpdEF1dG9QdXNoT25jZShbc3dpdGNoXSRGcm9tV2F0Y2gpIHsKICAgICRydW5EaXIgPSAkbnVsbAogICAgJGxvY2tIYW5kbGUgPSAkbnVsbAogICAgJHN0YXJ0VGltZSA9IEdldC1EYXRlCiAgICAkc2NyaXB0OlJ1blN0YXJ0ID0gJHN0YXJ0VGltZQoKICAgIHRyeSB7CiAgICAgICAgV3JpdGUtU3RlcCAyICdMb2NhdGUgcmVwbycKICAgICAgICAkcm9vdCA9IFRlc3QtSW5HaXRSZXBvCiAgICAgICAgJHNjcmlwdDpSb290ID0gJHJvb3QKCiAgICAgICAgV3JpdGUtU3RlcCA0ICdQcmVwYXJlIGxvZ3MnCiAgICAgICAgUmVtb3ZlLU9sZExvZ1J1bnMgJHJvb3QgJEtlZXBMb2dSdW5zCiAgICAgICAgJHJ1bkRpciA9IE5ldy1SdW5Mb2dEaXIgJHJvb3QKICAgICAgICAkc2NyaXB0OlJ1bkRpciA9ICRydW5EaXIKICAgICAgICAkc2NyaXB0OkxvZ0NvdW50ZXJzID0gQHt9CiAgICAgICAgU2V0LUxvY2FsRXhjbHVkZSAkcm9vdCBAKCdxYS9sb2dzLycsICdxYS9lc2xpbnQuY2FjaGUnLCAnLmVzbGludGNhY2hlJywgJy5jYWNoZS8nKQoKICAgICAgICBpZiAoJEZyb21XYXRjaCkgeyAkbG9ja0hhbmRsZSA9IFRyeS1BY3F1aXJlUnVuTG9jayAkcm9vdCB9IGVsc2UgeyAkbG9ja0hhbmRsZSA9IEFjcXVpcmUtUnVuTG9jayAkcm9vdCB9CiAgICAgICAgaWYgKC1ub3QgJGxvY2tIYW5kbGUpIHsKICAgICAgICAgICAgV3JpdGUtV2FybiAnTG9jayBpcyBoZWxkIGJ5IGFub3RoZXIgcHJvY2Vzcy4gU2tpcHBpbmcgcnVuLicKICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgICAgIHJldHVybiAyCiAgICAgICAgfQogICAgICAgICRzY3JpcHQ6UnVuTG9ja0hhbmRsZSA9ICRsb2NrSGFuZGxlCgogICAgICAgIFdyaXRlLVN0ZXAgNiAnUmVhZCBHaXQgY29udGV4dCcKICAgICAgICAkY3R4ID0gR2V0LUdpdENvbnRleHQKICAgICAgICAkYnJhbmNoID0gJGN0eC5CcmFuY2gKICAgICAgICAkb3JpZ2luID0gJGN0eC5PcmlnaW4KCiAgICAgICAgVGVzdC1CcmFuY2hQb2xpY3kgJE1vZGUgJGJyYW5jaAoKICAgICAgICAkcmVtb3RlRGVmYXVsdCA9IEdldC1SZW1vdGVEZWZhdWx0QnJhbmNoCiAgICAgICAgJGJhc2UgPSBpZiAoJEJhc2VCcmFuY2ggLWFuZCAkQmFzZUJyYW5jaC5UcmltKCkuTGVuZ3RoIC1ndCAwKSB7ICRCYXNlQnJhbmNoLlRyaW0oKSB9IGVsc2UgeyAkcmVtb3RlRGVmYXVsdCB9CgogICAgICAgIGlmICgkcmVtb3RlRGVmYXVsdCAtbmUgJ21haW4nKSB7CiAgICAgICAgICAgIFdyaXRlLVdhcm4gKCJSZW1vdGUgZGVmYXVsdCBicmFuY2ggaXMgJ3swfScgKG5vdCAnbWFpbicpLiIgLWYgJHJlbW90ZURlZmF1bHQpCiAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0lmIHlvdSB3YW50IG1haW4sIHVwZGF0ZSBHaXRIdWIgU2V0dGluZ3MgPiBCcmFuY2hlcyA+IERlZmF1bHQgYnJhbmNoLicgLUZvcmVncm91bmRDb2xvciBEYXJrWWVsbG93CiAgICAgICAgfQoKICAgICAgICBpZiAoJEZpeFJlbW90ZUhlYWRNYWluKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgOCAnRml4IG9yaWdpbi9IRUFEIChsb2NhbCkgdG8gbWFpbicKICAgICAgICAgICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogZ2l0IHJlbW90ZSBzZXQtaGVhZCBvcmlnaW4gbWFpbicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgICAgIGVsc2UgeyBJbnZva2UtQ21kICdGaXggb3JpZ2luL0hFQUQgLT4gbWFpbiAobG9jYWwpJyAnZ2l0IHJlbW90ZSBzZXQtaGVhZCBvcmlnaW4gbWFpbicgfQogICAgICAgIH0KCiAgICAgICAgV3JpdGUtU3RlcCAxMCAnQ2hlY2sgZm9yIGNoYW5nZXMnCiAgICAgICAgJHBvcmNlbGFpbiA9IEdldC1TdGF0dXNQb3JjZWxhaW4KICAgICAgICBpZiAoLW5vdCAkcG9yY2VsYWluIC1vciAkcG9yY2VsYWluLkNvdW50IC1lcSAwKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTAwICdObyBjaGFuZ2VzIHRvIHB1c2gnCiAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdObyBjaGFuZ2VzLiBFdmVyeXRoaW5nIGNsZWFuLicKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICB9CgogICAgICAgIGlmICgkTW9kZSAtZXEgJ1NhZmUnKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTIgKCJTQUZFOiBiYXNlPSd7MH0nIHwgY3VycmVudCBicmFuY2g9J3sxfSciIC1mICRiYXNlLCAkYnJhbmNoKQoKICAgICAgICAgICAgJGRpcnR5ID0gR2V0LVN0YXR1c1BvcmNlbGFpbgogICAgICAgICAgICBpZiAoJGRpcnR5IC1hbmQgLW5vdCAkQXV0b1N0YXNoKSB7CiAgICAgICAgICAgICAgICB0aHJvdyAnU0FGRSByZXF1aXJlcyBhIGNsZWFuIHdvcmtpbmcgdHJlZSBvciAtQXV0b1N0YXNoIChiZWNhdXNlIGl0IGNoZWNrcyBvdXQgYmFzZSkuJwogICAgICAgICAgICB9CgogICAgICAgICAgICAkZGlkU3Rhc2ggPSBJbnZva2UtQXV0b1N0YXNoIC1FbmFibGU6JEF1dG9TdGFzaAoKICAgICAgICAgICAgRW5zdXJlLUxvY2FsQnJhbmNoICRiYXNlCgogICAgICAgICAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IGNoZWNrb3V0IHswfSIgLWYgJGJhc2UpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnQ2hlY2tvdXQgYmFzZScgKCJnaXQgY2hlY2tvdXQgezB9IiAtZiAkYmFzZSkgfQoKICAgICAgICAgICAgSW52b2tlLUF1dG9QdWxsICRiYXNlCgogICAgICAgICAgICBpZiAoJFNhZmVVc2VDdXJyZW50QnJhbmNoKSB7CiAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDE0ICdTQUZFOiB1c2luZyBjdXJyZW50IGJyYW5jaCAoLVNhZmVVc2VDdXJyZW50QnJhbmNoKScKICAgICAgICAgICAgICAgIGlmICgkYnJhbmNoIC1uZSAkYmFzZSkgewogICAgICAgICAgICAgICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaXQgY2hlY2tvdXQgezB9IiAtZiAkYnJhbmNoKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnQ2hlY2tvdXQgb3JpZ2luYWwnICgiZ2l0IGNoZWNrb3V0IHswfSIgLWYgJGJyYW5jaCkgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgJG5ld0JyYW5jaCA9IE5ldy1BdXRvQnJhbmNoTmFtZQogICAgICAgICAgICAgICAgV3JpdGUtU3RlcCAxNCAoIlNBRkU6IGNyZWF0aW5nIGJyYW5jaCB7MH0iIC1mICRuZXdCcmFuY2gpCiAgICAgICAgICAgICAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IGNoZWNrb3V0IC1iIHswfSIgLWYgJG5ld0JyYW5jaCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnQ3JlYXRlIFNBRkUgYnJhbmNoJyAoImdpdCBjaGVja291dCAtYiB7MH0iIC1mICRuZXdCcmFuY2gpIH0KICAgICAgICAgICAgICAgICRicmFuY2ggPSAkbmV3QnJhbmNoCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEludm9rZS1BdXRvUG9wU3Rhc2ggJGRpZFN0YXNoCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEyICdTdGFzaCArIHB1bGwgKGlmIGVuYWJsZWQpJwogICAgICAgICAgICAkZGlkU3Rhc2ggPSBJbnZva2UtQXV0b1N0YXNoIC1FbmFibGU6JEF1dG9TdGFzaAogICAgICAgICAgICBJbnZva2UtQXV0b1B1bGwgJGJyYW5jaAogICAgICAgICAgICBJbnZva2UtQXV0b1BvcFN0YXNoICRkaWRTdGFzaAogICAgICAgIH0KCiAgICAgICAgV3JpdGUtU3RlcCAxOCAnUmVjYWxjdWxhdGUgY2hhbmdlcycKICAgICAgICAkY2hhbmdlZCA9IEdldC1DaGFuZ2VkRmlsZXMKICAgICAgICAkc3RhZ2VkID0gR2V0LVN0YWdlZEZpbGVzCiAgICAgICAgJGRvY3NPbmx5ID0gVGVzdC1Eb2NzT25seUNoYW5nZSAkY2hhbmdlZAogICAgICAgICR0b3VjaGVkU3JjID0gVGVzdC1Ub3VjaGVkU3JjICRjaGFuZ2VkCiAgICAgICAgJHRvdWNoZWRDb25maWcgPSBUZXN0LVRvdWNoZWRDb25maWcgJGNoYW5nZWQKICAgICAgICAkYmFzZURpZmYgPSBHZXQtQ2hhbmdlZEZpbGVzU2luY2VCYXNlICRiYXNlCgogICAgICAgIFdyaXRlLVN0ZXAgMjIgKCJEZXRlY3RlZCB7MH0gZmlsZXMuIERvY3Mtb25seT17MX0gfCBzcmM9ezJ9IHwgY29uZmlnPXszfSIgLWYgJGNoYW5nZWQuQ291bnQsICRkb2NzT25seSwgJHRvdWNoZWRTcmMsICR0b3VjaGVkQ29uZmlnKQogICAgICAgIGlmICgkYmFzZURpZmYgLWFuZCAkYmFzZURpZmYuQ291bnQgLWd0IDApIHsgV3JpdGUtSG9zdCAoIkJhc2UgZGlmZiBmaWxlczogezB9IiAtZiAkYmFzZURpZmYuQ291bnQpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQoKICAgICAgICAkZmlsZXNGb3JHdWFyZHMgPSBHZXQtUGF0aHNGb3JHdWFyZHMKCiAgICAgICAgaWYgKC1ub3QgJFNraXBTZWNyZXRTY2FuKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMjggJ1NlY3JldCBzY2FuJwogICAgICAgICAgICAkbG9nU2VjcmV0ID0gSm9pbi1QYXRoICRydW5EaXIgJ3NlY3JldF9zY2FuLmxvZycKICAgICAgICAgICAgaWYgKC1ub3QgJERyeVJ1bikgeyBUZXN0LVNlY3JldHMgJGZpbGVzRm9yR3VhcmRzICRsb2dTZWNyZXQgfSBlbHNlIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogc2VjcmV0IHNjYW4gd291bGQgcnVuJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICB9CgogICAgICAgIGlmICgtbm90ICRTa2lwTGFyZ2VGaWxlU2NhbikgewogICAgICAgICAgICBXcml0ZS1TdGVwIDMyICgiTGFyZ2UgZmlsZSBjaGVjayAoPnswfU1CKSIgLWYgJE1heEZpbGVNQikKICAgICAgICAgICAgJGxvZ0xhcmdlID0gSm9pbi1QYXRoICRydW5EaXIgJ2xhcmdlX2ZpbGVzLmxvZycKICAgICAgICAgICAgaWYgKC1ub3QgJERyeVJ1bikgeyBUZXN0LUxhcmdlRmlsZXMgJGZpbGVzRm9yR3VhcmRzICRNYXhGaWxlTUIgJGxvZ0xhcmdlIH0gZWxzZSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGxhcmdlIGZpbGUgc2NhbiB3b3VsZCBydW4nIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgIH0KCiAgICAgICAgJHBrZyA9IEpvaW4tUGF0aCAkcm9vdCAncGFja2FnZS5qc29uJwoKICAgICAgICBpZiAoJFZlcnNpb25CdW1wIC1uZSAnbm9uZScpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAzNiAoIlZlcnNpb24gYnVtcDogezB9IiAtZiAkVmVyc2lvbkJ1bXApCiAgICAgICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggJHBrZykpIHsgdGhyb3cgJ1ZlcnNpb24gYnVtcCByZXF1ZXN0ZWQgYnV0IHBhY2thZ2UuanNvbiBub3QgZm91bmQuJyB9CiAgICAgICAgICAgIEludm9rZS1WZXJzaW9uQnVtcCAkVmVyc2lvbkJ1bXAKICAgICAgICB9CgogICAgICAgICRlZmZlY3RpdmVDaGVja3NNb2RlID0gJENoZWNrc01vZGUKICAgICAgICBpZiAoJFNraXBDaGVja3MgLW9yICRkb2NzT25seSkgeyAkZWZmZWN0aXZlQ2hlY2tzTW9kZSA9ICdPZmYnIH0KCiAgICAgICAgaWYgKCRlZmZlY3RpdmVDaGVja3NNb2RlIC1lcSAnT2ZmJykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDQ0ICgiQ2hlY2tzOiBPRkYgKFNraXBDaGVja3M9ezB9IHwgZG9jc09ubHk9ezF9IHwgQ2hlY2tzTW9kZT17Mn0pIiAtZiBbYm9vbF0kU2tpcENoZWNrcywgW2Jvb2xdJGRvY3NPbmx5LCAkQ2hlY2tzTW9kZSkKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ25wbScpKSB7CiAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDQ0ICducG0gbm90IGZvdW5kLiBTa2lwcGluZyBwcmVmbGlnaHQgY2hlY2tzLicKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRzY3JpcHRzID0gR2V0LVBhY2thZ2VTY3JpcHRzICRwa2cKCiAgICAgICAgICAgICAgICBpZiAoJGVmZmVjdGl2ZUNoZWNrc01vZGUgLWVxICdGdWxsJykgewogICAgICAgICAgICAgICAgICAgIGlmICgkc2NyaXB0cy5Db250YWluc0tleSgnbGludCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNTIgJ1ByZWZsaWdodDogTGludCAoRlVMTCknCiAgICAgICAgICAgICAgICAgICAgICAgIEludm9rZS1DbWQgJ0xpbnQnICducG0gcnVuIGxpbnQnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDUyICJObyAnbGludCcgc2NyaXB0LiBTa2lwLiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDUyICdQcmVmbGlnaHQ6IExpbnQgKFNNQVJUKScKICAgICAgICAgICAgICAgICAgICBJbnZva2UtU21hcnRMaW50ICRyb290ICRjaGFuZ2VkICRydW5EaXIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkcnVuSGVhdnkgPSAkdG91Y2hlZFNyYwogICAgICAgICAgICAgICAgaWYgKCRydW5IZWF2eSkgewogICAgICAgICAgICAgICAgICAgIGlmICgkc2NyaXB0cy5Db250YWluc0tleSgndHlwZWNoZWNrJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA1OCAnUHJlZmxpZ2h0OiBUeXBlY2hlY2snCiAgICAgICAgICAgICAgICAgICAgICAgIEludm9rZS1DbWQgJ1R5cGVjaGVjaycgJ25wbSBydW4gdHlwZWNoZWNrJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJHNjcmlwdHMuQ29udGFpbnNLZXkoJ3Rlc3QnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDYwICdQcmVmbGlnaHQ6IFRlc3RzJwogICAgICAgICAgICAgICAgICAgICAgICBJbnZva2UtQ21kICdUZXN0cycgJ25wbSB0ZXN0JwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJHNjcmlwdHMuQ29udGFpbnNLZXkoJ2J1aWxkJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA2MiAnUHJlZmxpZ2h0OiBCdWlsZCcKICAgICAgICAgICAgICAgICAgICAgICAgSW52b2tlLUNtZCAnQnVpbGQnICducG0gcnVuIGJ1aWxkJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNjAgJ1NtYXJ0IHByZWZsaWdodDogbm8gc3JjIGNoYW5nZXM7IHNraXBwaW5nIHR5cGVjaGVjay90ZXN0L2J1aWxkLicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCRTa2lwQXVkaXQgLW9yICRkb2NzT25seSkgewogICAgICAgICAgICBXcml0ZS1TdGVwIDY0ICgiQXVkaXQ6IHNraXA9ezB9IHwgZG9jc09ubHk9ezF9IiAtZiBbYm9vbF0kU2tpcEF1ZGl0LCBbYm9vbF0kZG9jc09ubHkpCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoVGVzdC1QYXRoICRwa2cpIHsKICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNjQgKCJucG0gYXVkaXQgKGxldmVsPXswfSkiIC1mICRBdWRpdExldmVsKQogICAgICAgICAgICAgICAgJGF1ZGl0ID0gSW52b2tlLUF1ZGl0ICRBdWRpdExldmVsCiAgICAgICAgICAgICAgICBpZiAoJGF1ZGl0LlJhbiAtYW5kICRhdWRpdC5GYWlsZWQgLWFuZCAkRmFpbE9uQXVkaXQpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyAoIm5wbSBhdWRpdCBmb3VuZCBpc3N1ZXMgKGxldmVsID49IHswfSkuIFJldmlldyBsb2dzOiB7MX0iIC1mICRBdWRpdExldmVsLCAkYXVkaXQuVGV4dExvZykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgV3JpdGUtU3RlcCA3MiAnU3RhZ2luZyAoZ2l0IGFkZCAtQSknCiAgICAgICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogZ2l0IGFkZCAtQScgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0dpdCBBZGQnICdnaXQgYWRkIC1BJyB9CgogICAgICAgICRzdGFnZWQgPSBHZXQtU3RhZ2VkRmlsZXMKICAgICAgICBpZiAoLW5vdCAkc3RhZ2VkIC1vciAkc3RhZ2VkLkNvdW50IC1lcSAwKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTAwICdObyBzdGFnZWQgY2hhbmdlcy4gTm90aGluZyB0byBwdXNoLicKICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgICAgIEludm9rZS1Ub2FzdCAnR2l0IEF1dG8gUHVzaCcgJ05vdGhpbmcgc3RhZ2VkLiBEb25lLicKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICB9CgogICAgICAgICRmaW5hbE1zZyA9IE5ldy1Db21taXRNZXNzYWdlICRNZXNzYWdlICRzdGFnZWQKICAgICAgICBUZXN0LUNvbW1pdE1lc3NhZ2UgJGZpbmFsTXNnCgogICAgICAgICRjaGFuZ2Vsb2dQYXRoID0gSm9pbi1QYXRoICRydW5EaXIgJ2NoYW5nZWxvZy5tZCcKICAgICAgICBpZiAoJEdlbmVyYXRlQ2hhbmdlbG9nKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgNzggJ0dlbmVyYXRpbmcgY2hhbmdlbG9nJwogICAgICAgICAgICBOZXctQ2hhbmdlbG9nICRjaGFuZ2Vsb2dQYXRoICRNb2RlICRicmFuY2ggJGJhc2UgJGZpbmFsTXNnICRzdGFnZWQKICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgODQgKCJDb21taXQ6IHswfSIgLWYgJGZpbmFsTXNnKQogICAgICAgIGlmICgkRHJ5UnVuKSB7CiAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCBjb21taXQgLW0gLi4uJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5CiAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCBwdXNoJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTAwICdEUlkgUlVOIGNvbXBsZXRlJwogICAgICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2gnIC1Db21wbGV0ZWQKICAgICAgICAgICAgJGhlYWQgPSBHZXQtSGVhZENvbW1pdAogICAgICAgICAgICBOZXctU3VtbWFyeSAoSm9pbi1QYXRoICRydW5EaXIgJ3N1bW1hcnkubWQnKSAkTW9kZSAkYnJhbmNoICRiYXNlICRoZWFkICRudWxsICRudWxsICRydW5EaXIgJHN0YXJ0VGltZSAoR2V0LURhdGUpICR0cnVlCiAgICAgICAgICAgIEludm9rZS1Ub2FzdCAnR2l0IEF1dG8gUHVzaCcgJ0RyeSBydW4gY29tcGxldGVkLicKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICB9CgogICAgICAgIEludm9rZS1DbWQgJ0dpdCBDb21taXQnICgiZ2l0IGNvbW1pdCAtbSB7MH0iIC1mIChRdW90ZS1DbWRBcmcgJGZpbmFsTXNnKSkKCiAgICAgICAgV3JpdGUtU3RlcCA5MCAoIlB1c2g6IG9yaWdpbi97MH0iIC1mICRicmFuY2gpCiAgICAgICAgaWYgKCRNb2RlIC1lcSAnU2FmZScpIHsgSW52b2tlLUNtZCAnR2l0IFB1c2ggKHNldC11cHN0cmVhbSknICgiZ2l0IHB1c2ggLXUgb3JpZ2luIHswfSIgLWYgJGJyYW5jaCkgfQogICAgICAgIGVsc2UgeyBJbnZva2UtQ21kICdHaXQgUHVzaCcgJ2dpdCBwdXNoJyB9CgogICAgICAgICRwa2dWZXJzaW9uID0gR2V0LVBhY2thZ2VWZXJzaW9uICRwa2cKICAgICAgICAkdGFnTmFtZSA9ICRudWxsCiAgICAgICAgJHJlbGVhc2VVcmwgPSAkbnVsbAogICAgICAgICRzaG91bGRUYWcgPSAkVGFnIC1vciAoJFZlcnNpb25CdW1wIC1uZSAnbm9uZScpCgogICAgICAgIGlmICgkc2hvdWxkVGFnKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgOTMgKCJUYWdnaW5nIHZlcnNpb246IHswfSIgLWYgJHBrZ1ZlcnNpb24pCiAgICAgICAgICAgICR0YWdOYW1lID0gSW52b2tlLVRhZyAkcGtnVmVyc2lvbgogICAgICAgICAgICBpZiAoJFB1c2hUYWcpIHsgSW52b2tlLVB1c2hUYWcgJHRhZ05hbWUgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCRDcmVhdGVSZWxlYXNlKSB7CiAgICAgICAgICAgIGlmICgtbm90ICR0YWdOYW1lKSB7IHRocm93ICdDcmVhdGVSZWxlYXNlIHJlcXVpcmVzIGEgdGFnLiBVc2UgLVRhZyBvciAtVmVyc2lvbkJ1bXAuJyB9CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgOTUgKCJDcmVhdGluZyBHaXRIdWIgUmVsZWFzZTogezB9IiAtZiAkdGFnTmFtZSkKICAgICAgICAgICAgJHJlbGVhc2VVcmwgPSBJbnZva2UtQ3JlYXRlUmVsZWFzZSAkdGFnTmFtZQogICAgICAgIH0KCiAgICAgICAgJHByVXJsID0gJG51bGwKICAgICAgICBpZiAoJE9wZW5QcikgewogICAgICAgICAgICBXcml0ZS1TdGVwIDk3ICgiQ3JlYXRpbmcgUFIgKGdoKSBiYXNlPSd7MH0nIiAtZiAkYmFzZSkKICAgICAgICAgICAgJHByVXJsID0gSW52b2tlLU9wZW5QciAkYmFzZSAkYnJhbmNoICRjaGFuZ2Vsb2dQYXRoCiAgICAgICAgICAgIGlmICgkT3BlblBySW5Ccm93c2VyKSB7CiAgICAgICAgICAgICAgICBJbnZva2UtT3BlblBySW5Ccm93c2VyCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgMTAwICdEb25lJwogICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAoKICAgICAgICBXcml0ZS1SdW5TdW1tYXJ5ICRicmFuY2ggJG9yaWdpbiAkcnVuRGlyCgogICAgICAgICRoZWFkID0gR2V0LUhlYWRDb21taXQKICAgICAgICBOZXctU3VtbWFyeSAoSm9pbi1QYXRoICRydW5EaXIgJ3N1bW1hcnkubWQnKSAkTW9kZSAkYnJhbmNoICRiYXNlICRoZWFkICRwclVybCAkcmVsZWFzZVVybCAkcnVuRGlyICRzdGFydFRpbWUgKEdldC1EYXRlKSAkZmFsc2UKCiAgICAgICAgSW52b2tlLVRvYXN0ICdHaXQgQXV0byBQdXNoJyAoIlN1Y2Nlc3Mgb24gezB9IiAtZiAkYnJhbmNoKQogICAgICAgIHJldHVybiAwCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgV3JpdGUtSG9zdCAnJwogICAgICAgIFdyaXRlLUhvc3QgKCIhISBTdG9wcGVkIHdpdGggZXJyb3I6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkCiAgICAgICAgaWYgKCRydW5EaXIpIHsgV3JpdGUtSG9zdCAoIkxvZ3M6IHswfSIgLWYgJHJ1bkRpcikgLUZvcmVncm91bmRDb2xvciBZZWxsb3cgfQoKICAgICAgICBpZiAoJHJ1bkRpcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgJGxhc3RMb2cgPSBHZXQtQ2hpbGRJdGVtIC1QYXRoICRydW5EaXIgLUZpbHRlciAnKi5sb2cnIHwgU29ydC1PYmplY3QgTGFzdFdyaXRlVGltZSAtRGVzY2VuZGluZyB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEKICAgICAgICAgICAgICAgIGlmICgkbGFzdExvZykgeyBXcml0ZS1Mb2dUYWlsICRsYXN0TG9nLkZ1bGxOYW1lICRUYWlsTGluZXMgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIHsKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm4gKCJGYWlsZWQgdG8gcmVhZCBsYXN0IGxvZzogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCRPcGVuTG9nT25GYWlsIC1hbmQgJHJ1bkRpciAtYW5kIChHZXQtQ29tbWFuZCBjb2RlIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSkgewogICAgICAgICAgICB0cnkgeyBjb2RlICRydW5EaXIgfSBjYXRjaCB7IFdyaXRlLVdhcm4gJ0ZhaWxlZCB0byBvcGVuIFZTIENvZGUuJyB9CiAgICAgICAgfQoKICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdGQUlMRUQuIENoZWNrIGxvZ3MuJwogICAgICAgIHJldHVybiAxCiAgICB9CiAgICBmaW5hbGx5IHsKICAgICAgICBSZWxlYXNlLVJ1bkxvY2sgJGxvY2tIYW5kbGUKICAgIH0KfQoKaWYgKCRXYXRjaCkgewogICAgJHN0YW1wID0gR2V0LURhdGUgLUZvcm1hdCAneXl5eS1NTS1kZCBISDptbTpzcycKICAgIFdyaXRlLUhvc3QgKCIjIyBXYXRjaCBPTiAoezB9KSB8IGludGVydmFsPXsxfXMgZGVib3VuY2U9ezJ9cyB8IG1vZGU9ezN9IGNoZWNrcz17NH0iIC1mICRzdGFtcCwgJFdhdGNoSW50ZXJ2YWxTZWMsICRXYXRjaERlYm91bmNlU2VjLCAkTW9kZSwgJENoZWNrc01vZGUpIC1Gb3JlZ3JvdW5kQ29sb3IgQ3lhbgogICAgJHJvb3QgPSBUZXN0LUluR2l0UmVwbwogICAgJHNjcmlwdDpSb290ID0gJHJvb3QKICAgIGlmICgtbm90ICRzY3JpcHQ6V2F0Y2hMb2dEaXIpIHsgJHNjcmlwdDpXYXRjaExvZ0RpciA9IE5ldy1XYXRjaExvZ0RpciAkcm9vdCB9CgogICAgJGxhc3RTaWcgPSAnJwogICAgJGxhc3RDaGFuZ2VBdCA9ICRudWxsCgogICAgd2hpbGUgKCR0cnVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHNpZyA9IEdldC1TdGF0dXNTaWduYXR1cmUgJHNjcmlwdDpXYXRjaExvZ0RpcgogICAgICAgICAgICAkbm93ID0gR2V0LURhdGUKCiAgICAgICAgICAgIGlmICgkc2lnIC1uZSAkbGFzdFNpZykgewogICAgICAgICAgICAgICAgJGxhc3RTaWcgPSAkc2lnCiAgICAgICAgICAgICAgICAkbGFzdENoYW5nZUF0ID0gJG5vdwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHNpZyAtYW5kICRsYXN0Q2hhbmdlQXQpIHsKICAgICAgICAgICAgICAgICRhZ2UgPSAoJG5vdyAtICRsYXN0Q2hhbmdlQXQpLlRvdGFsU2Vjb25kcwogICAgICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoIChXYXRjaCknIC1TdGF0dXMgKCJDaGFuZ2VzIGRldGVjdGVkLi4uIGRlYm91bmNlIHswOk4wfS97MX1zIiAtZiAkYWdlLCAkV2F0Y2hEZWJvdW5jZVNlYykgLVBlcmNlbnRDb21wbGV0ZSAoW01hdGhdOjpNaW4oOTksIFtpbnRdKCgkYWdlIC8gW01hdGhdOjpNYXgoMSwgJFdhdGNoRGVib3VuY2VTZWMpKSAqIDEwMCkpKQogICAgICAgICAgICAgICAgaWYgKCRhZ2UgLWdlICRXYXRjaERlYm91bmNlU2VjKSB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAnJwogICAgICAgICAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0NoYW5nZXMgc3RhYmxlLiBSdW5uaW5nIGF1dG8tcHVzaC4uLicgLUZvcmVncm91bmRDb2xvciBHcmVlbgogICAgICAgICAgICAgICAgICAgICRjb2RlID0gSW52b2tlLUdpdEF1dG9QdXNoT25jZSAtRnJvbVdhdGNoCiAgICAgICAgICAgICAgICAgICAgJGxhc3RTaWcgPSAnJwogICAgICAgICAgICAgICAgICAgICRsYXN0Q2hhbmdlQXQgPSAkbnVsbAogICAgICAgICAgICAgICAgICAgIGlmICgkY29kZSAtZXEgMikgewogICAgICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAkV2F0Y2hJbnRlcnZhbFNlYwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKCRjb2RlIC1uZSAwIC1hbmQgJFdhdGNoU3RvcE9uRmFpbCkgeyBleGl0ICRjb2RlIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJFdhdGNoT25jZSkgeyBleGl0ICRjb2RlIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCAoV2F0Y2gpJyAtU3RhdHVzICdObyBjaGFuZ2VzLi4uIHdhaXRpbmcnIC1QZXJjZW50Q29tcGxldGUgMAogICAgICAgICAgICB9CgogICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAkV2F0Y2hJbnRlcnZhbFNlYwogICAgICAgIH0KICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgIFdyaXRlLUhvc3QgKCIhISBXYXRjaCBsb29wIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAtRm9yZWdyb3VuZENvbG9yIFJlZAogICAgICAgICAgICBpZiAoJFdhdGNoU3RvcE9uRmFpbCkgeyBleGl0IDEgfQogICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAoW01hdGhdOjpNYXgoMiwgJFdhdGNoSW50ZXJ2YWxTZWMpKQogICAgICAgIH0KICAgIH0KfQoKZXhpdCAoSW52b2tlLUdpdEF1dG9QdXNoT25jZSkNCg==
### END B64 CHUNK 1/1
### END B64 FILE: git-push.ps1

