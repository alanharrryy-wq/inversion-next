### BEGIN B64 FILE: git-push.ps1
### BEGIN B64 CHUNK 1/1
PCMKZ2l0LXB1c2gucHMxIChWNS4wIFBST0RVQ1RJT04pCkFkZHM6CiAgLSBDaGVja3NNb2RlOiBTbWFydCB8IEZ1bGwgfCBPZmYKICAtIFdhdGNoIG1vZGUgd2l0aCBkZWJvdW5jZSArIGxvY2sgZmlsZQogIC0gU2FmZSBkZWZhdWx0cyAoYXV0by8qIGJyYW5jaCkKICAtIERldGVjdCByZW1vdGUgZGVmYXVsdCBicmFuY2ggKG9yaWdpbiBIRUFEIGJyYW5jaCkKICAtIE9wdGlvbmFsIEZpeFJlbW90ZUhlYWRNYWluIChsb2NhbCBvbmx5KQoKVVNBR0U6CiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgRmFzdCAtQWxsb3dNYWluIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQXV0b1N0YXNoIC1PcGVuUHIgLU9wZW5Mb2dPbkZhaWwKICAuXGdpdC1wdXNoLnBzMSAtTW9kZSBTYWZlIC1DaGVja3NNb2RlIFNtYXJ0IC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQ2hlY2tzTW9kZSBGdWxsIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLVdhdGNoIC1Nb2RlIFNhZmUgLUF1dG9TdGFzaCAtT3BlbkxvZ09uRmFpbAojPgoKI3JlcXVpcmVzIC1WZXJzaW9uIDcuMApbQ21kbGV0QmluZGluZygpXQpwYXJhbSgKICAgIFtWYWxpZGF0ZVNldCgnU2FmZScsJ0Zhc3QnKV0KICAgIFtzdHJpbmddJE1vZGUgPSAnRmFzdCcsCgogICAgW3N0cmluZ10kTWVzc2FnZSA9ICcnLAoKICAgIFtzd2l0Y2hdJERyeVJ1biwKICAgIFtzd2l0Y2hdJE9wZW5Mb2dPbkZhaWwsCiAgICBbc3dpdGNoXSROb0F1dG9QdWxsLAogICAgW3N3aXRjaF0kQXV0b1N0YXNoLAoKICAgIFtzd2l0Y2hdJEFsbG93TWFpbiwKICAgIFtzd2l0Y2hdJE9wZW5QciwKICAgIFtzd2l0Y2hdJE9wZW5QckluQnJvd3NlciwKICAgIFtzd2l0Y2hdJENyZWF0ZVJlbGVhc2UsCgogICAgW2Jvb2xdJEdlbmVyYXRlQ2hhbmdlbG9nID0gJHRydWUsCiAgICBbc3dpdGNoXSRTa2lwQ2hlY2tzLAogICAgW3N3aXRjaF0kU2tpcFNlY3JldFNjYW4sCiAgICBbc3dpdGNoXSRTa2lwTGFyZ2VGaWxlU2NhbiwKICAgIFtzd2l0Y2hdJFNraXBBdWRpdCwKCiAgICBbVmFsaWRhdGVTZXQoJ25vbmUnLCdwYXRjaCcsJ21pbm9yJywnbWFqb3InKV0KICAgIFtzdHJpbmddJFZlcnNpb25CdW1wID0gJ25vbmUnLAoKICAgIFtzd2l0Y2hdJFRhZywKICAgIFtib29sXSRQdXNoVGFnID0gJHRydWUsCgogICAgW3N3aXRjaF0kRmFpbE9uQXVkaXQsCiAgICBbVmFsaWRhdGVTZXQoJ2xvdycsJ21vZGVyYXRlJywnaGlnaCcsJ2NyaXRpY2FsJyldCiAgICBbc3RyaW5nXSRBdWRpdExldmVsID0gJ2hpZ2gnLAoKICAgIFtpbnRdJE1heEZpbGVNQiA9IDIwLAogICAgW2ludF0kVGFpbExpbmVzID0gMTYwLAogICAgW2ludF0kS2VlcExvZ1J1bnMgPSAzMCwKCiAgICBbVmFsaWRhdGVTZXQoJ1NtYXJ0JywnRnVsbCcsJ09mZicpXQogICAgW3N0cmluZ10kQ2hlY2tzTW9kZSA9ICdTbWFydCcsCgogICAgW3N3aXRjaF0kV2F0Y2gsCiAgICBbaW50XSRXYXRjaEludGVydmFsU2VjID0gNSwKICAgIFtpbnRdJFdhdGNoRGVib3VuY2VTZWMgPSAxNSwKICAgIFtzd2l0Y2hdJFdhdGNoT25jZSwKICAgIFtzd2l0Y2hdJFdhdGNoU3RvcE9uRmFpbCwKCiAgICBbc3RyaW5nXSRCYXNlQnJhbmNoID0gJycsCiAgICBbc3dpdGNoXSRGaXhSZW1vdGVIZWFkTWFpbiwKCiAgICBbc3dpdGNoXSRTYWZlVXNlQ3VycmVudEJyYW5jaAopCgokRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCgokc2NyaXB0OlJvb3QgPSAkbnVsbAokc2NyaXB0OlJ1bkRpciA9ICRudWxsCiRzY3JpcHQ6V2F0Y2hMb2dEaXIgPSAkbnVsbAokc2NyaXB0OlJ1blN0YXJ0ID0gJG51bGwKJHNjcmlwdDpSdW5Mb2NrSGFuZGxlID0gJG51bGwKJHNjcmlwdDpMb2dDb3VudGVycyA9IEB7fQokc2NyaXB0OlN1bW1hcnkgPSBbb3JkZXJlZF1Ae30KCmZ1bmN0aW9uIFdyaXRlLVN0ZXAoW2ludF0kcGVyY2VudCwgW3N0cmluZ10kbWVzc2FnZSkgewogICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtU3RhdHVzICRtZXNzYWdlIC1QZXJjZW50Q29tcGxldGUgJHBlcmNlbnQKICAgIFdyaXRlLUhvc3QgKCJbezAsM30lXSB7MX0iIC1mICRwZXJjZW50LCAkbWVzc2FnZSkKfQoKZnVuY3Rpb24gV3JpdGUtV2Fybihbc3RyaW5nXSRtZXNzYWdlKSB7CiAgICBXcml0ZS1Ib3N0ICgiV0FSTjogezB9IiAtZiAkbWVzc2FnZSkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKfQoKZnVuY3Rpb24gSW52b2tlLVRvYXN0KFtzdHJpbmddJFRpdGxlLCBbc3RyaW5nXSRCb2R5KSB7CiAgICB0cnkgewogICAgICAgIGlmIChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIC1OYW1lIEJ1cm50VG9hc3QpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEltcG9ydC1Nb2R1bGUgQnVybnRUb2FzdCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICBpZiAoR2V0LUNvbW1hbmQgTmV3LUJ1cm50VG9hc3ROb3RpZmljYXRpb24gLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHsKICAgICAgICAgICAgICAgICAgICBOZXctQnVybnRUb2FzdE5vdGlmaWNhdGlvbiAtVGV4dCAkVGl0bGUsICRCb2R5IHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICgiVG9hc3QgbW9kdWxlIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gKCJUb2FzdCBjaGVjayBmYWlsZWQ6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9CiAgICB0cnkgeyBbY29uc29sZV06OkJlZXAoOTAwLCAxNTApIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdCZWVwIGZhaWxlZC4nIH0KICAgIFdyaXRlLUhvc3QgKCIhISB7MH0gLSB7MX0iIC1mICRUaXRsZSwgJEJvZHkpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0N5YW4KfQoKZnVuY3Rpb24gRW5zdXJlLURpcihbc3RyaW5nXSRQYXRoKSB7CiAgICBpZiAoLW5vdCAkUGF0aCkgeyB0aHJvdyAnRW5zdXJlLURpcjogcGF0aCBpcyBlbXB0eS4nIH0KICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhdGgpKSB7CiAgICAgICAgTmV3LUl0ZW0gLUl0ZW1UeXBlIERpcmVjdG9yeSAtUGF0aCAkUGF0aCAtRm9yY2UgfCBPdXQtTnVsbAogICAgfQp9CgpmdW5jdGlvbiBOZXctUnVuTG9nRGlyKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICAkcWFEaXIgPSBKb2luLVBhdGggJFJlcG9Sb290ICdxYScKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRxYURpciAnbG9ncycKICAgIEVuc3VyZS1EaXIgJHFhRGlyCiAgICBFbnN1cmUtRGlyICRsb2dzRGlyCiAgICAkcnVuRGlyID0gSm9pbi1QYXRoICRsb2dzRGlyICgicnVuX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkcnVuRGlyCiAgICByZXR1cm4gJHJ1bkRpcgp9CgpmdW5jdGlvbiBOZXctV2F0Y2hMb2dEaXIoW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRxYURpciA9IEpvaW4tUGF0aCAkUmVwb1Jvb3QgJ3FhJwogICAgJGxvZ3NEaXIgPSBKb2luLVBhdGggJHFhRGlyICdsb2dzJwogICAgRW5zdXJlLURpciAkcWFEaXIKICAgIEVuc3VyZS1EaXIgJGxvZ3NEaXIKICAgICR3YXRjaERpciA9IEpvaW4tUGF0aCAkbG9nc0RpciAoIndhdGNoX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkd2F0Y2hEaXIKICAgIHJldHVybiAkd2F0Y2hEaXIKfQoKZnVuY3Rpb24gUmVtb3ZlLU9sZExvZ1J1bnMoW3N0cmluZ10kUmVwb1Jvb3QsIFtpbnRdJEtlZXApIHsKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRSZXBvUm9vdCAncWFcbG9ncycKICAgIGlmICgtbm90IChUZXN0LVBhdGggJGxvZ3NEaXIpKSB7IHJldHVybiB9CiAgICB0cnkgewogICAgICAgICRkaXJzID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkbG9nc0RpciAtRGlyZWN0b3J5IC1FcnJvckFjdGlvbiBTdG9wIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uTmFtZSAtbGlrZSAncnVuXyonIH0gfAogICAgICAgICAgICBTb3J0LU9iamVjdCBOYW1lIC1EZXNjZW5kaW5nCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBsaXN0IGxvZyBkaXJzOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgIHJldHVybgogICAgfQogICAgaWYgKCRkaXJzLkNvdW50IC1sZSAkS2VlcCkgeyByZXR1cm4gfQogICAgJHRvRGVsZXRlID0gJGRpcnMgfCBTZWxlY3QtT2JqZWN0IC1Ta2lwICRLZWVwCiAgICBmb3JlYWNoICgkZCBpbiAkdG9EZWxldGUpIHsKICAgICAgICB0cnkgeyBSZW1vdmUtSXRlbSAtUmVjdXJzZSAtRm9yY2UgJGQuRnVsbE5hbWUgLUVycm9yQWN0aW9uIFN0b3AgfQogICAgICAgIGNhdGNoIHsgV3JpdGUtV2FybiAoIkZhaWxlZCB0byByZW1vdmUgb2xkIGxvZyBkaXIgezB9OiB7MX0iIC1mICRkLkZ1bGxOYW1lLCAkXy5FeGNlcHRpb24uTWVzc2FnZSkgfQogICAgfQp9CgpmdW5jdGlvbiBTZXQtTG9jYWxFeGNsdWRlKFtzdHJpbmddJFJlcG9Sb290LCBbc3RyaW5nW11dJFBhdHRlcm5zKSB7CiAgICAkZXhjbHVkZVBhdGggPSBKb2luLVBhdGggJFJlcG9Sb290ICcuZ2l0XGluZm9cZXhjbHVkZScKICAgIHRyeSB7CiAgICAgICAgJGRpciA9IFNwbGl0LVBhdGggJGV4Y2x1ZGVQYXRoIC1QYXJlbnQKICAgICAgICBFbnN1cmUtRGlyICRkaXIKICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRleGNsdWRlUGF0aCkpIHsgTmV3LUl0ZW0gLUl0ZW1UeXBlIEZpbGUgLVBhdGggJGV4Y2x1ZGVQYXRoIC1Gb3JjZSB8IE91dC1OdWxsIH0KICAgICAgICAkZXhpc3RpbmcgPSBAKCkKICAgICAgICB0cnkgeyAkZXhpc3RpbmcgPSBHZXQtQ29udGVudCAkZXhjbHVkZVBhdGggLUVycm9yQWN0aW9uIFN0b3AgfSBjYXRjaCB7ICRleGlzdGluZyA9IEAoKSB9CiAgICAgICAgZm9yZWFjaCAoJHAgaW4gJFBhdHRlcm5zKSB7CiAgICAgICAgICAgIGlmICgtbm90ICgkZXhpc3RpbmcgLWNvbnRhaW5zICRwKSkgeyBBZGQtQ29udGVudCAtUGF0aCAkZXhjbHVkZVBhdGggLVZhbHVlICRwIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgdGhyb3cgKCJGYWlsZWQgdG8gdXBkYXRlIGxvY2FsIGdpdCBleGNsdWRlIGZpbGU6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9Cn0KCmZ1bmN0aW9uIE5ldy1Mb2dGaWxlUGF0aChbc3RyaW5nXSRQcmVmaXgsIFtzdHJpbmddJExvZ0RpcikgewogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJHNjcmlwdDpSdW5EaXIgfQogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJGVudjpURU1QIH0KICAgIEVuc3VyZS1EaXIgJExvZ0RpcgogICAgaWYgKC1ub3QgJHNjcmlwdDpMb2dDb3VudGVycy5Db250YWluc0tleSgkTG9nRGlyKSkgeyAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdID0gMCB9CiAgICAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdKysKICAgICRzYWZlID0gKCRQcmVmaXggLXJlcGxhY2UgJ1teYS16QS1aMC05Xy4tXScsJ18nKQogICAgcmV0dXJuIEpvaW4tUGF0aCAkTG9nRGlyICgiezA6MDAwfV97MX0ubG9nIiAtZiAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdLCAkc2FmZSkKfQoKZnVuY3Rpb24gV3JpdGUtTG9nVGFpbChbc3RyaW5nXSRMb2dQYXRoLCBbaW50XSRUYWlsTGluZXMpIHsKICAgIHRyeSB7CiAgICAgICAgJHRhaWwgPSBHZXQtQ29udGVudCAtUGF0aCAkTG9nUGF0aCAtVGFpbCAkVGFpbExpbmVzIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgaWYgKCR0YWlsKSB7CiAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0xhc3QgbG9nIGxpbmVzOicgLUZvcmVncm91bmRDb2xvciBNYWdlbnRhCiAgICAgICAgICAgICR0YWlsIHwgRm9yRWFjaC1PYmplY3QgeyBXcml0ZS1Ib3N0ICRfIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkNvdWxkIG5vdCByZWFkIGxvZyB0YWlsOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgfQp9CgpmdW5jdGlvbiBJbnZva2UtQ21kKFtzdHJpbmddJExhYmVsLCBbc3RyaW5nXSRDb21tYW5kLCBbc3RyaW5nXSRMb2dQYXRoID0gJG51bGwsIFtzdHJpbmddJExvZ0RpciA9ICRudWxsLCBbc3dpdGNoXSRBbGxvd0ZhaWx1cmUpIHsKICAgIGlmICgtbm90ICRMb2dQYXRoKSB7ICRMb2dQYXRoID0gTmV3LUxvZ0ZpbGVQYXRoICRMYWJlbCAkTG9nRGlyIH0KICAgICRsb2dQYXJlbnQgPSBTcGxpdC1QYXRoICRMb2dQYXRoIC1QYXJlbnQKICAgIEVuc3VyZS1EaXIgJGxvZ1BhcmVudAoKICAgIFdyaXRlLUhvc3QgJycKICAgIFdyaXRlLUhvc3QgKCItPiB7MH0iIC1mICRMYWJlbCkgLUZvcmVncm91bmRDb2xvciBDeWFuCiAgICBXcml0ZS1Ib3N0ICgiICAgJCB7MH0iIC1mICRDb21tYW5kKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5CgogICAgJHN0YXJ0ID0gR2V0LURhdGUKICAgICRyYXdPdXRwdXQgPSAmIGNtZC5leGUgL2MgJENvbW1hbmQgMj4mMQogICAgJGV4aXQgPSAkTEFTVEVYSVRDT0RFCiAgICAkZW5kID0gR2V0LURhdGUKCiAgICAkb3V0cHV0VGV4dCA9ICgkcmF3T3V0cHV0IHwgT3V0LVN0cmluZykKICAgIGlmICgkbnVsbCAtZXEgJG91dHB1dFRleHQpIHsgJG91dHB1dFRleHQgPSAnJyB9CiAgICAkb3V0cHV0VGV4dCA9ICRvdXRwdXRUZXh0LlRyaW0oKQogICAgJG91dHB1dExpbmVzID0gQCgpCiAgICBpZiAoJG91dHB1dFRleHQuTGVuZ3RoIC1ndCAwKSB7ICRvdXRwdXRMaW5lcyA9IFtyZWdleF06OlNwbGl0KCRvdXRwdXRUZXh0LCAnXHI/XG4nKSB9CiAgICAkaGVhZGVyID0gQCgKICAgICAgICAoIkNPTU1BTkQ6IHswfSIgLWYgJENvbW1hbmQpLAogICAgICAgICgiU1RBUlQ6IHswfSIgLWYgJHN0YXJ0KSwKICAgICAgICAoIkVORDogezB9IiAtZiAkZW5kKSwKICAgICAgICAoIkVYSVQ6IHswfSIgLWYgJGV4aXQpLAogICAgICAgICctLS0tJwogICAgKQogICAgJGhlYWRlciArICRvdXRwdXRMaW5lcyB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRW5jb2RpbmcgdXRmOAoKICAgIGlmICgkZXhpdCAtbmUgMCkgewogICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICBXcml0ZS1Ib3N0ICgiISEgRkFJTDogezB9IiAtZiAkTGFiZWwpIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkCiAgICAgICAgV3JpdGUtSG9zdCAoIkxvZzogezB9IiAtZiAkTG9nUGF0aCkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKICAgICAgICBpZiAoJE9wZW5Mb2dPbkZhaWwgLWFuZCAoR2V0LUNvbW1hbmQgY29kZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkpIHsKICAgICAgICAgICAgdHJ5IHsgV3JpdGUtSG9zdCAnT3BlbmluZyBsb2cgaW4gVlMgQ29kZS4uLicgLUZvcmVncm91bmRDb2xvciBDeWFuOyBjb2RlICRMb2dQYXRoIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gb3BlbiBsb2cgaW4gVlMgQ29kZS4nIH0KICAgICAgICB9CiAgICAgICAgV3JpdGUtSG9zdCAnJwogICAgICAgIFdyaXRlLUxvZ1RhaWwgJExvZ1BhdGggJFRhaWxMaW5lcwogICAgICAgIGlmICgtbm90ICRBbGxvd0ZhaWx1cmUpIHsgdGhyb3cgKCJBYm9ydGVkIGR1ZSB0byBlcnJvciBpbjogezB9IiAtZiAkTGFiZWwpIH0KICAgICAgICBXcml0ZS1XYXJuICgiQ29udGludWluZyBhZnRlciBub24tZmF0YWwgZmFpbHVyZSBpbjogezB9IiAtZiAkTGFiZWwpCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBXcml0ZS1Ib3N0ICgiT0s6IHswfSIgLWYgJExhYmVsKSAtRm9yZWdyb3VuZENvbG9yIEdyZWVuCiAgICB9CgogICAgcmV0dXJuIFtQU0N1c3RvbU9iamVjdF1AeyBFeGl0Q29kZSA9ICRleGl0OyBPdXRwdXQgPSAkb3V0cHV0TGluZXM7IE91dHB1dFRleHQgPSAkb3V0cHV0VGV4dDsgTG9nUGF0aCA9ICRMb2dQYXRoIH0KfQoKZnVuY3Rpb24gSW52b2tlLUNtZENhcHR1cmUoW3N0cmluZ10kTGFiZWwsIFtzdHJpbmddJENvbW1hbmQsIFtzdHJpbmddJExvZ1BhdGggPSAkbnVsbCwgW3N0cmluZ10kTG9nRGlyID0gJG51bGwsIFtzd2l0Y2hdJEFsbG93RmFpbHVyZSkgewogICAgcmV0dXJuIEludm9rZS1DbWQgLUxhYmVsICRMYWJlbCAtQ29tbWFuZCAkQ29tbWFuZCAtTG9nUGF0aCAkTG9nUGF0aCAtTG9nRGlyICRMb2dEaXIgLUFsbG93RmFpbHVyZTokQWxsb3dGYWlsdXJlCn0KCmZ1bmN0aW9uIFRlc3QtQ29tbWFuZEV4aXN0cyhbc3RyaW5nXSRDbWQpIHsgcmV0dXJuIFtib29sXShHZXQtQ29tbWFuZCAkQ21kIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSB9CgpmdW5jdGlvbiBHZXQtTG9ja0ZpbGVQYXRoKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICByZXR1cm4gSm9pbi1QYXRoICRSZXBvUm9vdCAncWFcbG9nc1xnaXQtcHVzaC5sb2NrJwp9CgpmdW5jdGlvbiBBY3F1aXJlLVJ1bkxvY2soW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRsb2NrUGF0aCA9IEdldC1Mb2NrRmlsZVBhdGggJFJlcG9Sb290CiAgICAkbG9ja0RpciA9IFNwbGl0LVBhdGggJGxvY2tQYXRoIC1QYXJlbnQKICAgIEVuc3VyZS1EaXIgJGxvY2tEaXIKICAgIHRyeSB7CiAgICAgICAgJGZzID0gW1N5c3RlbS5JTy5GaWxlXTo6T3BlbigkbG9ja1BhdGgsIFtTeXN0ZW0uSU8uRmlsZU1vZGVdOjpPcGVuT3JDcmVhdGUsIFtTeXN0ZW0uSU8uRmlsZUFjY2Vzc106OlJlYWRXcml0ZSwgW1N5c3RlbS5JTy5GaWxlU2hhcmVdOjpOb25lKQogICAgICAgICRmcy5TZXRMZW5ndGgoMCkKICAgICAgICAkd3JpdGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uU3RyZWFtV3JpdGVyKCRmcywgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOCwgMTAyNCwgJHRydWUpCiAgICAgICAgJHdyaXRlci5Xcml0ZUxpbmUoInBpZD0kUElEIikKICAgICAgICAkd3JpdGVyLldyaXRlTGluZSgic3RhcnRlZD0kKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnKSIpCiAgICAgICAgJHdyaXRlci5GbHVzaCgpCiAgICAgICAgcmV0dXJuICRmcwogICAgfQogICAgY2F0Y2ggewogICAgICAgIHRocm93ICgiQW5vdGhlciBpbnN0YW5jZSBpcyBydW5uaW5nLiBMb2NrIGZpbGU6IHswfSIgLWYgJGxvY2tQYXRoKQogICAgfQp9CgpmdW5jdGlvbiBUcnktQWNxdWlyZVJ1bkxvY2soW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgIHRyeSB7IHJldHVybiBBY3F1aXJlLVJ1bkxvY2sgJFJlcG9Sb290IH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1XYXJuICRfLkV4Y2VwdGlvbi5NZXNzYWdlCiAgICAgICAgcmV0dXJuICRudWxsCiAgICB9Cn0KCmZ1bmN0aW9uIFJlbGVhc2UtUnVuTG9jaygkSGFuZGxlKSB7CiAgICBpZiAoJEhhbmRsZSkgewogICAgICAgIHRyeSB7ICRIYW5kbGUuRGlzcG9zZSgpIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gcmVsZWFzZSBsb2NrLicgfQogICAgfQp9CgpmdW5jdGlvbiBGaW5kLUdpdFJvb3QgewogICAgJGRpciA9IChHZXQtTG9jYXRpb24pLlBhdGgKICAgIHdoaWxlICgkdHJ1ZSkgewogICAgICAgIGlmIChUZXN0LVBhdGggKEpvaW4tUGF0aCAkZGlyICcuZ2l0JykpIHsgcmV0dXJuICRkaXIgfQogICAgICAgICRwYXJlbnQgPSBTcGxpdC1QYXRoICRkaXIgLVBhcmVudAogICAgICAgIGlmICgtbm90ICRwYXJlbnQgLW9yICRwYXJlbnQgLWVxICRkaXIpIHsgYnJlYWsgfQogICAgICAgICRkaXIgPSAkcGFyZW50CiAgICB9CiAgICB0aHJvdyAnTm90IGluc2lkZSBhIEdpdCByZXBvIChubyAuZ2l0IGZvdW5kKS4nCn0KCmZ1bmN0aW9uIFRlc3QtSW5HaXRSZXBvIHsKICAgICRyb290ID0gRmluZC1HaXRSb290CiAgICBTZXQtTG9jYXRpb24gJHJvb3QKICAgIHJldHVybiAkcm9vdAp9CgpmdW5jdGlvbiBHZXQtR2l0Q29udGV4dCB7CiAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICdnaXQnKSkgeyB0aHJvdyAnR2l0IENMSSBub3QgZm91bmQgaW4gUEFUSC4nIH0KICAgICRicmFuY2hSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IEJyYW5jaCcgJ2dpdCBicmFuY2ggLS1zaG93LWN1cnJlbnQnCiAgICAkYnJhbmNoID0gKCRicmFuY2hSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkuVHJpbSgpCiAgICBpZiAoLW5vdCAkYnJhbmNoKSB7IHRocm93ICdObyBjdXJyZW50IGJyYW5jaCBkZXRlY3RlZCAoZGV0YWNoZWQgSEVBRD8pLicgfQogICAgJG9yaWdpblJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmVtb3RlJyAnZ2l0IHJlbW90ZSBnZXQtdXJsIG9yaWdpbicKICAgICRvcmlnaW4gPSAoJG9yaWdpblJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKS5UcmltKCkKICAgIGlmICgtbm90ICRvcmlnaW4pIHsgdGhyb3cgIlJlbW90ZSAnb3JpZ2luJyBub3QgZm91bmQuIiB9CiAgICByZXR1cm4gQHsgQnJhbmNoID0gJGJyYW5jaDsgT3JpZ2luID0gJG9yaWdpbiB9Cn0KCmZ1bmN0aW9uIEdldC1SZW1vdGVEZWZhdWx0QnJhbmNoIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFJlbW90ZSBIRUFEJyAnZ2l0IHN5bWJvbGljLXJlZiAtLXF1aWV0IC0tc2hvcnQgcmVmcy9yZW1vdGVzL29yaWdpbi9IRUFEJyAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJHJlcy5FeGl0Q29kZSAtZXEgMCkgewogICAgICAgICRsaW5lID0gKCRyZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkuVHJpbSgpCiAgICAgICAgaWYgKCRsaW5lKSB7IHJldHVybiAoJGxpbmUgLXJlcGxhY2UgJ15vcmlnaW4vJywnJykgfQogICAgfQogICAgaWYgKCRyZXMuRXhpdENvZGUgLW5lIDApIHsgV3JpdGUtV2FybiAnQ291bGQgbm90IHJlYWQgb3JpZ2luL0hFQUQgdmlhIHN5bWJvbGljLXJlZjsgZmFsbGluZyBiYWNrLicgfQogICAgJHJlczIgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFJlbW90ZSBTaG93JyAnZ2l0IHJlbW90ZSBzaG93IG9yaWdpbicgLUFsbG93RmFpbHVyZQogICAgaWYgKCRyZXMyLkV4aXRDb2RlIC1lcSAwKSB7CiAgICAgICAgZm9yZWFjaCAoJGxpbmUgaW4gJHJlczIuT3V0cHV0KSB7CiAgICAgICAgICAgIGlmICgkbGluZSAtbWF0Y2ggJ0hFQUQgYnJhbmNoOlxzKihcUyspXHMqJCcpIHsgcmV0dXJuICRNYXRjaGVzWzFdIH0KICAgICAgICB9CiAgICB9CiAgICBXcml0ZS1XYXJuICdDb3VsZCBub3QgZGV0ZWN0IHJlbW90ZSBkZWZhdWx0IGJyYW5jaDsgdXNpbmcgbWFpbi4nCiAgICByZXR1cm4gJ21haW4nCn0KCmZ1bmN0aW9uIEVuc3VyZS1Mb2NhbEJyYW5jaChbc3RyaW5nXSRCcmFuY2hOYW1lKSB7CiAgICAkY2hlY2sgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IEJyYW5jaCBFeGlzdHMnICgiZ2l0IHNob3ctcmVmIC0tdmVyaWZ5IC0tcXVpZXQgcmVmcy9oZWFkcy97MH0iIC1mICRCcmFuY2hOYW1lKSAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJGNoZWNrLkV4aXRDb2RlIC1lcSAwKSB7IHJldHVybiB9CgogICAgaWYgKCREcnlSdW4pIHsKICAgICAgICBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IGZldGNoIG9yaWdpbiB7MH0gJiYgZ2l0IGNoZWNrb3V0IC1iIHswfSBvcmlnaW4vezB9IiAtZiAkQnJhbmNoTmFtZSkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgIHJldHVybgogICAgfQoKICAgIEludm9rZS1DbWQgJ0dpdCBGZXRjaCcgKCJnaXQgZmV0Y2ggb3JpZ2luIHswfSIgLWYgJEJyYW5jaE5hbWUpCiAgICBJbnZva2UtQ21kICdDaGVja291dCBiYXNlIGJyYW5jaCcgKCJnaXQgY2hlY2tvdXQgLWIgezB9IG9yaWdpbi97MH0iIC1mICRCcmFuY2hOYW1lKQp9CgpmdW5jdGlvbiBHZXQtU3RhdHVzUG9yY2VsYWluKFtzdHJpbmddJExvZ0RpciA9ICRudWxsKSB7CiAgICAkcmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBTdGF0dXMgKHBvcmNlbGFpbiknICdnaXQgc3RhdHVzIC0tcG9yY2VsYWluJyAtTG9nRGlyICRMb2dEaXIKICAgIHJldHVybiAkcmVzLk91dHB1dCB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9Cn0KCmZ1bmN0aW9uIEdldC1TdGFnZWRGaWxlcyB7CiAgICAkcmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBEaWZmIChzdGFnZWQpJyAnZ2l0IGRpZmYgLS1jYWNoZWQgLS1uYW1lLW9ubHkgLS1kaWZmLWZpbHRlcj1BQ01SVFVYQicKICAgIHJldHVybiAkcmVzLk91dHB1dCB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9IHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9CgpmdW5jdGlvbiBHZXQtVW5zdGFnZWRGaWxlcyB7CiAgICAkcmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBEaWZmICh1bnN0YWdlZCknICdnaXQgZGlmZiAtLW5hbWUtb25seSAtLWRpZmYtZmlsdGVyPUFDTVJUVVhCJwogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1VbnRyYWNrZWRGaWxlcyB7CiAgICAkcmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBVbnRyYWNrZWQnICdnaXQgbHMtZmlsZXMgLS1vdGhlcnMgLS1leGNsdWRlLXN0YW5kYXJkJwogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1DaGFuZ2VkRmlsZXMgewogICAgJGFsbCA9IEAoKQogICAgJGFsbCArPSBHZXQtU3RhZ2VkRmlsZXMKICAgICRhbGwgKz0gR2V0LVVuc3RhZ2VkRmlsZXMKICAgICRhbGwgKz0gR2V0LVVudHJhY2tlZEZpbGVzCiAgICByZXR1cm4gJGFsbCB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9IHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9CgpmdW5jdGlvbiBHZXQtQ2hhbmdlZEZpbGVzU2luY2VCYXNlKFtzdHJpbmddJEJhc2VCcmFuY2gpIHsKICAgIGlmICgtbm90ICRCYXNlQnJhbmNoKSB7IHJldHVybiBAKCkgfQogICAgJG1iID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBNZXJnZS1CYXNlJyAoImdpdCBtZXJnZS1iYXNlIEhFQUQgezB9IiAtZiAkQmFzZUJyYW5jaCkgLUFsbG93RmFpbHVyZQogICAgaWYgKCRtYi5FeGl0Q29kZSAtbmUgMCkgewogICAgICAgIFdyaXRlLVdhcm4gJ0NvdWxkIG5vdCBjb21wdXRlIG1lcmdlLWJhc2UuJwogICAgICAgIHJldHVybiBAKCkKICAgIH0KICAgICRoYXNoID0gKCRtYi5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKS5UcmltKCkKICAgIGlmICgtbm90ICRoYXNoKSB7IHJldHVybiBAKCkgfQogICAgJGRpZmYgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmYgKGJhc2UuLkhFQUQpJyAoImdpdCBkaWZmIC0tbmFtZS1vbmx5IHswfSBIRUFEIiAtZiAkaGFzaCkKICAgIHJldHVybiAkZGlmZi5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQ0KCmZ1bmN0aW9uIE5vcm1hbGl6ZS1SZWxQYXRoKFtzdHJpbmddJFBhdGgpIHsKICAgIGlmICgtbm90ICRQYXRoKSB7IHJldHVybiAnJyB9CiAgICAkcCA9ICRQYXRoIC1yZXBsYWNlICdcXCcsJy8nCiAgICAkcCA9ICRwLlRyaW1TdGFydCgnLi8nKQogICAgcmV0dXJuICRwCn0KCmZ1bmN0aW9uIEdldC1HdWFyZElnbm9yZVByZWZpeGVzIHsKICAgIHJldHVybiBAKAogICAgICAgICcuZ2l0LycsCiAgICAgICAgJ25vZGVfbW9kdWxlcy8nLAogICAgICAgICdkaXN0LycsCiAgICAgICAgJ2J1aWxkLycsCiAgICAgICAgJ291dC8nLAogICAgICAgICdjb3ZlcmFnZS8nLAogICAgICAgICcuY2FjaGUvJywKICAgICAgICAnLm5leHQvJywKICAgICAgICAncWEvbG9ncy8nCiAgICApCn0KCmZ1bmN0aW9uIFRlc3QtSXNJZ25vcmVkUGF0aChbc3RyaW5nXSRQYXRoKSB7CiAgICAkcCA9IE5vcm1hbGl6ZS1SZWxQYXRoICRQYXRoCiAgICBmb3JlYWNoICgkcHJlZml4IGluIChHZXQtR3VhcmRJZ25vcmVQcmVmaXhlcykpIHsKICAgICAgICBpZiAoJHAuU3RhcnRzV2l0aCgkcHJlZml4KSkgeyByZXR1cm4gJHRydWUgfQogICAgfQogICAgcmV0dXJuICRmYWxzZQp9CgpmdW5jdGlvbiBUZXN0LURvY3NPbmx5Q2hhbmdlKFtzdHJpbmdbXV0kUGF0aHMpIHsKICAgIGlmICgtbm90ICRQYXRocyAtb3IgJFBhdGhzLkNvdW50IC1lcSAwKSB7IHJldHVybiAkZmFsc2UgfQogICAgJGRvY1BhdHRlcm5zID0gQCgKICAgICAgICAnXihSRUFETUV8Q0hBTkdFTE9HfExJQ0VOU0UpXGInLAogICAgICAgICdeZG9jc1tcXC9dJywKICAgICAgICAnXnFhW1xcL10nLAogICAgICAgICdcLm1kJCcsCiAgICAgICAgJ1wudHh0JCcsCiAgICAgICAgJ15cLihnaXRpZ25vcmV8Z2l0YXR0cmlidXRlcykkJwogICAgKQogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7CiAgICAgICAgJGlzRG9jID0gJGZhbHNlCiAgICAgICAgZm9yZWFjaCAoJHJ4IGluICRkb2NQYXR0ZXJucykgewogICAgICAgICAgICBpZiAoJHAgLW1hdGNoICRyeCkgeyAkaXNEb2MgPSAkdHJ1ZTsgYnJlYWsgfQogICAgICAgIH0KICAgICAgICBpZiAoLW5vdCAkaXNEb2MpIHsgcmV0dXJuICRmYWxzZSB9CiAgICB9CiAgICByZXR1cm4gJHRydWUKfQoKZnVuY3Rpb24gVGVzdC1Ub3VjaGVkU3JjKFtzdHJpbmdbXV0kUGF0aHMpIHsKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgeyBpZiAoJHAgLW1hdGNoICdec3JjW1xcL10nKSB7IHJldHVybiAkdHJ1ZSB9IH0KICAgIHJldHVybiAkZmFsc2UKfQoKZnVuY3Rpb24gVGVzdC1Ub3VjaGVkQ29uZmlnKFtzdHJpbmdbXV0kUGF0aHMpIHsKICAgIGlmICgtbm90ICRQYXRocykgeyByZXR1cm4gJGZhbHNlIH0KICAgICRwYXR0ZXJucyA9IEAoCiAgICAgICAgJ15wYWNrYWdlXC5qc29uJCcsCiAgICAgICAgJ15wYWNrYWdlLWxvY2tcLmpzb24kJywKICAgICAgICAnXnBucG0tbG9ja1wueWFtbCQnLAogICAgICAgICdeeWFyblwubG9jayQnLAogICAgICAgICdedHNjb25maWcoXC4uKyk/XC5qc29uJCcsCiAgICAgICAgJ152aXRlXC5jb25maWdcLicsCiAgICAgICAgJ15lc2xpbnRcLmNvbmZpZ1wuJywKICAgICAgICAnXlwuZXNsaW50cmMnLAogICAgICAgICdeXC5wcmV0dGllcnJjJywKICAgICAgICAnXlwuZWRpdG9yY29uZmlnJCcsCiAgICAgICAgJ15cLm5wbXJjJCcsCiAgICAgICAgJ15cLm52bXJjJCcsCiAgICAgICAgJ15zY3JpcHRzW1xcL10nLAogICAgICAgICdeY29uZmlnW1xcL10nLAogICAgICAgICdeXC5naXRodWJbXFwvXScsCiAgICAgICAgJ15cLnZzY29kZVtcXC9dJwogICAgKQogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7CiAgICAgICAgJG4gPSBOb3JtYWxpemUtUmVsUGF0aCAkcAogICAgICAgIGZvcmVhY2ggKCRyeCBpbiAkcGF0dGVybnMpIHsKICAgICAgICAgICAgaWYgKCRuIC1tYXRjaCAkcngpIHsgcmV0dXJuICR0cnVlIH0KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gJGZhbHNlCn0KCmZ1bmN0aW9uIFRlc3QtQ29tbWl0TWVzc2FnZShbc3RyaW5nXSRNc2cpIHsKICAgIGlmICgtbm90ICRNc2cpIHsgcmV0dXJuIH0KICAgIGlmICgkTXNnIC1tYXRjaCAnKD9pKVxiV0lQXGInKSB7IHRocm93ICJDb21taXQgbWVzc2FnZSBjb250YWlucyAnV0lQJy4gQmxvY2tlZC4iIH0KfQoKZnVuY3Rpb24gVGVzdC1CcmFuY2hQb2xpY3koW3N0cmluZ10kTW9kZVZhbHVlLCBbc3RyaW5nXSRCcmFuY2gpIHsKICAgIGlmICgkTW9kZVZhbHVlIC1lcSAnU2FmZScpIHsgcmV0dXJuIH0KICAgIGlmICgkTW9kZVZhbHVlIC1lcSAnRmFzdCcgLWFuZCAkQnJhbmNoIC1lcSAnbWFpbicgLWFuZCAtbm90ICRBbGxvd01haW4pIHsKICAgICAgICB0aHJvdyAnWW91IGFyZSBvbiBtYWluLiBJbiBGYXN0IG1vZGUgeW91IG11c3QgcGFzcyAtQWxsb3dNYWluIHRvIGF1dG8tY29tbWl0L3B1c2guJwogICAgfQp9CgpmdW5jdGlvbiBOZXctQXV0b0JyYW5jaE5hbWUgeyByZXR1cm4gKCJhdXRvL3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKSB9CgpmdW5jdGlvbiBJbnZva2UtQXV0b1B1bGwoW3N0cmluZ10kQmFzZUJyYW5jaCkgewogICAgaWYgKCROb0F1dG9QdWxsKSB7IHJldHVybiB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IHB1bGwgLS1yZWJhc2Ugb3JpZ2luIHswfSIgLWYgJEJhc2VCcmFuY2gpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICdHaXQgUHVsbCAocmViYXNlKScgKCJnaXQgcHVsbCAtLXJlYmFzZSBvcmlnaW4gezB9IiAtZiAkQmFzZUJyYW5jaCkKfQoKZnVuY3Rpb24gSW52b2tlLUF1dG9TdGFzaChbc3dpdGNoXSRFbmFibGUpIHsKICAgIGlmICgtbm90ICRFbmFibGUpIHsgcmV0dXJuICRmYWxzZSB9CiAgICAkcG9yY2VsYWluID0gR2V0LVN0YXR1c1BvcmNlbGFpbgogICAgaWYgKC1ub3QgJHBvcmNlbGFpbiAtb3IgJHBvcmNlbGFpbi5Db3VudCAtZXEgMCkgeyByZXR1cm4gJGZhbHNlIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCBzdGFzaCBwdXNoIC11IC1tICJhdXRvc3Rhc2ggZ2l0LXB1c2gucHMxIicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuICR0cnVlIH0KICAgIEludm9rZS1DbWQgJ0dpdCBTdGFzaCcgJ2dpdCBzdGFzaCBwdXNoIC11IC1tICJhdXRvc3Rhc2ggZ2l0LXB1c2gucHMxIicKICAgIHJldHVybiAkdHJ1ZQp9CgpmdW5jdGlvbiBJbnZva2UtQXV0b1BvcFN0YXNoKFtib29sXSREaWRTdGFzaCkgewogICAgaWYgKC1ub3QgJERpZFN0YXNoKSB7IHJldHVybiB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgc3Rhc2ggcG9wJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gfQogICAgSW52b2tlLUNtZCAnR2l0IFN0YXNoIFBvcCcgJ2dpdCBzdGFzaCBwb3AnCn0KCmZ1bmN0aW9uIFF1b3RlLUNtZEFyZyhbc3RyaW5nXSRzKSB7CiAgICBpZiAoJG51bGwgLWVxICRzKSB7IHJldHVybiAnIiInIH0KICAgICR0ID0gJHMuUmVwbGFjZSgnIicsJ1wiJykKICAgIHJldHVybiAnIicgKyAkdCArICciJwp9CgpmdW5jdGlvbiBSZXNvbHZlLUVzbGludENtZChbc3RyaW5nXSRSZXBvUm9vdCkgewogICAgJGxvY2FsID0gSm9pbi1QYXRoICRSZXBvUm9vdCAnbm9kZV9tb2R1bGVzXC5iaW5cZXNsaW50LmNtZCcKICAgIGlmIChUZXN0LVBhdGggJGxvY2FsKSB7IHJldHVybiAkbG9jYWwgfQogICAgcmV0dXJuICducHggLS1uby1pbnN0YWxsIGVzbGludCcKfQoKZnVuY3Rpb24gR2V0LUxpbnRhYmxlRmlsZXMoW3N0cmluZ1tdXSRQYXRocykgewogICAgJG9rID0gQCgnLmpzJywnLmpzeCcsJy50cycsJy50c3gnLCcubWpzJywnLmNqcycsJy5tdHMnLCcuY3RzJykKICAgICRvdXQgPSBAKCkKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgewogICAgICAgICRleHQgPSBbSU8uUGF0aF06OkdldEV4dGVuc2lvbigkcCkuVG9Mb3dlckludmFyaWFudCgpCiAgICAgICAgaWYgKCRvayAtY29udGFpbnMgJGV4dCkgeyAkb3V0ICs9ICRwIH0KICAgIH0KICAgIHJldHVybiAkb3V0IHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9CgpmdW5jdGlvbiBJbnZva2UtU21hcnRMaW50KFtzdHJpbmddJFJlcG9Sb290LCBbc3RyaW5nW11dJENoYW5nZWRGaWxlcywgW3N0cmluZ10kUnVuRGlyKSB7CiAgICAkbGludEZpbGVzID0gR2V0LUxpbnRhYmxlRmlsZXMgJENoYW5nZWRGaWxlcwogICAgaWYgKC1ub3QgJGxpbnRGaWxlcyAtb3IgJGxpbnRGaWxlcy5Db3VudCAtZXEgMCkgewogICAgICAgIFdyaXRlLVN0ZXAgNDQgJ1NtYXJ0IExpbnQ6IG5vIEpTL1RTIGZpbGVzIGNoYW5nZWQuIFNraXAuJwogICAgICAgIHJldHVybgogICAgfQoKICAgICRlc2xpbnQgPSBSZXNvbHZlLUVzbGludENtZCAkUmVwb1Jvb3QKCiAgICAkY2h1bmtTaXplID0gMzUKICAgICRjaHVua3MgPSBAKCkKICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJGxpbnRGaWxlcy5Db3VudDsgJGkgKz0gJGNodW5rU2l6ZSkgewogICAgICAgICRlbmQgPSBbTWF0aF06Ok1pbigkaSArICRjaHVua1NpemUgLSAxLCAkbGludEZpbGVzLkNvdW50IC0gMSkKICAgICAgICAkY2h1bmtzICs9ICwgKCRsaW50RmlsZXNbJGkuLiRlbmRdKQogICAgfQoKICAgICRpZHggPSAwCiAgICBmb3JlYWNoICgkYyBpbiAkY2h1bmtzKSB7CiAgICAgICAgJGlkeCsrCiAgICAgICAgJGFyZ3MgPSBAKCctLW1heC13YXJuaW5ncz0wJywgJy0tbm8tZXJyb3Itb24tdW5tYXRjaGVkLXBhdHRlcm4nLCAnLS1jYWNoZScsICctLWNhY2hlLWxvY2F0aW9uJywgJ3FhL2VzbGludC5jYWNoZScpCiAgICAgICAgJHF1b3RlZEZpbGVzID0gJGMgfCBGb3JFYWNoLU9iamVjdCB7IFF1b3RlLUNtZEFyZyAkXyB9CiAgICAgICAgJGNtZCA9CiAgICAgICAgaWYgKCRlc2xpbnQgLWxpa2UgJ25weConKSB7CiAgICAgICAgICAgICJ7MH0gezF9IHsyfSIgLWYgJGVzbGludCwgKCRhcmdzIC1qb2luICcgJyksICgkcXVvdGVkRmlsZXMgLWpvaW4gJyAnKQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgInswfSB7MX0gezJ9IiAtZiAoUXVvdGUtQ21kQXJnICRlc2xpbnQpLCAoJGFyZ3MgLWpvaW4gJyAnKSwgKCRxdW90ZWRGaWxlcyAtam9pbiAnICcpCiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDUyICgiU21hcnQgTGludDogY2h1bmsgezB9L3sxfSIgLWYgJGlkeCwgJGNodW5rcy5Db3VudCkKICAgICAgICBJbnZva2UtQ21kICdMaW50IChjaGFuZ2VkKScgJGNtZAogICAgfQp9CgpmdW5jdGlvbiBHZXQtUGFja2FnZVNjcmlwdHMoW3N0cmluZ10kUGFja2FnZUpzb25QYXRoKSB7CiAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRQYWNrYWdlSnNvblBhdGgpKSB7IHJldHVybiBAe30gfQogICAgdHJ5IHsKICAgICAgICAkanNvbiA9IEdldC1Db250ZW50ICRQYWNrYWdlSnNvblBhdGggLVJhdyB8IENvbnZlcnRGcm9tLUpzb24KICAgICAgICBpZiAoJG51bGwgLWVxICRqc29uLnNjcmlwdHMpIHsgcmV0dXJuIEB7fSB9CiAgICAgICAgJHNjcmlwdHMgPSBAe30KICAgICAgICAkanNvbi5zY3JpcHRzLlBTT2JqZWN0LlByb3BlcnRpZXMgfCBGb3JFYWNoLU9iamVjdCB7ICRzY3JpcHRzWyRfLk5hbWVdID0gJF8uVmFsdWUgfQogICAgICAgIHJldHVybiAkc2NyaXB0cwogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gKCJGYWlsZWQgdG8gcGFyc2UgcGFja2FnZS5qc29uIHNjcmlwdHM6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICAgICAgcmV0dXJuIEB7fQogICAgfQp9CgpmdW5jdGlvbiBHZXQtUGFja2FnZVZlcnNpb24oW3N0cmluZ10kUGFja2FnZUpzb25QYXRoKSB7CiAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRQYWNrYWdlSnNvblBhdGgpKSB7IHJldHVybiAnJyB9CiAgICB0cnkgewogICAgICAgICRqc29uID0gR2V0LUNvbnRlbnQgJFBhY2thZ2VKc29uUGF0aCAtUmF3IHwgQ29udmVydEZyb20tSnNvbgogICAgICAgIGlmICgkanNvbi52ZXJzaW9uKSB7IHJldHVybiBbc3RyaW5nXSRqc29uLnZlcnNpb24gfQogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gKCJGYWlsZWQgdG8gcGFyc2UgcGFja2FnZS5qc29uIHZlcnNpb246IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9CiAgICByZXR1cm4gJycKfQoKZnVuY3Rpb24gSW52b2tlLVZlcnNpb25CdW1wKFtzdHJpbmddJEJ1bXApIHsKICAgIGlmICgkQnVtcCAtZXEgJ25vbmUnKSB7IHJldHVybiB9CiAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICducG0nKSkgeyB0aHJvdyAnbnBtIG5vdCBmb3VuZCwgY2Fubm90IGJ1bXAgdmVyc2lvbi4nIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBucG0gdmVyc2lvbiB7MH0gLS1uby1naXQtdGFnLXZlcnNpb24iIC1mICRCdW1wKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gfQogICAgSW52b2tlLUNtZCAnbnBtIHZlcnNpb24gYnVtcCcgKCJucG0gdmVyc2lvbiB7MH0gLS1uby1naXQtdGFnLXZlcnNpb24iIC1mICRCdW1wKQp9CgpmdW5jdGlvbiBJbnZva2UtQXVkaXQoW3N0cmluZ10kTGV2ZWwpIHsKICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ25wbScpKSB7IHJldHVybiBAeyBSYW4gPSAkZmFsc2U7IEZhaWxlZCA9ICRmYWxzZTsgVGV4dExvZyA9ICcnOyBKc29uTG9nID0gJycgfSB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogbnBtIGF1ZGl0IC0tYXVkaXQtbGV2ZWw9ezB9IiAtZiAkTGV2ZWwpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiBAeyBSYW4gPSAkdHJ1ZTsgRmFpbGVkID0gJGZhbHNlOyBUZXh0TG9nID0gJyc7IEpzb25Mb2cgPSAnJyB9IH0KCiAgICAkanNvbkxvZyA9IEpvaW4tUGF0aCAkc2NyaXB0OlJ1bkRpciAnYXVkaXQuanNvbi5sb2cnCiAgICAkdGV4dExvZyA9IEpvaW4tUGF0aCAkc2NyaXB0OlJ1bkRpciAnYXVkaXQudHh0LmxvZycKICAgICRqc29uUmVzID0gSW52b2tlLUNtZCAnbnBtIGF1ZGl0IChqc29uKScgJ25wbSBhdWRpdCAtLWpzb24nICRqc29uTG9nIC1BbGxvd0ZhaWx1cmUKICAgICR0ZXh0UmVzID0gSW52b2tlLUNtZCAoJ25wbSBhdWRpdCAobGV2ZWw9ezB9KScgLWYgJExldmVsKSAoIm5wbSBhdWRpdCAtLWF1ZGl0LWxldmVsPXswfSIgLWYgJExldmVsKSAkdGV4dExvZyAtQWxsb3dGYWlsdXJlCiAgICAkZmFpbGVkID0gKCRqc29uUmVzLkV4aXRDb2RlIC1uZSAwIC1vciAkdGV4dFJlcy5FeGl0Q29kZSAtbmUgMCkKICAgIHJldHVybiBAeyBSYW4gPSAkdHJ1ZTsgRmFpbGVkID0gJGZhaWxlZDsgVGV4dExvZyA9ICR0ZXh0TG9nOyBKc29uTG9nID0gJGpzb25Mb2cgfQp9CgpmdW5jdGlvbiBOZXctQ2hhbmdlbG9nKFtzdHJpbmddJFBhdGgsIFtzdHJpbmddJE1vZGVWYWx1ZSwgW3N0cmluZ10kQnJhbmNoLCBbc3RyaW5nXSRCYXNlQnJhbmNoLCBbc3RyaW5nXSRNZXNzYWdlVmFsdWUsIFtzdHJpbmdbXV0kRmlsZXMpIHsKICAgICRub3cgPSBHZXQtRGF0ZSAtRm9ybWF0ICd5eXl5LU1NLWRkIEhIOm1tOnNzJwogICAgJGRpZmZMb2cgPSBKb2luLVBhdGggKFNwbGl0LVBhdGggJFBhdGggLVBhcmVudCkgJ2RpZmZzdGF0LmxvZycKICAgICRzdGF0UmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBEaWZmc3RhdCcgJ2dpdCBkaWZmIC0tY2FjaGVkIC0tc3RhdCcgJGRpZmZMb2cgLUFsbG93RmFpbHVyZQogICAgJHN0YXQgPSAkc3RhdFJlcy5PdXRwdXQKCiAgICAkbGluZXMgPSBAKCkKICAgICRsaW5lcyArPSAnIyBBdXRvIENoYW5nZWxvZycKICAgICRsaW5lcyArPSAnJwogICAgJGxpbmVzICs9ICItIERhdGU6ICRub3ciCiAgICAkbGluZXMgKz0gIi0gTW9kZTogJE1vZGVWYWx1ZSIKICAgICRsaW5lcyArPSAiLSBCcmFuY2g6ICRCcmFuY2giCiAgICAkbGluZXMgKz0gIi0gQmFzZTogJEJhc2VCcmFuY2giCiAgICAkbGluZXMgKz0gIi0gTWVzc2FnZTogJE1lc3NhZ2VWYWx1ZSIKICAgICRsaW5lcyArPSAnJwogICAgJGxpbmVzICs9ICcjIyBGaWxlcycKICAgIGZvcmVhY2ggKCRmIGluICRGaWxlcykgeyAkbGluZXMgKz0gIi0gJGYiIH0KICAgICRsaW5lcyArPSAnJwogICAgJGxpbmVzICs9ICcjIyBEaWZmc3RhdCcKICAgICRsaW5lcyArPSAnYGBgJwogICAgaWYgKCRzdGF0KSB7ICRsaW5lcyArPSAkc3RhdCB9IGVsc2UgeyAkbGluZXMgKz0gJyhubyBkaWZmc3RhdCknIH0KICAgICRsaW5lcyArPSAnYGBgJwoKICAgICRsaW5lcyB8IE91dC1GaWxlIC1GaWxlUGF0aCAkUGF0aCAtRW5jb2RpbmcgdXRmOAp9CgpmdW5jdGlvbiBOZXctU3VtbWFyeShbc3RyaW5nXSRQYXRoLCBbc3RyaW5nXSRNb2RlVmFsdWUsIFtzdHJpbmddJEJyYW5jaCwgW3N0cmluZ10kQmFzZUJyYW5jaCwgW3N0cmluZ10kQ29tbWl0LCBbc3RyaW5nXSRQclVybCwgW3N0cmluZ10kUmVsZWFzZVVybCwgW3N0cmluZ10kUnVuRGlyLCBbZGF0ZXRpbWVdJFN0YXJ0VGltZSwgW2RhdGV0aW1lXSRFbmRUaW1lLCBbYm9vbF0kV2FzRHJ5UnVuKSB7CiAgICAkZHVyYXRpb24gPSBbTWF0aF06OlJvdW5kKCgkRW5kVGltZSAtICRTdGFydFRpbWUpLlRvdGFsU2Vjb25kcywgMikKICAgICRsaW5lcyA9IEAoKQogICAgJGxpbmVzICs9ICcjIFJ1biBTdW1tYXJ5JwogICAgJGxpbmVzICs9ICcnCiAgICAkbGluZXMgKz0gIi0gRGF0ZTogJChHZXQtRGF0ZSAtRm9ybWF0ICd5eXl5LU1NLWRkIEhIOm1tOnNzJykiCiAgICAkbGluZXMgKz0gIi0gTW9kZTogJE1vZGVWYWx1ZSIKICAgICRsaW5lcyArPSAiLSBCcmFuY2g6ICRCcmFuY2giCiAgICAkbGluZXMgKz0gIi0gQmFzZTogJEJhc2VCcmFuY2giCiAgICAkbGluZXMgKz0gIi0gQ29tbWl0OiAkQ29tbWl0IgogICAgJGxpbmVzICs9ICItIFBSOiAkUHJVcmwiCiAgICAkbGluZXMgKz0gIi0gUmVsZWFzZTogJFJlbGVhc2VVcmwiCiAgICAkbGluZXMgKz0gIi0gRHJ5UnVuOiAkV2FzRHJ5UnVuIgogICAgJGxpbmVzICs9ICItIER1cmF0aW9uU2VjOiAkZHVyYXRpb24iCiAgICAkbGluZXMgKz0gIi0gTG9nczogJFJ1bkRpciIKICAgICRsaW5lcyB8IE91dC1GaWxlIC1GaWxlUGF0aCAkUGF0aCAtRW5jb2RpbmcgdXRmOAp9CgpmdW5jdGlvbiBJbnZva2UtVGFnKFtzdHJpbmddJFZlcnNpb24pIHsKICAgIGlmICgtbm90ICRWZXJzaW9uKSB7IHRocm93ICdDYW5ub3QgdGFnIHdpdGhvdXQgdmVyc2lvbi4nIH0KICAgICR0YWdOYW1lID0gInYkVmVyc2lvbiIKICAgICRleGlzdGluZyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgVGFnIExpc3QnICgiZ2l0IHRhZyAtbCB7MH0iIC1mICR0YWdOYW1lKQogICAgaWYgKCRleGlzdGluZy5PdXRwdXQgLWFuZCAoJGV4aXN0aW5nLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpLlRyaW0oKSAtZXEgJHRhZ05hbWUpIHsgdGhyb3cgKCJUYWcgezB9IGFscmVhZHkgZXhpc3RzLiIgLWYgJHRhZ05hbWUpIH0KCiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgnRFJZIFJVTjogZ2l0IHRhZyAtYSB7MH0gLW0gIlJlbGVhc2UgezB9IicgLWYgJHRhZ05hbWUpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiAkdGFnTmFtZSB9CiAgICAkY21kID0gJ2dpdCB0YWcgLWEgInswfSIgLW0gIlJlbGVhc2UgezB9IicgLWYgJHRhZ05hbWUKICAgIEludm9rZS1DbWQgJ0dpdCBUYWcnICRjbWQKICAgIHJldHVybiAkdGFnTmFtZQp9CgpmdW5jdGlvbiBJbnZva2UtUHVzaFRhZyhbc3RyaW5nXSRUYWdOYW1lKSB7CiAgICBpZiAoLW5vdCAkVGFnTmFtZSkgeyByZXR1cm4gfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBwdXNoIG9yaWdpbiB7MH0iIC1mICRUYWdOYW1lKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gfQogICAgSW52b2tlLUNtZCAnUHVzaCBUYWcnICgiZ2l0IHB1c2ggb3JpZ2luIHswfSIgLWYgJFRhZ05hbWUpCn0KCmZ1bmN0aW9uIEludm9rZS1PcGVuUHIoW3N0cmluZ10kQmFzZUJyYW5jaCwgW3N0cmluZ10kSGVhZEJyYW5jaCwgW3N0cmluZ10kQm9keUZpbGUpIHsKICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ2doJykpIHsgdGhyb3cgJ2doIENMSSBub3QgZm91bmQuIEluc3RhbGwgaXQgb3IgY3JlYXRlIFBSIG1hbnVhbGx5LicgfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogZ2ggcHIgY3JlYXRlIC4uLicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuICRudWxsIH0KICAgICRjbWQgPSAnZ2ggcHIgY3JlYXRlIC0tYmFzZSAiezB9IiAtLWhlYWQgInsxfSIgLS10aXRsZSAiezJ9IiAtLWJvZHktZmlsZSAiezN9IicgLWYgJEJhc2VCcmFuY2gsICRIZWFkQnJhbmNoLCAkSGVhZEJyYW5jaCwgJEJvZHlGaWxlCiAgICBJbnZva2UtQ21kICdHaXRIdWIgUFIgQ3JlYXRlJyAkY21kCiAgICAkdXJsUmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdEh1YiBQUiBVUkwnICdnaCBwciB2aWV3IC0tanNvbiB1cmwgLS1qcSAudXJsJyAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJHVybFJlcy5FeGl0Q29kZSAtZXEgMCkgeyByZXR1cm4gKCR1cmxSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkuVHJpbSgpIH0KICAgIHJldHVybiAkbnVsbAp9CgpmdW5jdGlvbiBJbnZva2UtT3BlblBySW5Ccm93c2VyIHsKICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ2doJykpIHsgV3JpdGUtV2FybiAnZ2ggQ0xJIG5vdCBmb3VuZCBmb3IgUFIgdmlldy4nOyByZXR1cm4gfQogICAgSW52b2tlLUNtZCAnR2l0SHViIFBSIFZpZXcgKHdlYiknICdnaCBwciB2aWV3IC0td2ViJyAtQWxsb3dGYWlsdXJlCn0KCmZ1bmN0aW9uIEludm9rZS1DcmVhdGVSZWxlYXNlKFtzdHJpbmddJFRhZ05hbWUpIHsKICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ2doJykpIHsgdGhyb3cgJ2doIENMSSBub3QgZm91bmQgZm9yIFJlbGVhc2UgY3JlYXRpb24uJyB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2ggcmVsZWFzZSBjcmVhdGUgezB9IC0tZ2VuZXJhdGUtbm90ZXMiIC1mICRUYWdOYW1lKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gJG51bGwgfQogICAgJGNtZCA9ICdnaCByZWxlYXNlIGNyZWF0ZSAiezB9IiAtLXRpdGxlICJ7MH0iIC0tZ2VuZXJhdGUtbm90ZXMnIC1mICRUYWdOYW1lCiAgICBJbnZva2UtQ21kICdHaXRIdWIgUmVsZWFzZSBDcmVhdGUnICRjbWQKICAgICR1cmxSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0SHViIFJlbGVhc2UgVVJMJyAoImdoIHJlbGVhc2UgdmlldyB7MH0gLS1qc29uIHVybCAtLWpxIC51cmwiIC1mICRUYWdOYW1lKSAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJHVybFJlcy5FeGl0Q29kZSAtZXEgMCkgeyByZXR1cm4gKCR1cmxSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkuVHJpbSgpIH0KICAgIHJldHVybiAkbnVsbAp9DQoKZnVuY3Rpb24gTmV3LUNvbW1pdE1lc3NhZ2UoW3N0cmluZ10kRmFsbGJhY2ssIFtzdHJpbmdbXV0kU3RhZ2VkRmlsZXMpIHsKICAgICRzdGFtcCA9IEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW0nCiAgICBpZiAoJEZhbGxiYWNrIC1hbmQgJEZhbGxiYWNrLlRyaW0oKS5MZW5ndGggLWd0IDApIHsgcmV0dXJuICRGYWxsYmFjay5UcmltKCkgfQoKICAgICR0b3AgPSAkU3RhZ2VkRmlsZXMgfAogICAgICAgIEZvckVhY2gtT2JqZWN0IHsgKCRfIC1zcGxpdCAiWy9cXF0iKVswXSB9IHwKICAgICAgICBXaGVyZS1PYmplY3QgeyAkXyB9IHwKICAgICAgICBHcm91cC1PYmplY3QgfAogICAgICAgIFNvcnQtT2JqZWN0IENvdW50IC1EZXNjZW5kaW5nIHwKICAgICAgICBTZWxlY3QtT2JqZWN0IC1GaXJzdCAzCgogICAgJHRhZyA9IGlmICgkdG9wLkNvdW50IC1ndCAwKSB7ICgkdG9wIHwgRm9yRWFjaC1PYmplY3QgeyAkXy5OYW1lIH0pIC1qb2luICcsJyB9IGVsc2UgeyAncmVwbycgfQogICAgcmV0dXJuICJjaG9yZSgkdGFnKTogYXV0byB1cGRhdGUgJHN0YW1wIgp9CgpmdW5jdGlvbiBXcml0ZS1SdW5TdW1tYXJ5KFtzdHJpbmddJEJyYW5jaCwgW3N0cmluZ10kT3JpZ2luLCBbc3RyaW5nXSRSdW5EaXIpIHsKICAgIFdyaXRlLUhvc3QgJycKICAgIFdyaXRlLUhvc3QgJ1N1bW1hcnk6JyAtRm9yZWdyb3VuZENvbG9yIEN5YW4KICAgIFdyaXRlLUhvc3QgKCItIEJyYW5jaDogezB9IiAtZiAkQnJhbmNoKQogICAgV3JpdGUtSG9zdCAoIi0gUmVtb3RlOiB7MH0iIC1mICRPcmlnaW4pCiAgICAkaGVhZFJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmV2LVBhcnNlJyAnZ2l0IHJldi1wYXJzZSBIRUFEJwogICAgJGhlYWQgPSAoJGhlYWRSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkuVHJpbSgpCiAgICBpZiAoJGhlYWQpIHsgV3JpdGUtSG9zdCAoIi0gQ29tbWl0OiB7MH0iIC1mICRoZWFkLlN1YnN0cmluZygwLCBbTWF0aF06Ok1pbig4LCAkaGVhZC5MZW5ndGgpKSkgfQogICAgV3JpdGUtSG9zdCAoIi0gTG9nczogezB9IiAtZiAkUnVuRGlyKQogICAgV3JpdGUtSG9zdCAnJwogICAgJHN0YXR1c1JlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgU3RhdHVzIChzaG9ydCknICdnaXQgc3RhdHVzIC1zYicKICAgIGlmICgkc3RhdHVzUmVzLk91dHB1dCkgeyAkc3RhdHVzUmVzLk91dHB1dCB8IEZvckVhY2gtT2JqZWN0IHsgV3JpdGUtSG9zdCAkXyB9IH0KfQoKZnVuY3Rpb24gR2V0LUhlYWRDb21taXQgewogICAgJHJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmV2LVBhcnNlJyAnZ2l0IHJldi1wYXJzZSBIRUFEJwogICAgcmV0dXJuICgkcmVzLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpLlRyaW0oKQp9CgpmdW5jdGlvbiBUZXN0LUlzQmluYXJ5KFtzdHJpbmddJFBhdGgpIHsKICAgICRmcyA9ICRudWxsCiAgICB0cnkgewogICAgICAgICRmcyA9IFtTeXN0ZW0uSU8uRmlsZV06Ok9wZW5SZWFkKCRQYXRoKQogICAgICAgICRidWZmZXIgPSBOZXctT2JqZWN0IGJ5dGVbXSA4MDAwCiAgICAgICAgJHJlYWQgPSAkZnMuUmVhZCgkYnVmZmVyLCAwLCAkYnVmZmVyLkxlbmd0aCkKICAgICAgICBmb3IgKCRpID0gMDsgJGkgLWx0ICRyZWFkOyAkaSsrKSB7CiAgICAgICAgICAgIGlmICgkYnVmZmVyWyRpXSAtZXEgMCkgeyByZXR1cm4gJHRydWUgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gJGZhbHNlCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkNvdWxkIG5vdCBpbnNwZWN0IGZpbGUgZm9yIGJpbmFyeSBkYXRhOiB7MH0iIC1mICRQYXRoKQogICAgICAgIHJldHVybiAkdHJ1ZQogICAgfQogICAgZmluYWxseSB7CiAgICAgICAgaWYgKCRmcykgeyAkZnMuRGlzcG9zZSgpIH0KICAgIH0KfQoKZnVuY3Rpb24gVGVzdC1Jc1RleHRGaWxlKFtzdHJpbmddJFBhdGgpIHsKICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhdGgpKSB7IHJldHVybiAkZmFsc2UgfQogICAgJGV4dCA9IFtJTy5QYXRoXTo6R2V0RXh0ZW5zaW9uKCRQYXRoKS5Ub0xvd2VySW52YXJpYW50KCkKICAgICRiaW5hcnlFeHQgPSBAKCcucG5nJywnLmpwZycsJy5qcGVnJywnLmdpZicsJy53ZWJwJywnLnBkZicsJy56aXAnLCcuN3onLCcucmFyJywnLmV4ZScsJy5kbGwnLCcuYmluJywnLm1wNCcsJy5tb3YnLCcuaWNvJywnLnN2ZycsJy5wc2QnLCcuYWknLCcudHRmJywnLndvZmYnLCcud29mZjInKQogICAgaWYgKCRiaW5hcnlFeHQgLWNvbnRhaW5zICRleHQpIHsgcmV0dXJuICRmYWxzZSB9CiAgICBpZiAoVGVzdC1Jc0JpbmFyeSAkUGF0aCkgeyByZXR1cm4gJGZhbHNlIH0KICAgIHJldHVybiAkdHJ1ZQp9CgpmdW5jdGlvbiBSZWRhY3QtTGluZShbc3RyaW5nXSRMaW5lKSB7CiAgICAkcmVkID0gJExpbmUKICAgICRyZWQgPSAkcmVkIC1yZXBsYWNlICcoP2kpKEF1dGhvcml6YXRpb246KVxzK1xTKycsICckMSBbUkVEQUNURURdJwogICAgJHJlZCA9ICRyZWQgLXJlcGxhY2UgJyhbQS1aYS16MC05Xy1dezEyLH0pJywgJ1tSRURBQ1RFRF0nCiAgICByZXR1cm4gJHJlZAp9CgpmdW5jdGlvbiBHZXQtUGF0aHNGb3JHdWFyZHMgewogICAgJHN0YWdlZCA9IEdldC1TdGFnZWRGaWxlcwogICAgaWYgKCRzdGFnZWQgLWFuZCAkc3RhZ2VkLkNvdW50IC1ndCAwKSB7IHJldHVybiAkc3RhZ2VkIH0KICAgIHJldHVybiBHZXQtQ2hhbmdlZEZpbGVzCn0KCmZ1bmN0aW9uIFRlc3QtU2VjcmV0cyhbc3RyaW5nW11dJFBhdGhzLCBbc3RyaW5nXSRMb2dQYXRoKSB7CiAgICAkcGF0dGVybnMgPSBAKAogICAgICAgICcoP2kpQVBJX0tFWScsCiAgICAgICAgJyg/aSlTRUNSRVQnLAogICAgICAgICcoP2kpVE9LRU4nLAogICAgICAgICcoP2kpUEFTU1dPUkQnLAogICAgICAgICcoP2kpQkVHSU4gUFJJVkFURSBLRVknLAogICAgICAgICcoP2kpQXV0aG9yaXphdGlvbjonLAogICAgICAgICd4b3hbYmFwcnNdLScsCiAgICAgICAgJ2docF8nLAogICAgICAgICdnaXRodWJfcGF0XycsCiAgICAgICAgJ3NrLVtBLVphLXowLTldezEwLH0nLAogICAgICAgICdBS0lBWzAtOUEtWl17MTZ9JwogICAgKQogICAgJGhpdHMgPSBAKCkKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgewogICAgICAgIGlmICgtbm90ICRwKSB7IGNvbnRpbnVlIH0KICAgICAgICBpZiAoVGVzdC1Jc0lnbm9yZWRQYXRoICRwKSB7IGNvbnRpbnVlIH0KICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRwKSkgeyBXcml0ZS1XYXJuICgiU2tpcHBlZCBtaXNzaW5nIGZpbGU6IHswfSIgLWYgJHApOyBjb250aW51ZSB9CiAgICAgICAgaWYgKC1ub3QgKFRlc3QtSXNUZXh0RmlsZSAkcCkpIHsgY29udGludWUgfQogICAgICAgICRsaW5lTnVtID0gMAogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRjb250ZW50ID0gR2V0LUNvbnRlbnQgLVBhdGggJHAgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICB9CiAgICAgICAgY2F0Y2ggewogICAgICAgICAgICB0aHJvdyAoIkZhaWxlZCB0byByZWFkIGZpbGUgZm9yIHNlY3JldCBzY2FuOiB7MH0iIC1mICRwKQogICAgICAgIH0KICAgICAgICBmb3JlYWNoICgkbGluZSBpbiAkY29udGVudCkgewogICAgICAgICAgICAkbGluZU51bSsrCiAgICAgICAgICAgIGZvcmVhY2ggKCRwYXQgaW4gJHBhdHRlcm5zKSB7CiAgICAgICAgICAgICAgICBpZiAoJGxpbmUgLW1hdGNoICRwYXQpIHsKICAgICAgICAgICAgICAgICAgICAkcmVkID0gUmVkYWN0LUxpbmUgJGxpbmUKICAgICAgICAgICAgICAgICAgICAkaGl0cyArPSAoInswfTp7MX06IHBhdHRlcm4gJ3syfScgLT4gezN9IiAtZiAkcCwgJGxpbmVOdW0sICRwYXQsICRyZWQpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBpZiAoJGhpdHMuQ291bnQgLWd0IDApIHsKICAgICAgICAkaGl0cyB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRW5jb2RpbmcgdXRmOAogICAgICAgIHRocm93ICgiU2VjcmV0LWxpa2UgY29udGVudCBkZXRlY3RlZC4gTG9nOiB7MH0iIC1mICRMb2dQYXRoKQogICAgfQogICAgJ05vIHNlY3JldC1saWtlIG1hdGNoZXMgZm91bmQuJyB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRW5jb2RpbmcgdXRmOAp9CgpmdW5jdGlvbiBUZXN0LUxhcmdlRmlsZXMoW3N0cmluZ1tdXSRQYXRocywgW2ludF0kTWF4TUIsIFtzdHJpbmddJExvZ1BhdGgpIHsKICAgICRsaW1pdCA9ICRNYXhNQiAqIDEwMjQgKiAxMDI0CiAgICAkbGFyZ2UgPSBAKCkKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgewogICAgICAgIGlmICgtbm90ICRwKSB7IGNvbnRpbnVlIH0KICAgICAgICBpZiAoVGVzdC1Jc0lnbm9yZWRQYXRoICRwKSB7IGNvbnRpbnVlIH0KICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRwKSkgeyBXcml0ZS1XYXJuICgiU2tpcHBlZCBtaXNzaW5nIGZpbGU6IHswfSIgLWYgJHApOyBjb250aW51ZSB9CiAgICAgICAgJGl0ZW0gPSBHZXQtSXRlbSAkcCAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgIGlmICgkaXRlbS5QU0lzQ29udGFpbmVyKSB7IGNvbnRpbnVlIH0KICAgICAgICBpZiAoJGl0ZW0uTGVuZ3RoIC1ndCAkbGltaXQpIHsgJGxhcmdlICs9ICgiezB9ICh7MTpOMn0gTUIpIiAtZiAkcCwgKCRpdGVtLkxlbmd0aCAvIDFNQikpIH0KICAgIH0KICAgIGlmICgkbGFyZ2UuQ291bnQgLWd0IDApIHsgJGxhcmdlIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4OyB0aHJvdyAoIkxhcmdlIGZpbGUgZ3VhcmQgdHJpZ2dlcmVkLiBMb2c6IHswfSIgLWYgJExvZ1BhdGgpIH0KICAgICdObyBvdmVyc2l6ZWQgZmlsZXMgaW4gY2hhbmdlZCBzZXQuJyB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRW5jb2RpbmcgdXRmOAp9CgpmdW5jdGlvbiBHZXQtU3RhdHVzU2lnbmF0dXJlKFtzdHJpbmddJExvZ0RpcikgewogICAgJHJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgU3RhdHVzICh3YXRjaCknICdnaXQgc3RhdHVzIC0tcG9yY2VsYWluJyAtTG9nRGlyICRMb2dEaXIKICAgICRsaW5lcyA9ICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdAogICAgaWYgKC1ub3QgJGxpbmVzIC1vciAkbGluZXMuQ291bnQgLWVxIDApIHsgcmV0dXJuICcnIH0KICAgIHJldHVybiAoJGxpbmVzIC1qb2luIFtFbnZpcm9ubWVudF06Ok5ld0xpbmUpCn0KCmZ1bmN0aW9uIEludm9rZS1HaXRBdXRvUHVzaE9uY2UoW3N3aXRjaF0kRnJvbVdhdGNoKSB7CiAgICAkcnVuRGlyID0gJG51bGwKICAgICRsb2NrSGFuZGxlID0gJG51bGwKICAgICRzdGFydFRpbWUgPSBHZXQtRGF0ZQogICAgJHNjcmlwdDpSdW5TdGFydCA9ICRzdGFydFRpbWUKCiAgICB0cnkgewogICAgICAgIFdyaXRlLVN0ZXAgMiAnTG9jYXRlIHJlcG8nCiAgICAgICAgJHJvb3QgPSBUZXN0LUluR2l0UmVwbwogICAgICAgICRzY3JpcHQ6Um9vdCA9ICRyb290CgogICAgICAgIFdyaXRlLVN0ZXAgNCAnUHJlcGFyZSBsb2dzJwogICAgICAgIFJlbW92ZS1PbGRMb2dSdW5zICRyb290ICRLZWVwTG9nUnVucwogICAgICAgICRydW5EaXIgPSBOZXctUnVuTG9nRGlyICRyb290CiAgICAgICAgJHNjcmlwdDpSdW5EaXIgPSAkcnVuRGlyCiAgICAgICAgJHNjcmlwdDpMb2dDb3VudGVycyA9IEB7fQogICAgICAgIFNldC1Mb2NhbEV4Y2x1ZGUgJHJvb3QgQCgncWEvbG9ncy8nLCAncWEvZXNsaW50LmNhY2hlJywgJy5lc2xpbnRjYWNoZScsICcuY2FjaGUvJykKCiAgICAgICAgaWYgKCRGcm9tV2F0Y2gpIHsgJGxvY2tIYW5kbGUgPSBUcnktQWNxdWlyZVJ1bkxvY2sgJHJvb3QgfSBlbHNlIHsgJGxvY2tIYW5kbGUgPSBBY3F1aXJlLVJ1bkxvY2sgJHJvb3QgfQogICAgICAgIGlmICgtbm90ICRsb2NrSGFuZGxlKSB7CiAgICAgICAgICAgIFdyaXRlLVdhcm4gJ0xvY2sgaXMgaGVsZCBieSBhbm90aGVyIHByb2Nlc3MuIFNraXBwaW5nIHJ1bi4nCiAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgICAgICByZXR1cm4gMgogICAgICAgIH0KICAgICAgICAkc2NyaXB0OlJ1bkxvY2tIYW5kbGUgPSAkbG9ja0hhbmRsZQoKICAgICAgICBXcml0ZS1TdGVwIDYgJ1JlYWQgR2l0IGNvbnRleHQnCiAgICAgICAgJGN0eCA9IEdldC1HaXRDb250ZXh0CiAgICAgICAgJGJyYW5jaCA9ICRjdHguQnJhbmNoCiAgICAgICAgJG9yaWdpbiA9ICRjdHguT3JpZ2luCgogICAgICAgIFRlc3QtQnJhbmNoUG9saWN5ICRNb2RlICRicmFuY2gKCiAgICAgICAgJHJlbW90ZURlZmF1bHQgPSBHZXQtUmVtb3RlRGVmYXVsdEJyYW5jaAogICAgICAgICRiYXNlID0gaWYgKCRCYXNlQnJhbmNoIC1hbmQgJEJhc2VCcmFuY2guVHJpbSgpLkxlbmd0aCAtZ3QgMCkgeyAkQmFzZUJyYW5jaC5UcmltKCkgfSBlbHNlIHsgJHJlbW90ZURlZmF1bHQgfQoKICAgICAgICBpZiAoJHJlbW90ZURlZmF1bHQgLW5lICdtYWluJykgewogICAgICAgICAgICBXcml0ZS1XYXJuICgiUmVtb3RlIGRlZmF1bHQgYnJhbmNoIGlzICd7MH0nIChub3QgJ21haW4nKS4iIC1mICRyZW1vdGVEZWZhdWx0KQogICAgICAgICAgICBXcml0ZS1Ib3N0ICdJZiB5b3Ugd2FudCBtYWluLCB1cGRhdGUgR2l0SHViIFNldHRpbmdzID4gQnJhbmNoZXMgPiBEZWZhdWx0IGJyYW5jaC4nIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya1llbGxvdwogICAgICAgIH0KCiAgICAgICAgaWYgKCRGaXhSZW1vdGVIZWFkTWFpbikgewogICAgICAgICAgICBXcml0ZS1TdGVwIDggJ0ZpeCBvcmlnaW4vSEVBRCAobG9jYWwpIHRvIG1haW4nCiAgICAgICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCByZW1vdGUgc2V0LWhlYWQgb3JpZ2luIG1haW4nIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnRml4IG9yaWdpbi9IRUFEIC0+IG1haW4gKGxvY2FsKScgJ2dpdCByZW1vdGUgc2V0LWhlYWQgb3JpZ2luIG1haW4nIH0KICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgMTAgJ0NoZWNrIGZvciBjaGFuZ2VzJwogICAgICAgICRwb3JjZWxhaW4gPSBHZXQtU3RhdHVzUG9yY2VsYWluCiAgICAgICAgaWYgKC1ub3QgJHBvcmNlbGFpbiAtb3IgJHBvcmNlbGFpbi5Db3VudCAtZXEgMCkgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnTm8gY2hhbmdlcyB0byBwdXNoJwogICAgICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2gnIC1Db21wbGV0ZWQKICAgICAgICAgICAgSW52b2tlLVRvYXN0ICdHaXQgQXV0byBQdXNoJyAnTm8gY2hhbmdlcy4gRXZlcnl0aGluZyBjbGVhbi4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICBpZiAoJE1vZGUgLWVxICdTYWZlJykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEyICgiU0FGRTogYmFzZT0nezB9JyB8IGN1cnJlbnQgYnJhbmNoPSd7MX0nIiAtZiAkYmFzZSwgJGJyYW5jaCkKCiAgICAgICAgICAgICRkaXJ0eSA9IEdldC1TdGF0dXNQb3JjZWxhaW4KICAgICAgICAgICAgaWYgKCRkaXJ0eSAtYW5kIC1ub3QgJEF1dG9TdGFzaCkgewogICAgICAgICAgICAgICAgdGhyb3cgJ1NBRkUgcmVxdWlyZXMgYSBjbGVhbiB3b3JraW5nIHRyZWUgb3IgLUF1dG9TdGFzaCAoYmVjYXVzZSBpdCBjaGVja3Mgb3V0IGJhc2UpLicKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGRpZFN0YXNoID0gSW52b2tlLUF1dG9TdGFzaCAtRW5hYmxlOiRBdXRvU3Rhc2gKCiAgICAgICAgICAgIEVuc3VyZS1Mb2NhbEJyYW5jaCAkYmFzZQoKICAgICAgICAgICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBjaGVja291dCB7MH0iIC1mICRiYXNlKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0NoZWNrb3V0IGJhc2UnICgiZ2l0IGNoZWNrb3V0IHswfSIgLWYgJGJhc2UpIH0KCiAgICAgICAgICAgIEludm9rZS1BdXRvUHVsbCAkYmFzZQoKICAgICAgICAgICAgaWYgKCRTYWZlVXNlQ3VycmVudEJyYW5jaCkgewogICAgICAgICAgICAgICAgV3JpdGUtU3RlcCAxNCAnU0FGRTogdXNpbmcgY3VycmVudCBicmFuY2ggKC1TYWZlVXNlQ3VycmVudEJyYW5jaCknCiAgICAgICAgICAgICAgICBpZiAoJGJyYW5jaCAtbmUgJGJhc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IGNoZWNrb3V0IHswfSIgLWYgJGJyYW5jaCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0NoZWNrb3V0IG9yaWdpbmFsJyAoImdpdCBjaGVja291dCB7MH0iIC1mICRicmFuY2gpIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRuZXdCcmFuY2ggPSBOZXctQXV0b0JyYW5jaE5hbWUKICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTQgKCJTQUZFOiBjcmVhdGluZyBicmFuY2ggezB9IiAtZiAkbmV3QnJhbmNoKQogICAgICAgICAgICAgICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBjaGVja291dCAtYiB7MH0iIC1mICRuZXdCcmFuY2gpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgICAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0NyZWF0ZSBTQUZFIGJyYW5jaCcgKCJnaXQgY2hlY2tvdXQgLWIgezB9IiAtZiAkbmV3QnJhbmNoKSB9CiAgICAgICAgICAgICAgICAkYnJhbmNoID0gJG5ld0JyYW5jaAogICAgICAgICAgICB9CgogICAgICAgICAgICBJbnZva2UtQXV0b1BvcFN0YXNoICRkaWRTdGFzaAogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAxMiAnU3Rhc2ggKyBwdWxsIChpZiBlbmFibGVkKScKICAgICAgICAgICAgJGRpZFN0YXNoID0gSW52b2tlLUF1dG9TdGFzaCAtRW5hYmxlOiRBdXRvU3Rhc2gKICAgICAgICAgICAgSW52b2tlLUF1dG9QdWxsICRicmFuY2gKICAgICAgICAgICAgSW52b2tlLUF1dG9Qb3BTdGFzaCAkZGlkU3Rhc2gKICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgMTggJ1JlY2FsY3VsYXRlIGNoYW5nZXMnCiAgICAgICAgJGNoYW5nZWQgPSBHZXQtQ2hhbmdlZEZpbGVzCiAgICAgICAgJHN0YWdlZCA9IEdldC1TdGFnZWRGaWxlcwogICAgICAgICRkb2NzT25seSA9IFRlc3QtRG9jc09ubHlDaGFuZ2UgJGNoYW5nZWQKICAgICAgICAkdG91Y2hlZFNyYyA9IFRlc3QtVG91Y2hlZFNyYyAkY2hhbmdlZAogICAgICAgICR0b3VjaGVkQ29uZmlnID0gVGVzdC1Ub3VjaGVkQ29uZmlnICRjaGFuZ2VkCiAgICAgICAgJGJhc2VEaWZmID0gR2V0LUNoYW5nZWRGaWxlc1NpbmNlQmFzZSAkYmFzZQoKICAgICAgICBXcml0ZS1TdGVwIDIyICgiRGV0ZWN0ZWQgezB9IGZpbGVzLiBEb2NzLW9ubHk9ezF9IHwgc3JjPXsyfSB8IGNvbmZpZz17M30iIC1mICRjaGFuZ2VkLkNvdW50LCAkZG9jc09ubHksICR0b3VjaGVkU3JjLCAkdG91Y2hlZENvbmZpZykKICAgICAgICBpZiAoJGJhc2VEaWZmIC1hbmQgJGJhc2VEaWZmLkNvdW50IC1ndCAwKSB7IFdyaXRlLUhvc3QgKCJCYXNlIGRpZmYgZmlsZXM6IHswfSIgLWYgJGJhc2VEaWZmLkNvdW50KSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KCiAgICAgICAgJGZpbGVzRm9yR3VhcmRzID0gR2V0LVBhdGhzRm9yR3VhcmRzCgogICAgICAgIGlmICgtbm90ICRTa2lwU2VjcmV0U2NhbikgewogICAgICAgICAgICBXcml0ZS1TdGVwIDI4ICdTZWNyZXQgc2NhbicKICAgICAgICAgICAgJGxvZ1NlY3JldCA9IEpvaW4tUGF0aCAkcnVuRGlyICdzZWNyZXRfc2Nhbi5sb2cnCiAgICAgICAgICAgIGlmICgtbm90ICREcnlSdW4pIHsgVGVzdC1TZWNyZXRzICRmaWxlc0Zvckd1YXJkcyAkbG9nU2VjcmV0IH0gZWxzZSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IHNlY3JldCBzY2FuIHdvdWxkIHJ1bicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgfQoKICAgICAgICBpZiAoLW5vdCAkU2tpcExhcmdlRmlsZVNjYW4pIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAzMiAoIkxhcmdlIGZpbGUgY2hlY2sgKD57MH1NQikiIC1mICRNYXhGaWxlTUIpCiAgICAgICAgICAgICRsb2dMYXJnZSA9IEpvaW4tUGF0aCAkcnVuRGlyICdsYXJnZV9maWxlcy5sb2cnCiAgICAgICAgICAgIGlmICgtbm90ICREcnlSdW4pIHsgVGVzdC1MYXJnZUZpbGVzICRmaWxlc0Zvckd1YXJkcyAkTWF4RmlsZU1CICRsb2dMYXJnZSB9IGVsc2UgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBsYXJnZSBmaWxlIHNjYW4gd291bGQgcnVuJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICB9CgogICAgICAgICRwa2cgPSBKb2luLVBhdGggJHJvb3QgJ3BhY2thZ2UuanNvbicKCiAgICAgICAgaWYgKCRWZXJzaW9uQnVtcCAtbmUgJ25vbmUnKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMzYgKCJWZXJzaW9uIGJ1bXA6IHswfSIgLWYgJFZlcnNpb25CdW1wKQogICAgICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRwa2cpKSB7IHRocm93ICdWZXJzaW9uIGJ1bXAgcmVxdWVzdGVkIGJ1dCBwYWNrYWdlLmpzb24gbm90IGZvdW5kLicgfQogICAgICAgICAgICBJbnZva2UtVmVyc2lvbkJ1bXAgJFZlcnNpb25CdW1wCiAgICAgICAgfQoKICAgICAgICAkZWZmZWN0aXZlQ2hlY2tzTW9kZSA9ICRDaGVja3NNb2RlCiAgICAgICAgaWYgKCRTa2lwQ2hlY2tzIC1vciAkZG9jc09ubHkpIHsgJGVmZmVjdGl2ZUNoZWNrc01vZGUgPSAnT2ZmJyB9CgogICAgICAgIGlmICgkZWZmZWN0aXZlQ2hlY2tzTW9kZSAtZXEgJ09mZicpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA0NCAoIkNoZWNrczogT0ZGIChTa2lwQ2hlY2tzPXswfSB8IGRvY3NPbmx5PXsxfSB8IENoZWNrc01vZGU9ezJ9KSIgLWYgW2Jvb2xdJFNraXBDaGVja3MsIFtib29sXSRkb2NzT25seSwgJENoZWNrc01vZGUpCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICducG0nKSkgewogICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA0NCAnbnBtIG5vdCBmb3VuZC4gU2tpcHBpbmcgcHJlZmxpZ2h0IGNoZWNrcy4nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkc2NyaXB0cyA9IEdldC1QYWNrYWdlU2NyaXB0cyAkcGtnCgogICAgICAgICAgICAgICAgaWYgKCRlZmZlY3RpdmVDaGVja3NNb2RlIC1lcSAnRnVsbCcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJHNjcmlwdHMuQ29udGFpbnNLZXkoJ2xpbnQnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDUyICdQcmVmbGlnaHQ6IExpbnQgKEZVTEwpJwogICAgICAgICAgICAgICAgICAgICAgICBJbnZva2UtQ21kICdMaW50JyAnbnBtIHJ1biBsaW50JwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA1MiAiTm8gJ2xpbnQnIHNjcmlwdC4gU2tpcC4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA1MiAnUHJlZmxpZ2h0OiBMaW50IChTTUFSVCknCiAgICAgICAgICAgICAgICAgICAgSW52b2tlLVNtYXJ0TGludCAkcm9vdCAkY2hhbmdlZCAkcnVuRGlyCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHJ1bkhlYXZ5ID0gJHRvdWNoZWRTcmMKICAgICAgICAgICAgICAgIGlmICgkcnVuSGVhdnkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJHNjcmlwdHMuQ29udGFpbnNLZXkoJ3R5cGVjaGVjaycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNTggJ1ByZWZsaWdodDogVHlwZWNoZWNrJwogICAgICAgICAgICAgICAgICAgICAgICBJbnZva2UtQ21kICdUeXBlY2hlY2snICducG0gcnVuIHR5cGVjaGVjaycKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY3JpcHRzLkNvbnRhaW5zS2V5KCd0ZXN0JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA2MCAnUHJlZmxpZ2h0OiBUZXN0cycKICAgICAgICAgICAgICAgICAgICAgICAgSW52b2tlLUNtZCAnVGVzdHMnICducG0gdGVzdCcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY3JpcHRzLkNvbnRhaW5zS2V5KCdidWlsZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNjIgJ1ByZWZsaWdodDogQnVpbGQnCiAgICAgICAgICAgICAgICAgICAgICAgIEludm9rZS1DbWQgJ0J1aWxkJyAnbnBtIHJ1biBidWlsZCcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDYwICdTbWFydCBwcmVmbGlnaHQ6IG5vIHNyYyBjaGFuZ2VzOyBza2lwcGluZyB0eXBlY2hlY2svdGVzdC9idWlsZC4nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkU2tpcEF1ZGl0IC1vciAkZG9jc09ubHkpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA2NCAoIkF1ZGl0OiBza2lwPXswfSB8IGRvY3NPbmx5PXsxfSIgLWYgW2Jvb2xdJFNraXBBdWRpdCwgW2Jvb2xdJGRvY3NPbmx5KQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKFRlc3QtUGF0aCAkcGtnKSB7CiAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDY0ICgibnBtIGF1ZGl0IChsZXZlbD17MH0pIiAtZiAkQXVkaXRMZXZlbCkKICAgICAgICAgICAgICAgICRhdWRpdCA9IEludm9rZS1BdWRpdCAkQXVkaXRMZXZlbAogICAgICAgICAgICAgICAgaWYgKCRhdWRpdC5SYW4gLWFuZCAkYXVkaXQuRmFpbGVkIC1hbmQgJEZhaWxPbkF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKCJucG0gYXVkaXQgZm91bmQgaXNzdWVzIChsZXZlbCA+PSB7MH0pLiBSZXZpZXcgbG9nczogezF9IiAtZiAkQXVkaXRMZXZlbCwgJGF1ZGl0LlRleHRMb2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgNzIgJ1N0YWdpbmcgKGdpdCBhZGQgLUEpJwogICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCBhZGQgLUEnIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgIGVsc2UgeyBJbnZva2UtQ21kICdHaXQgQWRkJyAnZ2l0IGFkZCAtQScgfQoKICAgICAgICAkc3RhZ2VkID0gR2V0LVN0YWdlZEZpbGVzCiAgICAgICAgaWYgKC1ub3QgJHN0YWdlZCAtb3IgJHN0YWdlZC5Db3VudCAtZXEgMCkgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnTm8gc3RhZ2VkIGNoYW5nZXMuIE5vdGhpbmcgdG8gcHVzaC4nCiAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdOb3RoaW5nIHN0YWdlZC4gRG9uZS4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICAkZmluYWxNc2cgPSBOZXctQ29tbWl0TWVzc2FnZSAkTWVzc2FnZSAkc3RhZ2VkCiAgICAgICAgVGVzdC1Db21taXRNZXNzYWdlICRmaW5hbE1zZwoKICAgICAgICAkY2hhbmdlbG9nUGF0aCA9IEpvaW4tUGF0aCAkcnVuRGlyICdjaGFuZ2Vsb2cubWQnCiAgICAgICAgaWYgKCRHZW5lcmF0ZUNoYW5nZWxvZykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDc4ICdHZW5lcmF0aW5nIGNoYW5nZWxvZycKICAgICAgICAgICAgTmV3LUNoYW5nZWxvZyAkY2hhbmdlbG9nUGF0aCAkTW9kZSAkYnJhbmNoICRiYXNlICRmaW5hbE1zZyAkc3RhZ2VkCiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDg0ICgiQ29tbWl0OiB7MH0iIC1mICRmaW5hbE1zZykKICAgICAgICBpZiAoJERyeVJ1bikgewogICAgICAgICAgICBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgY29tbWl0IC1tIC4uLicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgICAgICBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgcHVzaCcgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnRFJZIFJVTiBjb21wbGV0ZScKICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgICAgICRoZWFkID0gR2V0LUhlYWRDb21taXQKICAgICAgICAgICAgTmV3LVN1bW1hcnkgKEpvaW4tUGF0aCAkcnVuRGlyICdzdW1tYXJ5Lm1kJykgJE1vZGUgJGJyYW5jaCAkYmFzZSAkaGVhZCAkbnVsbCAkbnVsbCAkcnVuRGlyICRzdGFydFRpbWUgKEdldC1EYXRlKSAkdHJ1ZQogICAgICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdEcnkgcnVuIGNvbXBsZXRlZC4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICBJbnZva2UtQ21kICdHaXQgQ29tbWl0JyAoImdpdCBjb21taXQgLW0gezB9IiAtZiAoUXVvdGUtQ21kQXJnICRmaW5hbE1zZykpCgogICAgICAgIFdyaXRlLVN0ZXAgOTAgKCJQdXNoOiBvcmlnaW4vezB9IiAtZiAkYnJhbmNoKQogICAgICAgIGlmICgkTW9kZSAtZXEgJ1NhZmUnKSB7IEludm9rZS1DbWQgJ0dpdCBQdXNoIChzZXQtdXBzdHJlYW0pJyAoImdpdCBwdXNoIC11IG9yaWdpbiB7MH0iIC1mICRicmFuY2gpIH0KICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnR2l0IFB1c2gnICdnaXQgcHVzaCcgfQoKICAgICAgICAkcGtnVmVyc2lvbiA9IEdldC1QYWNrYWdlVmVyc2lvbiAkcGtnCiAgICAgICAgJHRhZ05hbWUgPSAkbnVsbAogICAgICAgICRyZWxlYXNlVXJsID0gJG51bGwKICAgICAgICAkc2hvdWxkVGFnID0gJFRhZyAtb3IgKCRWZXJzaW9uQnVtcCAtbmUgJ25vbmUnKQoKICAgICAgICBpZiAoJHNob3VsZFRhZykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDkzICgiVGFnZ2luZyB2ZXJzaW9uOiB7MH0iIC1mICRwa2dWZXJzaW9uKQogICAgICAgICAgICAkdGFnTmFtZSA9IEludm9rZS1UYWcgJHBrZ1ZlcnNpb24KICAgICAgICAgICAgaWYgKCRQdXNoVGFnKSB7IEludm9rZS1QdXNoVGFnICR0YWdOYW1lIH0KICAgICAgICB9CgogICAgICAgIGlmICgkQ3JlYXRlUmVsZWFzZSkgewogICAgICAgICAgICBpZiAoLW5vdCAkdGFnTmFtZSkgeyB0aHJvdyAnQ3JlYXRlUmVsZWFzZSByZXF1aXJlcyBhIHRhZy4gVXNlIC1UYWcgb3IgLVZlcnNpb25CdW1wLicgfQogICAgICAgICAgICBXcml0ZS1TdGVwIDk1ICgiQ3JlYXRpbmcgR2l0SHViIFJlbGVhc2U6IHswfSIgLWYgJHRhZ05hbWUpCiAgICAgICAgICAgICRyZWxlYXNlVXJsID0gSW52b2tlLUNyZWF0ZVJlbGVhc2UgJHRhZ05hbWUKICAgICAgICB9CgogICAgICAgICRwclVybCA9ICRudWxsCiAgICAgICAgaWYgKCRPcGVuUHIpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA5NyAoIkNyZWF0aW5nIFBSIChnaCkgYmFzZT0nezB9JyIgLWYgJGJhc2UpCiAgICAgICAgICAgICRwclVybCA9IEludm9rZS1PcGVuUHIgJGJhc2UgJGJyYW5jaCAkY2hhbmdlbG9nUGF0aAogICAgICAgICAgICBpZiAoJE9wZW5QckluQnJvd3NlcikgewogICAgICAgICAgICAgICAgSW52b2tlLU9wZW5QckluQnJvd3NlcgogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDEwMCAnRG9uZScKICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2gnIC1Db21wbGV0ZWQKCiAgICAgICAgV3JpdGUtUnVuU3VtbWFyeSAkYnJhbmNoICRvcmlnaW4gJHJ1bkRpcgoKICAgICAgICAkaGVhZCA9IEdldC1IZWFkQ29tbWl0CiAgICAgICAgTmV3LVN1bW1hcnkgKEpvaW4tUGF0aCAkcnVuRGlyICdzdW1tYXJ5Lm1kJykgJE1vZGUgJGJyYW5jaCAkYmFzZSAkaGVhZCAkcHJVcmwgJHJlbGVhc2VVcmwgJHJ1bkRpciAkc3RhcnRUaW1lIChHZXQtRGF0ZSkgJGZhbHNlCgogICAgICAgIEludm9rZS1Ub2FzdCAnR2l0IEF1dG8gUHVzaCcgKCJTdWNjZXNzIG9uIHswfSIgLWYgJGJyYW5jaCkKICAgICAgICByZXR1cm4gMAogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICBXcml0ZS1Ib3N0ICgiISEgU3RvcHBlZCB3aXRoIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAtRm9yZWdyb3VuZENvbG9yIFJlZAogICAgICAgIGlmICgkcnVuRGlyKSB7IFdyaXRlLUhvc3QgKCJMb2dzOiB7MH0iIC1mICRydW5EaXIpIC1Gb3JlZ3JvdW5kQ29sb3IgWWVsbG93IH0KCiAgICAgICAgaWYgKCRydW5EaXIpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICRsYXN0TG9nID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkcnVuRGlyIC1GaWx0ZXIgJyoubG9nJyB8IFNvcnQtT2JqZWN0IExhc3RXcml0ZVRpbWUgLURlc2NlbmRpbmcgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxCiAgICAgICAgICAgICAgICBpZiAoJGxhc3RMb2cpIHsgV3JpdGUtTG9nVGFpbCAkbGFzdExvZy5GdWxsTmFtZSAkVGFpbExpbmVzIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICgiRmFpbGVkIHRvIHJlYWQgbGFzdCBsb2c6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkT3BlbkxvZ09uRmFpbCAtYW5kICRydW5EaXIgLWFuZCAoR2V0LUNvbW1hbmQgY29kZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkpIHsKICAgICAgICAgICAgdHJ5IHsgY29kZSAkcnVuRGlyIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gb3BlbiBWUyBDb2RlLicgfQogICAgICAgIH0KCiAgICAgICAgSW52b2tlLVRvYXN0ICdHaXQgQXV0byBQdXNoJyAnRkFJTEVELiBDaGVjayBsb2dzLicKICAgICAgICByZXR1cm4gMQogICAgfQogICAgZmluYWxseSB7CiAgICAgICAgUmVsZWFzZS1SdW5Mb2NrICRsb2NrSGFuZGxlCiAgICB9Cn0KCmlmICgkV2F0Y2gpIHsKICAgICRzdGFtcCA9IEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnCiAgICBXcml0ZS1Ib3N0ICgiIyMgV2F0Y2ggT04gKHswfSkgfCBpbnRlcnZhbD17MX1zIGRlYm91bmNlPXsyfXMgfCBtb2RlPXszfSBjaGVja3M9ezR9IiAtZiAkc3RhbXAsICRXYXRjaEludGVydmFsU2VjLCAkV2F0Y2hEZWJvdW5jZVNlYywgJE1vZGUsICRDaGVja3NNb2RlKSAtRm9yZWdyb3VuZENvbG9yIEN5YW4KICAgICRyb290ID0gVGVzdC1JbkdpdFJlcG8KICAgICRzY3JpcHQ6Um9vdCA9ICRyb290CiAgICBpZiAoLW5vdCAkc2NyaXB0OldhdGNoTG9nRGlyKSB7ICRzY3JpcHQ6V2F0Y2hMb2dEaXIgPSBOZXctV2F0Y2hMb2dEaXIgJHJvb3QgfQoKICAgICRsYXN0U2lnID0gJycKICAgICRsYXN0Q2hhbmdlQXQgPSAkbnVsbAoKICAgIHdoaWxlICgkdHJ1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRzaWcgPSBHZXQtU3RhdHVzU2lnbmF0dXJlICRzY3JpcHQ6V2F0Y2hMb2dEaXIKICAgICAgICAgICAgJG5vdyA9IEdldC1EYXRlCgogICAgICAgICAgICBpZiAoJHNpZyAtbmUgJGxhc3RTaWcpIHsKICAgICAgICAgICAgICAgICRsYXN0U2lnID0gJHNpZwogICAgICAgICAgICAgICAgJGxhc3RDaGFuZ2VBdCA9ICRub3cKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRzaWcgLWFuZCAkbGFzdENoYW5nZUF0KSB7CiAgICAgICAgICAgICAgICAkYWdlID0gKCRub3cgLSAkbGFzdENoYW5nZUF0KS5Ub3RhbFNlY29uZHMKICAgICAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCAoV2F0Y2gpJyAtU3RhdHVzICgiQ2hhbmdlcyBkZXRlY3RlZC4uLiBkZWJvdW5jZSB7MDpOMH0vezF9cyIgLWYgJGFnZSwgJFdhdGNoRGVib3VuY2VTZWMpIC1QZXJjZW50Q29tcGxldGUgKFtNYXRoXTo6TWluKDk5LCBbaW50XSgoJGFnZSAvIFtNYXRoXTo6TWF4KDEsICRXYXRjaERlYm91bmNlU2VjKSkgKiAxMDApKSkKICAgICAgICAgICAgICAgIGlmICgkYWdlIC1nZSAkV2F0Y2hEZWJvdW5jZVNlYykgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICdDaGFuZ2VzIHN0YWJsZS4gUnVubmluZyBhdXRvLXB1c2guLi4nIC1Gb3JlZ3JvdW5kQ29sb3IgR3JlZW4KICAgICAgICAgICAgICAgICAgICAkY29kZSA9IEludm9rZS1HaXRBdXRvUHVzaE9uY2UgLUZyb21XYXRjaAogICAgICAgICAgICAgICAgICAgICRsYXN0U2lnID0gJycKICAgICAgICAgICAgICAgICAgICAkbGFzdENoYW5nZUF0ID0gJG51bGwKICAgICAgICAgICAgICAgICAgICBpZiAoJGNvZGUgLWVxIDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgJFdhdGNoSW50ZXJ2YWxTZWMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgkY29kZSAtbmUgMCAtYW5kICRXYXRjaFN0b3BPbkZhaWwpIHsgZXhpdCAkY29kZSB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRXYXRjaE9uY2UpIHsgZXhpdCAkY29kZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2ggKFdhdGNoKScgLVN0YXR1cyAnTm8gY2hhbmdlcy4uLiB3YWl0aW5nJyAtUGVyY2VudENvbXBsZXRlIDAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgJFdhdGNoSW50ZXJ2YWxTZWMKICAgICAgICB9CiAgICAgICAgY2F0Y2ggewogICAgICAgICAgICBXcml0ZS1Ib3N0ICgiISEgV2F0Y2ggbG9vcCBlcnJvcjogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkgLUZvcmVncm91bmRDb2xvciBSZWQKICAgICAgICAgICAgaWYgKCRXYXRjaFN0b3BPbkZhaWwpIHsgZXhpdCAxIH0KICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgKFtNYXRoXTo6TWF4KDIsICRXYXRjaEludGVydmFsU2VjKSkKICAgICAgICB9CiAgICB9Cn0KCmV4aXQgKEludm9rZS1HaXRBdXRvUHVzaE9uY2UpDQo=
### END B64 CHUNK 1/1
### END B64 FILE: git-push.ps1

