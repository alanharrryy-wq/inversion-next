### BEGIN B64 FILE: git-push.ps1
### BEGIN B64 CHUNK 1/2
PCMKZ2l0LXB1c2gucHMxIChWNS4wIFBST0RVQ1RJT04pCkFkZHM6CiAgLSBDaGVja3NNb2RlOiBTbWFydCB8IEZ1bGwgfCBPZmYKICAtIFdhdGNoIG1vZGUgd2l0aCBkZWJvdW5jZSArIGxvY2sgZmlsZQogIC0gU2FmZSBkZWZhdWx0cyAoYXV0by8qIGJyYW5jaCkKICAtIERldGVjdCByZW1vdGUgZGVmYXVsdCBicmFuY2ggKG9yaWdpbiBIRUFEIGJyYW5jaCkKICAtIE9wdGlvbmFsIEZpeFJlbW90ZUhlYWRNYWluIChsb2NhbCBvbmx5KQoKVVNBR0U6CiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgRmFzdCAtQWxsb3dNYWluIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQXV0b1N0YXNoIC1PcGVuUHIgLU9wZW5Mb2dPbkZhaWwKICAuXGdpdC1wdXNoLnBzMSAtTW9kZSBTYWZlIC1DaGVja3NNb2RlIFNtYXJ0IC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQ2hlY2tzTW9kZSBGdWxsIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLVdhdGNoIC1Nb2RlIFNhZmUgLUF1dG9TdGFzaCAtT3BlbkxvZ09uRmFpbAojPgoKI3JlcXVpcmVzIC1WZXJzaW9uIDcuMApbQ21kbGV0QmluZGluZygpXQpwYXJhbSgKICAgIFtWYWxpZGF0ZVNldCgnU2FmZScsJ0Zhc3QnKV0KICAgIFtzdHJpbmddJE1vZGUgPSAnRmFzdCcsCgogICAgW3N0cmluZ10kTWVzc2FnZSA9ICcnLAoKICAgIFtzd2l0Y2hdJERyeVJ1biwKICAgIFtzd2l0Y2hdJE9wZW5Mb2dPbkZhaWwsCiAgICBbc3dpdGNoXSROb0F1dG9QdWxsLAogICAgW3N3aXRjaF0kQXV0b1N0YXNoLAoKICAgIFtzd2l0Y2hdJEFsbG93TWFpbiwKICAgIFtzd2l0Y2hdJE9wZW5QciwKICAgIFtzd2l0Y2hdJE9wZW5QckluQnJvd3NlciwKICAgIFtzd2l0Y2hdJENyZWF0ZVJlbGVhc2UsCgogICAgW2Jvb2xdJEdlbmVyYXRlQ2hhbmdlbG9nID0gJHRydWUsCiAgICBbc3dpdGNoXSRTa2lwQ2hlY2tzLAogICAgW3N3aXRjaF0kU2tpcFNlY3JldFNjYW4sCiAgICBbc3dpdGNoXSRTa2lwTGFyZ2VGaWxlU2NhbiwKICAgIFtzd2l0Y2hdJFNraXBBdWRpdCwKCiAgICBbVmFsaWRhdGVTZXQoJ25vbmUnLCdwYXRjaCcsJ21pbm9yJywnbWFqb3InKV0KICAgIFtzdHJpbmddJFZlcnNpb25CdW1wID0gJ25vbmUnLAoKICAgIFtzd2l0Y2hdJFRhZywKICAgIFtib29sXSRQdXNoVGFnID0gJHRydWUsCgogICAgW3N3aXRjaF0kRmFpbE9uQXVkaXQsCiAgICBbVmFsaWRhdGVTZXQoJ2xvdycsJ21vZGVyYXRlJywnaGlnaCcsJ2NyaXRpY2FsJyldCiAgICBbc3RyaW5nXSRBdWRpdExldmVsID0gJ2hpZ2gnLAoKICAgIFtpbnRdJE1heEZpbGVNQiA9IDIwLAogICAgW2ludF0kVGFpbExpbmVzID0gMTYwLAogICAgW2ludF0kS2VlcExvZ1J1bnMgPSAzMCwKCiAgICBbVmFsaWRhdGVTZXQoJ1NtYXJ0JywnRnVsbCcsJ09mZicpXQogICAgW3N0cmluZ10kQ2hlY2tzTW9kZSA9ICdTbWFydCcsCgogICAgW3N3aXRjaF0kV2F0Y2gsCiAgICBbaW50XSRXYXRjaEludGVydmFsU2VjID0gNSwKICAgIFtpbnRdJFdhdGNoRGVib3VuY2VTZWMgPSAxNSwKICAgIFtzd2l0Y2hdJFdhdGNoT25jZSwKICAgIFtzd2l0Y2hdJFdhdGNoU3RvcE9uRmFpbCwKCiAgICBbc3RyaW5nXSRCYXNlQnJhbmNoID0gJycsCiAgICBbc3dpdGNoXSRGaXhSZW1vdGVIZWFkTWFpbiwKCiAgICBbc3dpdGNoXSRTYWZlVXNlQ3VycmVudEJyYW5jaAopCgokRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCgokc2NyaXB0OlJvb3QgPSAkbnVsbAokc2NyaXB0OlJ1bkRpciA9ICRudWxsCiRzY3JpcHQ6V2F0Y2hMb2dEaXIgPSAkbnVsbAokc2NyaXB0OlJ1blN0YXJ0ID0gJG51bGwKJHNjcmlwdDpSdW5Mb2NrSGFuZGxlID0gJG51bGwKJHNjcmlwdDpMb2dDb3VudGVycyA9IEB7fQokc2NyaXB0OlN1bW1hcnkgPSBbb3JkZXJlZF1Ae30KCmZ1bmN0aW9uIFdyaXRlLVN0ZXAoW2ludF0kcGVyY2VudCwgW3N0cmluZ10kbWVzc2FnZSkgewogICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtU3RhdHVzICRtZXNzYWdlIC1QZXJjZW50Q29tcGxldGUgJHBlcmNlbnQKICAgIFdyaXRlLUhvc3QgKCJbezAsM30lXSB7MX0iIC1mICRwZXJjZW50LCAkbWVzc2FnZSkKfQoKZnVuY3Rpb24gV3JpdGUtV2Fybihbc3RyaW5nXSRtZXNzYWdlKSB7CiAgICBXcml0ZS1Ib3N0ICgiV0FSTjogezB9IiAtZiAkbWVzc2FnZSkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKfQoKZnVuY3Rpb24gSW52b2tlLVRvYXN0KFtzdHJpbmddJFRpdGxlLCBbc3RyaW5nXSRCb2R5KSB7CiAgICB0cnkgewogICAgICAgIGlmIChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIC1OYW1lIEJ1cm50VG9hc3QpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEltcG9ydC1Nb2R1bGUgQnVybnRUb2FzdCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICBpZiAoR2V0LUNvbW1hbmQgTmV3LUJ1cm50VG9hc3ROb3RpZmljYXRpb24gLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHsKICAgICAgICAgICAgICAgICAgICBOZXctQnVybnRUb2FzdE5vdGlmaWNhdGlvbiAtVGV4dCAkVGl0bGUsICRCb2R5IHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICgiVG9hc3QgbW9kdWxlIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gKCJUb2FzdCBjaGVjayBmYWlsZWQ6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9CiAgICB0cnkgeyBbY29uc29sZV06OkJlZXAoOTAwLCAxNTApIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdCZWVwIGZhaWxlZC4nIH0KICAgIFdyaXRlLUhvc3QgKCIhISB7MH0gLSB7MX0iIC1mICRUaXRsZSwgJEJvZHkpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0N5YW4KfQoKZnVuY3Rpb24gRW5zdXJlLURpcihbc3RyaW5nXSRQYXRoKSB7CiAgICBpZiAoLW5vdCAkUGF0aCkgeyB0aHJvdyAnRW5zdXJlLURpcjogcGF0aCBpcyBlbXB0eS4nIH0KICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhdGgpKSB7CiAgICAgICAgTmV3LUl0ZW0gLUl0ZW1UeXBlIERpcmVjdG9yeSAtUGF0aCAkUGF0aCAtRm9yY2UgfCBPdXQtTnVsbAogICAgfQp9CgpmdW5jdGlvbiBOZXctUnVuTG9nRGlyKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICAkcWFEaXIgPSBKb2luLVBhdGggJFJlcG9Sb290ICdxYScKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRxYURpciAnbG9ncycKICAgIEVuc3VyZS1EaXIgJHFhRGlyCiAgICBFbnN1cmUtRGlyICRsb2dzRGlyCiAgICAkcnVuRGlyID0gSm9pbi1QYXRoICRsb2dzRGlyICgicnVuX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkcnVuRGlyCiAgICByZXR1cm4gJHJ1bkRpcgp9CgpmdW5jdGlvbiBOZXctV2F0Y2hMb2dEaXIoW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRxYURpciA9IEpvaW4tUGF0aCAkUmVwb1Jvb3QgJ3FhJwogICAgJGxvZ3NEaXIgPSBKb2luLVBhdGggJHFhRGlyICdsb2dzJwogICAgRW5zdXJlLURpciAkcWFEaXIKICAgIEVuc3VyZS1EaXIgJGxvZ3NEaXIKICAgICR3YXRjaERpciA9IEpvaW4tUGF0aCAkbG9nc0RpciAoIndhdGNoX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkd2F0Y2hEaXIKICAgIHJldHVybiAkd2F0Y2hEaXIKfQoKZnVuY3Rpb24gUmVtb3ZlLU9sZExvZ1J1bnMoW3N0cmluZ10kUmVwb1Jvb3QsIFtpbnRdJEtlZXApIHsKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRSZXBvUm9vdCAncWFcbG9ncycKICAgIGlmICgtbm90IChUZXN0LVBhdGggJGxvZ3NEaXIpKSB7IHJldHVybiB9CiAgICB0cnkgewogICAgICAgICRkaXJzID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkbG9nc0RpciAtRGlyZWN0b3J5IC1FcnJvckFjdGlvbiBTdG9wIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uTmFtZSAtbGlrZSAncnVuXyonIH0gfAogICAgICAgICAgICBTb3J0LU9iamVjdCBOYW1lIC1EZXNjZW5kaW5nCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBsaXN0IGxvZyBkaXJzOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgIHJldHVybgogICAgfQogICAgaWYgKCRkaXJzLkNvdW50IC1sZSAkS2VlcCkgeyByZXR1cm4gfQogICAgJHRvRGVsZXRlID0gJGRpcnMgfCBTZWxlY3QtT2JqZWN0IC1Ta2lwICRLZWVwCiAgICBmb3JlYWNoICgkZCBpbiAkdG9EZWxldGUpIHsKICAgICAgICB0cnkgeyBSZW1vdmUtSXRlbSAtUmVjdXJzZSAtRm9yY2UgJGQuRnVsbE5hbWUgLUVycm9yQWN0aW9uIFN0b3AgfQogICAgICAgIGNhdGNoIHsgV3JpdGUtV2FybiAoIkZhaWxlZCB0byByZW1vdmUgb2xkIGxvZyBkaXIgezB9OiB7MX0iIC1mICRkLkZ1bGxOYW1lLCAkXy5FeGNlcHRpb24uTWVzc2FnZSkgfQogICAgfQp9CgpmdW5jdGlvbiBTZXQtTG9jYWxFeGNsdWRlKFtzdHJpbmddJFJlcG9Sb290LCBbc3RyaW5nW11dJFBhdHRlcm5zKSB7CiAgICAkZXhjbHVkZVBhdGggPSBKb2luLVBhdGggJFJlcG9Sb290ICcuZ2l0XGluZm9cZXhjbHVkZScKICAgIHRyeSB7CiAgICAgICAgJGRpciA9IFNwbGl0LVBhdGggJGV4Y2x1ZGVQYXRoIC1QYXJlbnQKICAgICAgICBFbnN1cmUtRGlyICRkaXIKICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRleGNsdWRlUGF0aCkpIHsgTmV3LUl0ZW0gLUl0ZW1UeXBlIEZpbGUgLVBhdGggJGV4Y2x1ZGVQYXRoIC1Gb3JjZSB8IE91dC1OdWxsIH0KICAgICAgICAkZXhpc3RpbmcgPSBAKCkKICAgICAgICB0cnkgeyAkZXhpc3RpbmcgPSBHZXQtQ29udGVudCAkZXhjbHVkZVBhdGggLUVycm9yQWN0aW9uIFN0b3AgfSBjYXRjaCB7ICRleGlzdGluZyA9IEAoKSB9CiAgICAgICAgZm9yZWFjaCAoJHAgaW4gJFBhdHRlcm5zKSB7CiAgICAgICAgICAgIGlmICgtbm90ICgkZXhpc3RpbmcgLWNvbnRhaW5zICRwKSkgeyBBZGQtQ29udGVudCAtUGF0aCAkZXhjbHVkZVBhdGggLVZhbHVlICRwIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgdGhyb3cgKCJGYWlsZWQgdG8gdXBkYXRlIGxvY2FsIGdpdCBleGNsdWRlIGZpbGU6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9Cn0KCmZ1bmN0aW9uIE5ldy1Mb2dGaWxlUGF0aChbc3RyaW5nXSRQcmVmaXgsIFtzdHJpbmddJExvZ0RpcikgewogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJHNjcmlwdDpSdW5EaXIgfQogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJGVudjpURU1QIH0KICAgIEVuc3VyZS1EaXIgJExvZ0RpcgogICAgaWYgKC1ub3QgJHNjcmlwdDpMb2dDb3VudGVycy5Db250YWluc0tleSgkTG9nRGlyKSkgeyAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdID0gMCB9CiAgICAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdKysKICAgICRzYWZlID0gKCRQcmVmaXggLXJlcGxhY2UgJ1teYS16QS1aMC05Xy4tXScsJ18nKQogICAgcmV0dXJuIEpvaW4tUGF0aCAkTG9nRGlyICgiezA6MDAwfV97MX0ubG9nIiAtZiAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdLCAkc2FmZSkKfQoKZnVuY3Rpb24gV3JpdGUtTG9nVGFpbChbc3RyaW5nXSRMb2dQYXRoLCBbaW50XSRUYWlsTGluZXMpIHsKICAgIHRyeSB7CiAgICAgICAgJHRhaWwgPSBHZXQtQ29udGVudCAtUGF0aCAkTG9nUGF0aCAtVGFpbCAkVGFpbExpbmVzIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgaWYgKCR0YWlsKSB7CiAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0xhc3QgbG9nIGxpbmVzOicgLUZvcmVncm91bmRDb2xvciBNYWdlbnRhCiAgICAgICAgICAgICR0YWlsIHwgRm9yRWFjaC1PYmplY3QgeyBXcml0ZS1Ib3N0ICRfIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkNvdWxkIG5vdCByZWFkIGxvZyB0YWlsOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgfQp9CgpmdW5jdGlvbiBJbnZva2UtQ21kKFtzdHJpbmddJExhYmVsLCBbc3RyaW5nXSRDb21tYW5kLCBbc3RyaW5nXSRMb2dQYXRoID0gJG51bGwsIFtzdHJpbmddJExvZ0RpciA9ICRudWxsLCBbc3dpdGNoXSRBbGxvd0ZhaWx1cmUsIFtzd2l0Y2hdJE5vQ29uc29sZSkgewogICAgaWYgKC1ub3QgJExvZ1BhdGgpIHsgJExvZ1BhdGggPSBOZXctTG9nRmlsZVBhdGggJExhYmVsICRMb2dEaXIgfQogICAgJGxvZ1BhcmVudCA9IFNwbGl0LVBhdGggJExvZ1BhdGggLVBhcmVudAogICAgRW5zdXJlLURpciAkbG9nUGFyZW50CgogICAgaWYgKC1ub3QgJE5vQ29uc29sZSkgewogICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICBXcml0ZS1Ib3N0ICgiLT4gezB9IiAtZiAkTGFiZWwpIC1Gb3JlZ3JvdW5kQ29sb3IgQ3lhbgogICAgICAgIFdyaXRlLUhvc3QgKCIgICAkIHswfSIgLWYgJENvbW1hbmQpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkKICAgIH0KCiAgICAkc3RhcnQgPSBHZXQtRGF0ZQogICAgJHJhd091dHB1dCA9ICYgY21kLmV4ZSAvYyAkQ29tbWFuZCAyPiYxCiAgICAkZXhpdCA9ICRMQVNURVhJVENPREUKICAgICRlbmQgPSBHZXQtRGF0ZQoKICAgICRvdXRwdXRUZXh0ID0gKCRyYXdPdXRwdXQgfCBPdXQtU3RyaW5nKQogICAgaWYgKCRudWxsIC1lcSAkb3V0cHV0VGV4dCkgeyAkb3V0cHV0VGV4dCA9ICcnIH0KICAgICRvdXRwdXRUZXh0ID0gJG91dHB1dFRleHQuVHJpbSgpCiAgICAkb3V0cHV0TGluZXMgPSBAKCkKICAgIGlmICgkb3V0cHV0VGV4dC5MZW5ndGggLWd0IDApIHsgJG91dHB1dExpbmVzID0gW3JlZ2V4XTo6U3BsaXQoJG91dHB1dFRleHQsICdccj9cbicpIH0KICAgICRoZWFkZXIgPSBAKAogICAgICAgICgiQ09NTUFORDogezB9IiAtZiAkQ29tbWFuZCksCiAgICAgICAgKCJTVEFSVDogezB9IiAtZiAkc3RhcnQpLAogICAgICAgICgiRU5EOiB7MH0iIC1mICRlbmQpLAogICAgICAgICgiRVhJVDogezB9IiAtZiAkZXhpdCksCiAgICAgICAgJy0tLS0nCiAgICApCiAgICAkaGVhZGVyICsgJG91dHB1dExpbmVzIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4CgogICAgaWYgKCRleGl0IC1uZSAwKSB7CiAgICAgICAgaWYgKC1ub3QgJE5vQ29uc29sZSkgewogICAgICAgICAgICBXcml0ZS1Ib3N0ICcnCiAgICAgICAgICAgIFdyaXRlLUhvc3QgKCIhISBGQUlMOiB7MH0iIC1mICRMYWJlbCkgLUZvcmVncm91bmRDb2xvciBSZWQKICAgICAgICAgICAgV3JpdGUtSG9zdCAoIkxvZzogezB9IiAtZiAkTG9nUGF0aCkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKICAgICAgICAgICAgaWYgKCRPcGVuTG9nT25GYWlsIC1hbmQgKEdldC1Db21tYW5kIGNvZGUgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpKSB7CiAgICAgICAgICAgICAgICB0cnkgeyBXcml0ZS1Ib3N0ICdPcGVuaW5nIGxvZyBpbiBWUyBDb2RlLi4uJyAtRm9yZWdyb3VuZENvbG9yIEN5YW47IGNvZGUgJExvZ1BhdGggfSBjYXRjaCB7IFdyaXRlLVdhcm4gJ0ZhaWxlZCB0byBvcGVuIGxvZyBpbiBWUyBDb2RlLicgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICAgICAgV3JpdGUtTG9nVGFpbCAkTG9nUGF0aCAkVGFpbExpbmVzCiAgICAgICAgfQogICAgICAgIGlmICgtbm90ICRBbGxvd0ZhaWx1cmUpIHsgdGhyb3cgKCJBYm9ydGVkIGR1ZSB0byBlcnJvciBpbjogezB9IiAtZiAkTGFiZWwpIH0KICAgICAgICBpZiAoLW5vdCAkTm9Db25zb2xlKSB7IFdyaXRlLVdhcm4gKCJDb250aW51aW5nIGFmdGVyIG5vbi1mYXRhbCBmYWlsdXJlIGluOiB7MH0iIC1mICRMYWJlbCkgfQogICAgfQogICAgZWxzZSB7CiAgICAgICAgaWYgKC1ub3QgJE5vQ29uc29sZSkgeyBXcml0ZS1Ib3N0ICgiT0s6IHswfSIgLWYgJExhYmVsKSAtRm9yZWdyb3VuZENvbG9yIEdyZWVuIH0KICAgIH0KCiAgICByZXR1cm4gW1BTQ3VzdG9tT2JqZWN0XUB7IEV4aXRDb2RlID0gJGV4aXQ7IE91dHB1dCA9ICRvdXRwdXRMaW5lczsgT3V0cHV0TGluZXMgPSAkb3V0cHV0TGluZXM7IE91dHB1dFRleHQgPSAkb3V0cHV0VGV4dDsgTG9nUGF0aCA9ICRMb2dQYXRoIH0KfQoKZnVuY3Rpb24gSW52b2tlLUNtZENhcHR1cmUoW3N0cmluZ10kTGFiZWwsIFtzdHJpbmddJENvbW1hbmQsIFtzdHJpbmddJExvZ1BhdGggPSAkbnVsbCwgW3N0cmluZ10kTG9nRGlyID0gJG51bGwsIFtzd2l0Y2hdJEFsbG93RmFpbHVyZSwgW3N3aXRjaF0kTm9Db25zb2xlKSB7CiAgICByZXR1cm4gSW52b2tlLUNtZCAtTGFiZWwgJExhYmVsIC1Db21tYW5kICRDb21tYW5kIC1Mb2dQYXRoICRMb2dQYXRoIC1Mb2dEaXIgJExvZ0RpciAtQWxsb3dGYWlsdXJlOiRBbGxvd0ZhaWx1cmUgLU5vQ29uc29sZTokTm9Db25zb2xlCn0KCmZ1bmN0aW9uIFRlc3QtQ29tbWFuZEV4aXN0cyhbc3RyaW5nXSRDbWQpIHsgcmV0dXJuIFtib29sXShHZXQtQ29tbWFuZCAkQ21kIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSB9CgpmdW5jdGlvbiBUZXN0LUxvY2FsQnJhbmNoRXhpc3RzKFtzdHJpbmddJEJyYW5jaE5hbWUsIFtzd2l0Y2hdJFF1aWV0KSB7CiAgICAkY2hlY2sgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IExvY2FsIEJyYW5jaCBFeGlzdHMnICgiZ2l0IHNob3ctcmVmIC0tdmVyaWZ5IC0tcXVpZXQgcmVmcy9oZWFkcy97MH0iIC1mICRCcmFuY2hOYW1lKSAtQWxsb3dGYWlsdXJlIC1Ob0NvbnNvbGU6JFF1aWV0CiAgICByZXR1cm4gKCRjaGVjay5FeGl0Q29kZSAtZXEgMCkKfQoKZnVuY3Rpb24gVGVzdC1SZW1vdGVCcmFuY2hFeGlzdHMoW3N0cmluZ10kQnJhbmNoTmFtZSwgW3N3aXRjaF0kUXVpZXQpIHsKICAgICRjaGVjayA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmVtb3RlIEJyYW5jaCBFeGlzdHMnICgiZ2l0IHNob3ctcmVmIC0tdmVyaWZ5IC0tcXVpZXQgcmVmcy9yZW1vdGVzL29yaWdpbi97MH0iIC1mICRCcmFuY2hOYW1lKSAtQWxsb3dGYWlsdXJlIC1Ob0NvbnNvbGU6JFF1aWV0CiAgICByZXR1cm4gKCRjaGVjay5FeGl0Q29kZSAtZXEgMCkKfQoKZnVuY3Rpb24gUmVzb2x2ZS1CYXNlQnJhbmNoKFtzdHJpbmddJFJlcXVlc3RlZCwgW3N0cmluZ10kUmVtb3RlRGVmYXVsdCkgewogICAgJGNhbmRpZGF0ZSA9IGlmICgkUmVxdWVzdGVkIC1hbmQgJFJlcXVlc3RlZC5UcmltKCkuTGVuZ3RoIC1ndCAwKSB7ICRSZXF1ZXN0ZWQuVHJpbSgpIH0gZWxzZSB7ICRSZW1vdGVEZWZhdWx0IH0KICAgIGlmICgtbm90ICRjYW5kaWRhdGUpIHsgJGNhbmRpZGF0ZSA9ICdtYWluJyB9CgogICAgaWYgKCRjYW5kaWRhdGUgLWVxICdtYXN0ZXInIC1hbmQgKFRlc3QtUmVtb3RlQnJhbmNoRXhpc3RzICdtYWluJyAtUXVpZXQpKSB7IHJldHVybiAnbWFpbicgfQogICAgaWYgKFRlc3QtUmVtb3RlQnJhbmNoRXhpc3RzICRjYW5kaWRhdGUgLVF1aWV0KSB7IHJldHVybiAkY2FuZGlkYXRlIH0KCiAgICAkZmFsbGJhY2sgPSAnJwogICAgaWYgKCRjYW5kaWRhdGUgLW5lICdtYWluJyAtYW5kIChUZXN0LVJlbW90ZUJyYW5jaEV4aXN0cyAnbWFpbicgLVF1aWV0KSkgeyAkZmFsbGJhY2sgPSAnbWFpbicgfQogICAgZWxzZWlmICgkY2FuZGlkYXRlIC1uZSAnbWFzdGVyJyAtYW5kIChUZXN0LVJlbW90ZUJyYW5jaEV4aXN0cyAnbWFzdGVyJyAtUXVpZXQpKSB7ICRmYWxsYmFjayA9ICdtYXN0ZXInIH0KCiAgICBpZiAoJGZhbGxiYWNrKSB7CiAgICAgICAgV3JpdGUtV2FybiAoIkJhc2UgYnJhbmNoICd7MH0nIG5vdCBmb3VuZC4gRmFsbGluZyBiYWNrIHRvICd7MX0nLiIgLWYgJGNhbmRpZGF0ZSwgJGZhbGxiYWNrKQogICAgICAgIHJldHVybiAkZmFsbGJhY2sKICAgIH0KCiAgICByZXR1cm4gJGNhbmRpZGF0ZQp9CgpmdW5jdGlvbiBHZXQtTG9ja0ZpbGVQYXRoKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICByZXR1cm4gSm9pbi1QYXRoICRSZXBvUm9vdCAncWFcbG9nc1xnaXQtcHVzaC5sb2NrJwp9CgpmdW5jdGlvbiBBY3F1aXJlLVJ1bkxvY2soW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRsb2NrUGF0aCA9IEdldC1Mb2NrRmlsZVBhdGggJFJlcG9Sb290CiAgICAkbG9ja0RpciA9IFNwbGl0LVBhdGggJGxvY2tQYXRoIC1QYXJlbnQKICAgIEVuc3VyZS1EaXIgJGxvY2tEaXIKICAgIHRyeSB7CiAgICAgICAgJGZzID0gW1N5c3RlbS5JTy5GaWxlXTo6T3BlbigkbG9ja1BhdGgsIFtTeXN0ZW0uSU8uRmlsZU1vZGVdOjpPcGVuT3JDcmVhdGUsIFtTeXN0ZW0uSU8uRmlsZUFjY2Vzc106OlJlYWRXcml0ZSwgW1N5c3RlbS5JTy5GaWxlU2hhcmVdOjpOb25lKQogICAgICAgICRmcy5TZXRMZW5ndGgoMCkKICAgICAgICAkd3JpdGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uU3RyZWFtV3JpdGVyKCRmcywgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOCwgMTAyNCwgJHRydWUpCiAgICAgICAgJHdyaXRlci5Xcml0ZUxpbmUoInBpZD0kUElEIikKICAgICAgICAkd3JpdGVyLldyaXRlTGluZSgic3RhcnRlZD0kKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnKSIpCiAgICAgICAgJHdyaXRlci5GbHVzaCgpCiAgICAgICAgcmV0dXJuICRmcwogICAgfQogICAgY2F0Y2ggewogICAgICAgIHRocm93ICgiQW5vdGhlciBpbnN0YW5jZSBpcyBydW5uaW5nLiBMb2NrIGZpbGU6IHswfSIgLWYgJGxvY2tQYXRoKQogICAgfQp9CgpmdW5jdGlvbiBUcnktQWNxdWlyZVJ1bkxvY2soW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgIHRyeSB7IHJldHVybiBBY3F1aXJlLVJ1bkxvY2sgJFJlcG9Sb290IH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1XYXJuICRfLkV4Y2VwdGlvbi5NZXNzYWdlCiAgICAgICAgcmV0dXJuICRudWxsCiAgICB9Cn0KCmZ1bmN0aW9uIFJlbGVhc2UtUnVuTG9jaygkSGFuZGxlKSB7CiAgICBpZiAoJEhhbmRsZSkgewogICAgICAgIHRyeSB7ICRIYW5kbGUuRGlzcG9zZSgpIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gcmVsZWFzZSBsb2NrLicgfQogICAgfQp9CgpmdW5jdGlvbiBGaW5kLUdpdFJvb3QgewogICAgJGRpciA9IChHZXQtTG9jYXRpb24pLlBhdGgKICAgIHdoaWxlICgkdHJ1ZSkgewogICAgICAgIGlmIChUZXN0LVBhdGggKEpvaW4tUGF0aCAkZGlyICcuZ2l0JykpIHsgcmV0dXJuICRkaXIgfQogICAgICAgICRwYXJlbnQgPSBTcGxpdC1QYXRoICRkaXIgLVBhcmVudAogICAgICAgIGlmICgtbm90ICRwYXJlbnQgLW9yICRwYXJlbnQgLWVxICRkaXIpIHsgYnJlYWsgfQogICAgICAgICRkaXIgPSAkcGFyZW50CiAgICB9CiAgICB0aHJvdyAnTm90IGluc2lkZSBhIEdpdCByZXBvIChubyAuZ2l0IGZvdW5kKS4nCn0KCmZ1bmN0aW9uIFRlc3QtSW5HaXRSZXBvIHsKICAgICRyb290ID0gRmluZC1HaXRSb290CiAgICBTZXQtTG9jYXRpb24gJHJvb3QKICAgIHJldHVybiAkcm9vdAp9CgpmdW5jdGlvbiBHZXQtR2l0Q29udGV4dCB7CiAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICdnaXQnKSkgeyB0aHJvdyAnR2l0IENMSSBub3QgZm91bmQgaW4gUEFUSC4nIH0KICAgICRicmFuY2hSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IEJyYW5jaCcgJ2dpdCBicmFuY2ggLS1zaG93LWN1cnJlbnQnCiAgICAkYnJhbmNoID0gKFtzdHJpbmddKCRicmFuY2hSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkpLlRyaW0oKQogICAgaWYgKC1ub3QgJGJyYW5jaCkgeyB0aHJvdyAnTm8gY3VycmVudCBicmFuY2ggZGV0ZWN0ZWQgKGRldGFjaGVkIEhFQUQ/KS4nIH0KICAgICRvcmlnaW5SZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFJlbW90ZScgJ2dpdCByZW1vdGUgZ2V0LXVybCBvcmlnaW4nCiAgICAkb3JpZ2luID0gKFtzdHJpbmddKCRvcmlnaW5SZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkpLlRyaW0oKQogICAgaWYgKC1ub3QgJG9yaWdpbikgeyB0aHJvdyAiUmVtb3RlICdvcmlnaW4nIG5vdCBmb3VuZC4iIH0KICAgIHJldHVybiBAeyBCcmFuY2ggPSAkYnJhbmNoOyBPcmlnaW4gPSAkb3JpZ2luIH0KfQoKZnVuY3Rpb24gR2V0LVJlbW90ZURlZmF1bHRCcmFuY2ggewogICAgJHJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmVtb3RlIEhFQUQnICdnaXQgc3ltYm9saWMtcmVmIC0tcXVpZXQgLS1zaG9ydCByZWZzL3JlbW90ZXMvb3JpZ2luL0hFQUQnIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkcmVzLkV4aXRDb2RlIC1lcSAwKSB7CiAgICAgICAgJGxpbmUgPSBbc3RyaW5nXSgkcmVzLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpCiAgICAgICAgJGJyYW5jaCA9ICRsaW5lLlRyaW0oKQogICAgICAgIGlmICgkYnJhbmNoKSB7CiAgICAgICAgICAgICRicmFuY2ggPSAkYnJhbmNoIC1yZXBsYWNlICdeb3JpZ2luLycsJycKICAgICAgICAgICAgaWYgKCRicmFuY2ggLWVxICdtYXN0ZXInIC1hbmQgKFRlc3QtUmVtb3RlQnJhbmNoRXhpc3RzICdtYWluJyAtUXVpZXQpKSB7IHJldHVybiAnbWFpbicgfQogICAgICAgICAgICByZXR1cm4gJGJyYW5jaAogICAgICAgIH0KICAgIH0KICAgIGlmICgkcmVzLkV4aXRDb2RlIC1uZSAwKSB7IFdyaXRlLVdhcm4gJ0NvdWxkIG5vdCByZWFkIG9yaWdpbi9IRUFEIHZpYSBzeW1ib2xpYy1yZWY7IGZhbGxpbmcgYmFjay4nIH0KICAgICRyZXMyID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBSZW1vdGUgU2hvdycgJ2dpdCByZW1vdGUgc2hvdyBvcmlnaW4nIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkcmVzMi5FeGl0Q29kZSAtZXEgMCkgewogICAgICAgIGZvcmVhY2ggKCRsaW5lIGluICRyZXMyLk91dHB1dCkgewogICAgICAgICAgICAkdGV4dCA9IFtzdHJpbmddJGxpbmUKICAgICAgICAgICAgaWYgKCR0ZXh0IC1tYXRjaCAnSEVBRCBicmFuY2g6XHMqKFxTKylccyokJykgewogICAgICAgICAgICAgICAgJGJyYW5jaCA9ICRNYXRjaGVzWzFdCiAgICAgICAgICAgICAgICBpZiAoJGJyYW5jaCAtZXEgJ21hc3RlcicgLWFuZCAoVGVzdC1SZW1vdGVCcmFuY2hFeGlzdHMgJ21haW4nIC1RdWlldCkpIHsgcmV0dXJuICdtYWluJyB9CiAgICAgICAgICAgICAgICByZXR1cm4gJGJyYW5jaAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgaWYgKFRlc3QtUmVtb3RlQnJhbmNoRXhpc3RzICdtYWluJyAtUXVpZXQpIHsgcmV0dXJuICdtYWluJyB9CiAgICBpZiAoVGVzdC1SZW1vdGVCcmFuY2hFeGlzdHMgJ21hc3RlcicgLVF1aWV0KSB7IHJldHVybiAnbWFzdGVyJyB9CiAgICBXcml0ZS1XYXJuICdDb3VsZCBub3QgZGV0ZWN0IHJlbW90ZSBkZWZhdWx0IGJyYW5jaDsgdXNpbmcgbWFpbi4nCiAgICByZXR1cm4gJ21haW4nCn0KCmZ1bmN0aW9uIEVuc3VyZS1Mb2NhbEJyYW5jaChbc3RyaW5nXSRCcmFuY2hOYW1lKSB7CiAgICBpZiAoVGVzdC1Mb2NhbEJyYW5jaEV4aXN0cyAkQnJhbmNoTmFtZSAtUXVpZXQpIHsgcmV0dXJuICRmYWxzZSB9CgogICAgaWYgKCREcnlSdW4pIHsKICAgICAgICBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IGZldGNoIG9yaWdpbiB7MH0gJiYgZ2l0IGNoZWNrb3V0IC1iIHswfSBvcmlnaW4vezB9IiAtZiAkQnJhbmNoTmFtZSkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgIHJldHVybiAkdHJ1ZQogICAgfQoKICAgIEludm9rZS1DbWQgJ0dpdCBGZXRjaCcgKCJnaXQgZmV0Y2ggb3JpZ2luIHswfSIgLWYgJEJyYW5jaE5hbWUpCiAgICBJbnZva2UtQ21kICdDaGVja291dCBiYXNlIGJyYW5jaCcgKCJnaXQgY2hlY2tvdXQgLWIgezB9IG9yaWdpbi97MH0iIC1mICRCcmFuY2hOYW1lKQogICAgcmV0dXJuICR0cnVlCn0KCmZ1bmN0aW9uIEdldC1TdGF0dXNQb3JjZWxhaW4oW3N0cmluZ10kTG9nRGlyID0gJG51bGwpIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFN0YXR1cyAocG9yY2VsYWluKScgJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nIC1Mb2dEaXIgJExvZ0RpcgogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0KfQoKZnVuY3Rpb24gR2V0LVN0YWdlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmYgKHN0YWdlZCknICdnaXQgZGlmZiAtLWNhY2hlZCAtLW5hbWUtb25seSAtLWRpZmYtZmlsdGVyPUFDTVJUVVhCJwogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1VbnN0YWdlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmYgKHVuc3RhZ2VkKScgJ2dpdCBkaWZmIC0tbmFtZS1vbmx5IC0tZGlmZi1maWx0ZXI9QUNNUlRVWEInCiAgICByZXR1cm4gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gR2V0LVVudHJhY2tlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFVudHJhY2tlZCcgJ2dpdCBscy1maWxlcyAtLW90aGVycyAtLWV4Y2x1ZGUtc3RhbmRhcmQnCiAgICByZXR1cm4gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gR2V0LUNoYW5nZWRGaWxlcyB7CiAgICAkYWxsID0gQCgpCiAgICAkYWxsICs9IEdldC1TdGFnZWRGaWxlcwogICAgJGFsbCArPSBHZXQtVW5zdGFnZWRGaWxlcwogICAgJGFsbCArPSBHZXQtVW50cmFja2VkRmlsZXMKICAgIHJldHVybiAkYWxsIHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1DaGFuZ2VkRmlsZXNTaW5jZUJhc2UoW3N0cmluZ10kQmFzZUJyYW5jaCkgewogICAgaWYgKC1ub3QgJEJhc2VCcmFuY2gpIHsgcmV0dXJuIEAoKSB9CiAgICAkbWIgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IE1lcmdlLUJhc2UnICgiZ2l0IG1lcmdlLWJhc2UgSEVBRCB7MH0iIC1mICRCYXNlQnJhbmNoKSAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJG1iLkV4aXRDb2RlIC1uZSAwKSB7CiAgICAgICAgV3JpdGUtV2FybiAnQ291bGQgbm90IGNvbXB1dGUgbWVyZ2UtYmFzZS4nCiAgICAgICAgcmV0dXJuIEdldC1DaGFuZ2VkRmlsZXMKICAgIH0KICAgICRoYXNoID0gKFtzdHJpbmddKCRtYi5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKSkuVHJpbSgpCiAgICBpZiAoLW5vdCAkaGFzaCkgeyByZXR1cm4gR2V0LUNoYW5nZWRGaWxlcyB9CiAgICAkZGlmZiA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgRGlmZiAoYmFzZS4uSEVBRCknICgiZ2l0IGRpZmYgLS1uYW1lLW9ubHkgezB9IEhFQUQiIC1mICRoYXNoKQogICAgcmV0dXJuICRkaWZmLk91dHB1dCB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9IHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9CgpmdW5jdGlvbiBOb3JtYWxpemUtUmVsUGF0aChbc3RyaW5nXSRQYXRoKSB7CiAgICBpZiAoLW5vdCAkUGF0aCkgeyByZXR1cm4gJycgfQogICAgJHAgPSAkUGF0aCAtcmVwbGFjZSAnXFwnLCcvJwogICAgJHAgPSAkcC5UcmltU3RhcnQoJy4vJykKICAgIHJldHVybiAkcAp9CgpmdW5jdGlvbiBOb3JtYWxpemUtUGF0aExpc3QoW29iamVjdF0kUGF0aHMpIHsKICAgIGlmICgkbnVsbCAtZXEgJFBhdGhzKSB7IHJldHVybiBAKCkgfQogICAgJGl0ZW1zID0gQCgpCiAgICBpZiAoJFBhdGhzIC1pcyBbc3RyaW5nXSkgewogICAgICAgICRpdGVtcyA9IFtyZWdleF06OlNwbGl0KCRQYXRocywgJ1xyP1xuJykKICAgIH0KICAgIGVsc2UgewogICAgICAgICRpdGVtcyA9IEAoJFBhdGhzKQogICAgfQogICAgJG91dCA9IEAoKQogICAgZm9yZWFjaCAoJHAgaW4gJGl0ZW1zKSB7CiAgICAgICAgaWYgKCRudWxsIC1lcSAkcCkgeyBjb250aW51ZSB9CiAgICAgICAgJHMgPSBbc3RyaW5nXSRwCiAgICAgICAgaWYgKC1ub3QgJHMpIHsgY29udGludWUgfQogICAgICAgICRzID0gJHMuVHJpbSgpCiAgICAgICAgaWYgKC1ub3QgJHMpIHsgY29udGludWUgfQogICAgICAgIGlmICgkcy5MZW5ndGggLWx0IDIpIHsgY29udGludWUgfQogICAgICAgIGlmICgkcyAtbWF0Y2ggJ15bQS1aYS16XTpbXFwvXScpIHsgY29udGludWUgfQogICAgICAgIGlmICgkcy5TdGFydHNXaXRoKCcvJykgLW9yICRzLlN0YXJ0c1dpdGgoJ1xcJykpIHsgY29udGludWUgfQogICAgICAgICRvdXQgKz0gJHMKICAgIH0KICAgIHJldHVybiAkb3V0IHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9CgpmdW5jdGlvbiBHZXQtR3VhcmRJZ25vcmVQcmVmaXhlcyB7CiAgICByZXR1cm4gQCgKICAgICAgICAnLmdpdC8nLAogICAgICAgICdub2RlX21vZHVsZXMvJywKICAgICAgICAnZGlzdC8nLAogICAgICAgICdidWlsZC8nLAogICAgICAgICdvdXQvJywKICAgICAgICAnY292ZXJhZ2UvJywKICAgICAgICAnLmNhY2hlLycsCiAgICAgICAgJy5uZXh0LycsCiAgICAgICAgJ3FhL2xvZ3MvJwogICAgKQp9CgpmdW5jdGlvbiBUZXN0LUlzSWdub3JlZFBhdGgoW3N0cmluZ10kUGF0aCkgewogICAgJHAgPSBOb3JtYWxpemUtUmVsUGF0aCAkUGF0aAogICAgZm9yZWFjaCAoJHByZWZpeCBpbiAoR2V0LUd1YXJkSWdub3JlUHJlZml4ZXMpKSB7CiAgICAgICAgaWYgKCRwLlN0YXJ0c1dpdGgoJHByZWZpeCkpIHsgcmV0dXJuICR0cnVlIH0KICAgIH0KICAgIHJldHVybiAkZmFsc2UKfQoKZnVuY3Rpb24gVGVzdC1Eb2NzT25seUNoYW5nZShbc3RyaW5nW11dJFBhdGhzKSB7CiAgICBpZiAoLW5vdCAkUGF0aHMgLW9yICRQYXRocy5Db3VudCAtZXEgMCkgeyByZXR1cm4gJGZhbHNlIH0KICAgICRkb2NQYXR0ZXJucyA9IEAoCiAgICAgICAgJ14oUkVBRE1FfENIQU5HRUxPR3xMSUNFTlNFKVxiJywKICAgICAgICAnXmRvY3NbXFwvXScsCiAgICAgICAgJ15xYVtcXC9dJywKICAgICAgICAnXC5tZCQnLAogICAgICAgICdcLnR4dCQnLAogICAgICAgICdeXC4oZ2l0aWdub3JlfGdpdGF0dHJpYnV0ZXMpJCcKICAgICkKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgewogICAgICAgICRpc0RvYyA9ICRmYWxzZQogICAgICAgIGZvcmVhY2ggKCRyeCBpbiAkZG9jUGF0dGVybnMpIHsKICAgICAgICAgICAgaWYgKCRwIC1tYXRjaCAkcngpIHsgJGlzRG9jID0gJHRydWU7IGJyZWFrIH0KICAgICAgICB9CiAgICAgICAgaWYgKC1ub3QgJGlzRG9jKSB7IHJldHVybiAkZmFsc2UgfQogICAgfQogICAgcmV0dXJuICR0cnVlCn0KCmZ1bmN0aW9uIFRlc3QtVG91Y2hlZFNyYyhbc3RyaW5nW11dJFBhdGhzKSB7CiAgICBmb3JlYWNoICgkcCBpbiAkUGF0aHMpIHsgaWYgKCRwIC1tYXRjaCAnXnNyY1tcXC9dJykgeyByZXR1cm4gJHRydWUgfSB9CiAgICByZXR1cm4gJGZhbHNlCn0KCmZ1bmN0aW9uIFRlc3QtVG91Y2hlZENvbmZpZyhbc3RyaW5nW11dJFBhdGhzKSB7CiAgICBpZiAoLW5vdCAkUGF0aHMpIHsgcmV0dXJuICRmYWxzZSB9CiAgICAkcGF0dGVybnMgPSBAKAogICAgICAgICdecGFja2FnZVwuanNvbiQnLAogICAgICAgICdecGFja2FnZS1sb2NrXC5qc29uJCcsCiAgICAgICAgJ15wbnBtLWxvY2tcLnlhbWwkJywKICAgICAgICAnXnlhcm5cLmxvY2skJywKICAgICAgICAnXnRzY29uZmlnKFwuLispP1wuanNvbiQnLAogICAgICAgICdedml0ZVwuY29uZmlnXC4nLAogICAgICAgICdeZXNsaW50XC5jb25maWdcLicsCiAgICAgICAgJ15cLmVzbGludHJjJywKICAgICAgICAnXlwucHJldHRpZXJyYycsCiAgICAgICAgJ15cLmVkaXRvcmNvbmZpZyQnLAogICAgICAgICdeXC5ucG1yYyQnLAogICAgICAgICdeXC5udm1yYyQnLAogICAgICAgICdec2NyaXB0c1tcXC9dJywKICAgICAgICAnXmNvbmZpZ1tcXC9dJywKICAgICAgICAnXlwuZ2l0aHViW1xcL10nLAogICAgICAgICdeXC52c2NvZGVbXFwvXScKICAgICkKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgewogICAgICAgICRuID0gTm9ybWFsaXplLVJlbFBhdGggJHAKICAgICAgICBmb3JlYWNoICgkcnggaW4gJHBhdHRlcm5zKSB7CiAgICAgICAgICAgIGlmICgkbiAtbWF0Y2ggJHJ4KSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICRmYWxzZQp9CgpmdW5jdGlvbiBHZXQtVGVzdEZpbGVzIHsKICAgICRmaWxlcyA9IEAoKQogICAgJHJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgTGlzdCBGaWxlcycgJ2dpdCBscy1maWxlcycgLUFsbG93RmFpbHVyZQogICAgaWYgKCRyZXMuRXhpdENvZGUgLWVxIDApIHsgJGZpbGVzICs9ICRyZXMuT3V0cHV0IH0KICAgICRmaWxlcyArPSBHZXQtVW50cmFja2VkRmlsZXMKICAgICRmaWxlcyA9ICRmaWxlcyB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9IHwgU29ydC1PYmplY3QgLVVuaXF1ZQoKICAgICRyeCA9ICdcLih0ZXN0fHNwZWMpXC5banRdc3g/JCcKICAgICR0ZXN0cyA9IEAoKQogICAgZm9yZWFjaCAoJGYgaW4gJGZpbGVzKSB7CiAgICAgICAgJG4gPSBOb3JtYWxpemUtUmVsUGF0aCAkZgogICAgICAgIGlmIChUZXN0LUlzSWdub3JlZFBhdGggJG4pIHsgY29udGludWUgfQogICAgICAgIGlmICgkbiAtbWF0Y2ggJHJ4KSB7ICR0ZXN0cyArPSAkbiB9CiAgICB9CiAgICByZXR1cm4gJHRlc3RzIHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9CgpmdW5jdGlvbiBUZXN0LUNvbW1pdE1lc3NhZ2UoW3N0cmluZ10kTXNnKSB7CiAgICBpZiAoLW5vdCAkTXNnKSB7IHJldHVybiB9CiAgICBpZiAoJE1zZyAtbWF0Y2ggJyg/aSlcYldJUFxiJykgeyB0aHJvdyAiQ29tbWl0IG1lc3NhZ2UgY29udGFpbnMgJ1dJUCcuIEJsb2NrZWQuIiB9Cn0KCmZ1bmN0aW9uIFRlc3QtQnJhbmNoUG9saWN5KFtzdHJpbmddJE1vZGVWYWx1ZSwgW3N0cmluZ10kQnJhbmNoKSB7CiAgICBpZiAoJE1vZGVWYWx1ZSAtZXEgJ1NhZmUnKSB7IHJldHVybiB9CiAgICBpZiAoJE1vZGVWYWx1ZSAtZXEgJ0Zhc3QnIC1hbmQgJEJyYW5jaCAtZXEgJ21haW4nIC1hbmQgLW5vdCAkQWxsb3dNYWluKSB7CiAgICAgICAgdGhyb3cgJ1lvdSBhcmUgb24gbWFpbi4gSW4gRmFzdCBtb2RlIHlvdSBtdXN0IHBhc3MgLUFsbG93TWFpbiB0byBhdXRvLWNvbW1pdC9wdXNoLicKICAgIH0KfQoKZnVuY3Rpb24gTmV3LUF1dG9CcmFuY2hOYW1lIHsgcmV0dXJuICgiYXV0by97MH0iIC1mIChHZXQtRGF0ZSAtRm9ybWF0ICd5eXl5TU1kZF9ISG1tc3MnKSkgfQoKZnVuY3Rpb24gSW52b2tlLUF1dG9QdWxsKFtzdHJpbmddJEJhc2VCcmFuY2gpIHsKICAgIGlmICgkTm9BdXRvUHVsbCkgeyByZXR1cm4gfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBwdWxsIC0tcmViYXNlIG9yaWdpbiB7MH0iIC1mICRCYXNlQnJhbmNoKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gfQogICAgSW52b2tlLUNtZCAnR2l0IFB1bGwgKHJlYmFzZSknICgiZ2l0IHB1bGwgLS1yZWJhc2Ugb3JpZ2luIHswfSIgLWYgJEJhc2VCcmFuY2gpCn0KCmZ1bmN0aW9uIEludm9rZS1BdXRvU3Rhc2goW3N3aXRjaF0kRW5hYmxlKSB7CiAgICBpZiAoLW5vdCAkRW5hYmxlKSB7IHJldHVybiAkZmFsc2UgfQogICAgJHBvcmNlbGFpbiA9IEdldC1TdGF0dXNQb3JjZWxhaW4KICAgIGlmICgtbm90ICRwb3JjZWxhaW4gLW9yICRwb3JjZWxhaW4uQ291bnQgLWVxIDApIHsgcmV0dXJuICRmYWxzZSB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgc3Rhc2ggcHVzaCAtdSAtbSAiYXV0b3N0YXNoIGdpdC1wdXNoLnBzMSInIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiAkdHJ1ZSB9CiAgICBJbnZva2UtQ21kICdHaXQgU3Rhc2gnICdnaXQgc3Rhc2ggcHVzaCAtdSAtbSAiYXV0b3N0YXNoIGdpdC1wdXNoLnBzMSInCiAgICByZXR1cm4gJHRydWUKfQoKZnVuY3Rpb24gSW52b2tlLUF1dG9Qb3BTdGFzaChbYm9vbF0kRGlkU3Rhc2gpIHsKICAgIGlmICgtbm90ICREaWRTdGFzaCkgeyByZXR1cm4gfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogZ2l0IHN0YXNoIHBvcCcgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuIH0KICAgIEludm9rZS1DbWQgJ0dpdCBTdGFzaCBQb3AnICdnaXQgc3Rhc2ggcG9wJwp9CgpmdW5jdGlvbiBRdW90ZS1DbWRBcmcoW3N0cmluZ10kcykgewogICAgaWYgKCRudWxsIC1lcSAkcykgeyByZXR1cm4gJyIiJyB9CiAgICAkdCA9ICRzLlJlcGxhY2UoJyInLCdcIicpCiAgICByZXR1cm4gJyInICsgJHQgKyAnIicKfQoKZnVuY3Rpb24gUmVzb2x2ZS1Fc2xpbnRDbWQoW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRsb2NhbCA9IEpvaW4tUGF0aCAkUmVwb1Jvb3QgJ25vZGVfbW9kdWxlc1wuYmluXGVzbGludC5jbWQnCiAgICBpZiAoVGVzdC1QYXRoICRsb2NhbCkgeyByZXR1cm4gJGxvY2FsIH0KICAgIHJldHVybiAnbnB4IC0tbm8taW5zdGFsbCBlc2xpbnQnCn0KCmZ1bmN0aW9uIEdldC1MaW50YWJsZUZpbGVzKFtvYmplY3RdJFBhdGhzKSB7CiAgICAkcGF0aHNMaXN0ID0gTm9ybWFsaXplLVBhdGhMaXN0ICRQYXRocwogICAgJG9rID0gQCgnLmpzJywnLmpzeCcsJy50cycsJy50c3gnLCcubWpzJywnLmNqcycsJy5tdHMnLCcuY3RzJykKICAgICRvdXQgPSBAKCkKICAgIGZvcmVhY2ggKCRwIGluICRwYXRoc0xpc3QpIHsKICAgICAgICAkZXh0ID0gW0lPLlBhdGhdOjpHZXRFeHRlbnNpb24oJHApLlRvTG93ZXJJbnZhcmlhbnQoKQogICAgICAgIGlmICgkb2sgLWNvbnRhaW5zICRleHQpIHsgJG91dCArPSAkcCB9CiAgICB9CiAgICByZXR1cm4gJG91dCB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gSW52b2tlLVNtYXJ0TGludChbc3RyaW5nXSRSZXBvUm9vdCwgW3N0cmluZ1tdXSRDaGFuZ2VkRmlsZXMsIFtzdHJpbmddJFJ1bkRpcikgewogICAgJG5vcm1hbGl6ZWQgPSBOb3JtYWxpemUtUGF0aExpc3QgJENoYW5nZWRGaWxlcwogICAgJGxpbnRGaWxlcyA9IEdldC1MaW50YWJsZUZpbGVzICRub3JtYWxpemVkCiAgICBpZiAoLW5vdCAkbGludEZpbGVzIC1vciAkbGludEZpbGVzLkNvdW50IC1lcSAwKSB7CiAgICAgICAgV3JpdGUtU3RlcCA0NCAnU21hcnQgTGludDogbm8gSlMvVFMgZmlsZXMgY2hhbmdlZC4gU2tpcC4nCiAgICAgICAgcmV0dXJuCiAgICB9CgogICAgJGVzbGludCA9IFJlc29sdmUtRXNsaW50Q21kICRSZXBvUm9vdAoKICAgICRjaHVua1NpemUgPSAzNQogICAgJGNodW5rcyA9IEAoKQogICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkbGludEZpbGVzLkNvdW50OyAkaSArPSAkY2h1bmtTaXplKSB7CiAgICAgICAgJGVuZCA9IFtNYXRoXTo6TWluKCRpICsgJGNodW5rU2l6ZSAtIDEsICRsaW50RmlsZXMuQ291bnQgLSAxKQogICAgICAgICRjaHVua3MgKz0gLCAoJGxpbnRGaWxlc1skaS4uJGVuZF0pCiAgICB9CgogICAgJGlkeCA9IDAKICAgIGZvcmVhY2ggKCRjIGluICRjaHVua3MpIHsKICAgICAgICAkaWR4KysKICAgICAgICAkYXJncyA9IEAoJy0tbWF4LXdhcm5pbmdzPTAnLCAnLS1uby1lcnJvci1vbi11bm1hdGNoZWQtcGF0dGVybicsICctLWNhY2hlJywgJy0tY2FjaGUtbG9jYXRpb24nLCAncWEvZXNsaW50LmNhY2hlJykKICAgICAgICAkcXVvdGVkRmlsZXMgPSAkYyB8IEZvckVhY2gtT2JqZWN0IHsgUXVvdGUtQ21kQXJnICRfIH0KICAgICAgICAkY21kID0KICAgICAgICBpZiAoJGVzbGludCAtbGlrZSAnbnB4KicpIHsKICAgICAgICAgICAgInswfSB7MX0gezJ9IiAtZiAkZXNsaW50LCAoJGFyZ3MgLWpvaW4gJyAnKSwgKCRxdW90ZWRGaWxlcyAtam9pbiAnICcpCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAiezB9IHsxfSB7Mn0iIC1mIChRdW90ZS1DbWRBcmcgJGVzbGludCksICgkYXJncyAtam9pbiAnICcpLCAoJHF1b3RlZEZpbGVzIC1qb2luICcgJykKICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgNTIgKCJTbWFydCBMaW50OiBjaHVuayB7MH0vezF9IiAtZiAkaWR4LCAkY2h1bmtzLkNvdW50KQogICAgICAgIEludm9rZS1DbWQgJ0xpbnQgKGNoYW5nZWQpJyAkY21kCiAgICB9Cn0KCmZ1bmN0aW9uIEdldC1QYWNrYWdlU2NyaXB0cyhbc3RyaW5nXSRQYWNrYWdlSnNvblBhdGgpIHsKICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhY2thZ2VKc29uUGF0aCkpIHsgcmV0dXJuIEB7fSB9CiAgICB0cnkgewogICAgICAgICRqc29uID0gR2V0LUNvbnRlbnQgJFBhY2thZ2VKc29uUGF0aCAtUmF3IHwgQ29udmVydEZyb20tSnNvbgogICAgICAgIGlmICgkbnVsbCAtZXEgJGpzb24uc2NyaXB0cykgeyByZXR1cm4gQHt9IH0KICAgICAgICAkc2NyaXB0cyA9IEB7fQogICAgICAgICRqc29uLnNjcmlwdHMuUFNPYmplY3QuUHJvcGVydGllcyB8IEZvckVhY2gtT2JqZWN0IHsgJHNjcmlwdHNbJF8uTmFtZV0gPSAkXy5WYWx1ZSB9CiAgICAgICAgcmV0dXJuICRzY3JpcHRzCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBwYXJzZSBwYWNrYWdlLmpzb24gc2NyaXB0czogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkKICAgICAgICByZXR1cm4gQHt9CiAgICB9Cn0KCmZ1bmN0aW9uIEdldC1QYWNrYWdlVmVyc2lvbihbc3RyaW5nXSRQYWNrYWdlSnNvblBhdGgpIHsKICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhY2thZ2VKc29uUGF0aCkpIHsgcmV0dXJuICcnIH0KICAgIHRyeSB7CiAgICAgICAgJGpzb24gPSBHZXQtQ29udGVudCAkUGFja2FnZUpzb25QYXRoIC1SYXcgfCBDb252ZXJ0RnJvbS1Kc29uCiAgICAgICAgaWYgKCRqc29uLnZlcnNpb24pIHsgcmV0dXJuIFtzdHJpbmddJGpzb24udmVyc2lvbiB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBwYXJzZSBwYWNrYWdlLmpzb24gdmVyc2lvbjogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkKICAgIH0KICAgIHJldHVybiAnJwp9CgpmdW5jdGlvbiBJbnZva2UtVmVyc2lvbkJ1bXAoW3N0cmluZ10kQnVtcCkgewogICAgaWYgKCRCdW1wIC1lcSAnbm9uZScpIHsgcmV0dXJuIH0KICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ25wbScpKSB7IHRocm93ICducG0gbm90IGZvdW5kLCBjYW5ub3QgYnVtcCB2ZXJzaW9uLicgfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IG5wbSB2ZXJzaW9uIHswfSAtLW5vLWdpdC10YWctdmVyc2lvbiIgLWYgJEJ1bXApIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICducG0gdmVyc2lvbiBidW1wJyAoIm5wbSB2ZXJzaW9uIHswfSAtLW5vLWdpdC10YWctdmVyc2lvbiIgLWYgJEJ1bXApCn0KCmZ1bmN0aW9uIEludm9rZS1BdWRpdChbc3RyaW5nXSRMZXZlbCkgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnbnBtJykpIHsgcmV0dXJuIEB7IFJhbiA9ICRmYWxzZTsgRmFpbGVkID0gJGZhbHNlOyBUZXh0TG9nID0gJyc7IEpzb25Mb2cgPSAnJyB9IH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBucG0gYXVkaXQgLS1hdWRpdC1sZXZlbD17MH0iIC1mICRMZXZlbCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuIEB7IFJhbiA9ICR0cnVlOyBGYWlsZWQgPSAkZmFsc2U7IFRleHRMb2cgPSAnJzsgSnNvbkxvZyA9ICcnIH0gfQoKICAgICRqc29uTG9nID0gSm9pbi1QYXRoICRzY3JpcHQ6UnVuRGlyICdhdWRpdC5qc29uLmxvZycKICAgICR0ZXh0TG9nID0gSm9pbi1QYXRoICRzY3JpcHQ6UnVuRGlyICdhdWRpdC50eHQubG9nJwogICAgJGpzb25SZXMgPSBJbnZva2UtQ21kICducG0gYXVkaXQgKGpzb24pJyAnbnBtIGF1ZGl0IC0tanNvbicgJGpzb25Mb2cgLUFsbG93RmFpbHVyZQogICAgJHRleHRSZXMgPSBJbnZva2UtQ21kICgnbnBtIGF1ZGl0IChsZXZlbD17MH0pJyAtZiAkTGV2ZWwpICgibnBtIGF1ZGl0IC0tYXVkaXQtbGV2ZWw9ezB9IiAtZiAkTGV2ZWwpICR0ZXh0TG9nIC1BbGxvd0ZhaWx1cmUKICAgICRmYWlsZWQgPSAoJGpzb25SZXMuRXhpdENvZGUgLW5lIDAgLW9yICR0ZXh0UmVzLkV4aXRDb2RlIC1uZSAwKQogICAgcmV0dXJuIEB7IFJhbiA9ICR0cnVlOyBGYWlsZWQgPSAkZmFpbGVkOyBUZXh0TG9nID0gJHRleHRMb2c7IEpzb25Mb2cgPSAkanNvbkxvZyB9Cn0KCmZ1bmN0aW9uIE5ldy1DaGFuZ2Vsb2coW3N0cmluZ10kUGF0aCwgW3N0cmluZ10kTW9kZVZhbHVlLCBbc3RyaW5nXSRCcmFuY2gsIFtzdHJpbmddJEJhc2VCcmFuY2gsIFtzdHJpbmddJE1lc3NhZ2VWYWx1ZSwgW3N0cmluZ1tdXSRGaWxlcykgewogICAgJG5vdyA9IEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnCiAgICAkZGlmZkxvZyA9IEpvaW4tUGF0aCAoU3BsaXQtUGF0aCAkUGF0aCAtUGFyZW50KSAnZGlmZnN0YXQubG9nJwogICAgJHN0YXRSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmZzdGF0JyAnZ2l0IGRpZmYgLS1jYWNoZWQgLS1zdGF0JyAkZGlmZkxvZyAtQWxsb3dGYWlsdXJlCiAgICAkc3RhdCA9ICRzdGF0UmVzLk91dHB1dAoKICAgICRsaW5lcyA9IEAoKQogICAgJGxpbmVzICs9ICcjIEF1dG8gQ2hhbmdlbG9nJwogICAgJGxpbmVzICs9ICcnCiAgICAkbGluZXMgKz0gIi0gRGF0ZTogJG5vdyIKICAgICRsaW5lcyArPSAiLSBNb2RlOiAkTW9kZVZhbHVlIgogICAgJGxpbmVzICs9ICItIEJyYW5jaDogJEJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBCYXNlOiAkQmFzZUJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBNZXNzYWdlOiAkTWVzc2FnZVZhbHVlIgogICAgJGxpbmVzICs9ICcnCiAgICAkbGluZXMgKz0gJyMjIEZpbGVzJwogICAgZm9yZWFjaCAoJGYgaW4gJEZpbGVzKSB7ICRsaW5lcyArPSAiLSAkZiIgfQogICAgJGxpbmVzICs9ICcnCiAgICAkbGluZXMgKz0gJyMjIERpZmZzdGF0JwogICAgJGxpbmVzICs9ICdgYGAnCiAgICBpZiAoJHN0YXQpIHsgJGxpbmVzICs9ICRzdGF0IH0gZWxzZSB7ICRsaW5lcyArPSAnKG5vIGRpZmZzdGF0KScgfQogICAgJGxpbmVzICs9ICdgYGAnCgogICAgJGxpbmVzIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIE5ldy1TdW1tYXJ5KFtzdHJpbmddJFBhdGgsIFtzdHJpbmddJE1vZGVWYWx1ZSwgW3N0cmluZ10kQnJhbmNoLCBbc3RyaW5nXSRCYXNlQnJhbmNoLCBbc3RyaW5nXSRDb21taXQsIFtzdHJpbmddJFByVXJsLCBbc3RyaW5nXSRSZWxlYXNlVXJsLCBbc3RyaW5nXSRSdW5EaXIsIFtkYXRldGltZV0kU3RhcnRUaW1lLCBbZGF0ZXRpbWVdJEVuZFRpbWUsIFtib29sXSRXYXNEcnlSdW4pIHsKICAgICRkdXJhdGlvbiA9IFtNYXRoXTo6Um91bmQoKCRFbmRUaW1lIC0gJFN0YXJ0VGltZSkuVG90YWxTZWNvbmRzLCAyKQogICAgJGxpbmVzID0gQCgpCiAgICAkbGluZXMgKz0gJyMgUnVuIFN1bW1hcnknCiAgICAkbGluZXMgKz0gJycKICAgICRsaW5lcyArPSAiLSBEYXRlOiAkKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnKSIKICAgICRsaW5lcyArPSAiLSBNb2RlOiAkTW9kZVZhbHVlIgogICAgJGxpbmVzICs9ICItIEJyYW5jaDogJEJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBCYXNlOiAkQmFzZUJyYW5jaCIKICAgICRsaW5lcyArPSAiLSBDb21taXQ6ICRDb21taXQiCiAgICAkbGluZXMgKz0gIi0gUFI6ICRQclVybCIKICAgICRsaW5lcyArPSAiLSBSZWxlYXNlOiAkUmVsZWFzZVVybCIKICAgICRsaW5lcyArPSAiLSBEcnlSdW46ICRXYXNEcnlSdW4iCiAgICAkbGluZXMgKz0gIi0gRHVyYXRpb25TZWM6ICRkdXJhdGlvbiIKICAgICRsaW5lcyArPSAiLSBMb2dzOiAkUnVuRGlyIgogICAgJGxpbmVzIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIEludm9rZS1UYWcoW3N0cmluZ10kVmVyc2lvbikgewogICAgaWYgKC1ub3QgJFZlcnNpb24pIHsgdGhyb3cgJ0Nhbm5vdCB0YWcgd2l0aG91dCB2ZXJzaW9uLicgfQogICAgJHRhZ05hbWUgPSAidiRWZXJzaW9uIgogICAgJGV4aXN0aW5nID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBUYWcgTGlzdCcgKCJnaXQgdGFnIC1sIHswfSIgLWYgJHRhZ05hbWUpCiAgICAkZmlyc3RUYWcgPSAoW3N0cmluZ10oJGV4aXN0aW5nLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpKS5UcmltKCkKICAgIGlmICgkZXhpc3RpbmcuT3V0cHV0IC1hbmQgJGZpcnN0VGFnIC1lcSAkdGFnTmFtZSkgeyB0aHJvdyAoIlRhZyB7MH0gYWxyZWFkeSBleGlzdHMuIiAtZiAkdGFnTmFtZSkgfQoKICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCdEUlkgUlVOOiBnaXQgdGFnIC1hIHswfSAtbSAiUmVsZWFzZSB7MH0iJyAtZiAkdGFnTmFtZSkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuICR0YWdOYW1lIH0KICAgICRjbWQgPSAnZ2l0IHRhZyAtYSAiezB9IiAtbSAiUmVsZWFzZSB7MH0iJyAtZiAkdGFnTmFtZQogICAgSW52b2tlLUNtZCAnR2l0IFRhZycgJGNtZAogICAgcmV0dXJuICR0YWdOYW1lCn0KCmZ1bmN0aW9uIEludm9rZS1QdXNoVGFnKFtzdHJpbmddJFRhZ05hbWUpIHsKICAgIGlmICgtbm90ICRUYWdOYW1lKSB7IHJldHVybiB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IHB1c2ggb3JpZ2luIHswfSIgLWYgJFRhZ05hbWUpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICdQdXNoIFRhZycgKCJnaXQgcHVzaCBvcmlnaW4gezB9IiAtZiAkVGFnTmFtZSkKfQoKZnVuY3Rpb24gSW52b2tlLU9wZW5Qcihbc3RyaW5nXSRCYXNlQnJhbmNoLCBbc3RyaW5nXSRIZWFkQnJhbmNoLCBbc3RyaW5nXSRCb2R5RmlsZSkgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnZ2gnKSkgeyB0aHJvdyAnZ2ggQ0xJIG5vdCBmb3VuZC4gSW5zdGFsbCBpdCBvciBjcmVhdGUgUFIgbWFudWFsbHkuJyB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaCBwciBjcmVhdGUgLi4uJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gJG51bGwgfQogICAgJGNtZCA9ICdnaCBwciBjcmVhdGUgLS1iYXNlICJ7MH0iIC0taGVhZCAiezF9IiAtLXRpdGxlICJ7Mn0iIC0tYm9keS1maWxlICJ7M30iJyAtZiAkQmFzZUJyYW5jaCwgJEhlYWRCcmFuY2gsICRIZWFkQnJhbmNoLCAkQm9keUZpbGUKICAgIEludm9rZS1DbWQgJ0dpdEh1YiBQUiBDcmVhdGUnICRjbWQKICAgICR1cmxSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0SHViIFBSIFVSTCcgJ2doIHByIHZpZXcgLS1qc29uIHVybCAtLWpxIC51cmwnIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkdXJsUmVzLkV4aXRDb2RlIC1lcSAwKSB7IHJldHVybiAoW3N0cmluZ10oJHVybFJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKSkuVHJpbSgpIH0KICAgIHJldHVybiAkbnVsbAp9CgpmdW5jdGlvbiBJbnZva2UtT3BlblBySW5Ccm93c2VyIHsKICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ2doJykpIHsgV3JpdGUtV2FybiAnZ2ggQ0xJIG5vdCBmb3VuZCBmb3IgUFIgdmlldy4nOyByZXR1cm4gfQogICAgSW52b2tlLUNtZCAnR2l0SHViIFBSIFZpZXcgKHdlYiknICdnaCBwciB2aWV3IC0td2ViJyAtQWxsb3dGYWlsdXJlCn0KCmZ1bmN0aW9uIEludm9rZS1DcmVhdGVSZWxlYXNlKFtzdHJpbmddJFRhZ05hbWUpIHsKICAgIGlmICgtbm90IChUZXN0LUNvbW1hbmRFeGlzdHMgJ2doJykpIHsgdGhyb3cgJ2doIENMSSBub3QgZm91bmQgZm9yIFJlbGVhc2UgY3JlYXRpb24uJyB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2ggcmVsZWFzZSBjcmVhdGUgezB9IC0tZ2VuZXJhdGUtbm90ZXMiIC1mICRUYWdOYW1lKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gJG51bGwgfQogICAgJGNtZCA9ICdnaCByZWxlYXNlIGNyZWF0ZSAiezB9IiAtLXRpdGxlICJ7MH0iIC0tZ2VuZXJhdGUtbm90ZXMnIC1mICRUYWdOYW1lCiAgICBJbnZva2UtQ21kICdHaXRIdWIgUmVsZWFzZSBDcmVhdGUnICRjbWQKICAgICR1cmxSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0SHViIFJlbGVhc2UgVVJMJyAoImdoIHJlbGVhc2UgdmlldyB7MH0gLS1qc29uIHVybCAtLWpxIC51cmwiIC1mICRUYWdOYW1lKSAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJHVybFJlcy5FeGl0Q29kZSAtZXEgMCkgeyByZXR1cm4gKFtzdHJpbmddKCR1cmxSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkpLlRyaW0oKSB9CiAgICByZXR1cm4gJG51bGwKfQoKZnVuY3Rpb24gTmV3LUNvbW1pdE1lc3NhZ2UoW3N0cmluZ10kRmFsbGJhY2ssIFtzdHJpbmdbXV0kU3RhZ2VkRmlsZXMpIHsKICAgICRzdGFtcCA9IEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW0nCiAgICBpZiAoJEZhbGxiYWNrIC1hbmQgJEZhbGxiYWNrLlRyaW0oKS5MZW5ndGggLWd0IDApIHsgcmV0dXJuICRGYWxsYmFjay5UcmltKCkgfQoKICAgICR0b3AgPSAkU3RhZ2VkRmlsZXMgfAogICAgICAgIEZvckVhY2gtT2JqZWN0IHsgKCRfIC1zcGxpdCAiWy9cXF0iKVswXSB9IHwKICAgICAgICBXaGVyZS1PYmplY3QgeyAkXyB9IHwKICAgICAgICBHcm91cC1PYmplY3QgfAogICAgICAgIFNvcnQtT2JqZWN0IENvdW50IC1EZXNjZW5kaW5nIHwKICAgICAgICBTZWxlY3QtT2JqZWN0IC1GaXJzdCAzCgogICAgJHRhZyA9IGlmICgkdG9wLkNvdW50IC1ndCAwKSB7ICgkdG9wIHwgRm9yRWFjaC1PYmplY3QgeyAkXy5OYW1lIH0pIC1qb2luICcsJyB9IGVsc2UgeyAncmVwbycgfQogICAgcmV0dXJuICJjaG9yZSgkdGFnKTogYXV0byB1cGRhdGUgJHN0YW1wIgp9CgpmdW5jdGlvbiBXcml0ZS1SdW5TdW1tYXJ5KFtzdHJpbmddJEJyYW5jaCwgW3N0cmluZ10kT3JpZ2luLCBbc3RyaW5nXSRSdW5EaXIpIHsKICAgIFdyaXRlLUhvc3QgJycKICAgIFdyaXRlLUhvc3QgJ1N1bW1hcnk6JyAtRm9yZWdyb3VuZENvbG9yIEN5YW4KICAgIFdyaXRlLUhvc3QgKCItIEJyYW5jaDogezB9IiAtZiAkQnJhbmNoKQogICAgV3JpdGUtSG9zdCAoIi0gUmVtb3RlOiB7MH0iIC1mICRPcmlnaW4pCiAgICAkaGVhZFJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmV2LVBhcnNlJyAnZ2l0IHJldi1wYXJzZSBIRUFEJwogICAgJGhlYWQgPSAoW3N0cmluZ10oJGhlYWRSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkpLlRyaW0oKQogICAgaWYgKCRoZWFkKSB7IFdyaXRlLUhvc3QgKCItIENvbW1pdDogezB9IiAtZiAkaGVhZC5TdWJzdHJpbmcoMCwgW01hdGhdOjpNaW4oOCwgJGhlYWQuTGVuZ3RoKSkpIH0KICAgIFdyaXRlLUhvc3QgKCItIExvZ3M6IHswfSIgLWYgJFJ1bkRpcikKICAgIFdyaXRlLUhvc3QgJycKICAgICRzdGF0dXNSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFN0YXR1cyAoc2hvcnQpJyAnZ2l0IHN0YXR1cyAtc2InCiAgICBpZiAoJHN0YXR1c1Jlcy5PdXRwdXQpIHsgJHN0YXR1c1Jlcy5PdXRwdXQgfCBGb3JFYWNoLU9iamVjdCB7IFdyaXRlLUhvc3QgJF8gfSB9Cn0KCmZ1bmN0aW9uIEdldC1IZWFkQ29tbWl0IHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFJldi1QYXJzZScgJ2dpdCByZXYtcGFyc2UgSEVBRCcKICAgIHJldHVybiAoW3N0cmluZ10oJHJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKSkuVHJpbSgpCn0KCmZ1bmN0aW9uIFRlc3QtSXNCaW5hcnkoW3N0cmluZ10kUGF0aCkgewogICAgJGZzID0gJG51bGwKICAgIHRyeSB7CiAgICAgICAgJGZzID0gW1N5c3RlbS5JTy5GaWxlXTo6T3BlblJlYWQoJFBhdGgpCiAgICAgICAgJGJ1ZmZlciA9IE5ldy1PYmplY3QgYnl0ZVtdIDgwMDAKICAgICAgICAkcmVhZCA9ICRmcy5SZWFkKCRidWZmZXIsIDAsICRidWZmZXIuTGVuZ3RoKQogICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJHJlYWQ7ICRpKyspIHsKICAgICAgICAgICAgaWYgKCRidWZmZXJbJGldIC1lcSAwKSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAkZmFsc2UKICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1XYXJuICgiQ291bGQgbm90IGluc3BlY3QgZmlsZSBmb3IgYmluYXJ5IGRhdGE6IHswfSIgLWYgJFBhdGgpCiAgICAgICAgcmV0dXJuICR0cnVlCiAgICB9CiAgICBmaW5hbGx5IHsKICAgICAgICBpZiAoJGZzKSB7ICRmcy5EaXNwb3NlKCkgfQogICAgfQp9CgpmdW5jdGlvbiBUZXN0LUlzVGV4dEZpbGUoW3N0cmluZ10kUGF0aCkgewogICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkUGF0aCkpIHsgcmV0dXJuICRmYWxzZSB9CiAgICAkZXh0ID0gW0lPLlBhdGhdOjpHZXRFeHRlbnNpb24oJFBhdGgpLlRvTG93ZXJJbnZhcmlhbnQoKQogICAgJGJpbmFyeUV4dCA9IEAoJy5wbmcnLCcuanBnJywnLmpwZWcnLCcuZ2lmJywnLndlYnAnLCcucGRmJywnLnppcCcsJy43eicsJy5yYXInLCcuZXhlJywnLmRsbCcsJy5iaW4nLCcubXA0JywnLm1vdicsJy5pY28nLCcuc3ZnJywnLnBzZCcsJy5haScsJy50dGYnLCcud29mZicsJy53b2ZmMicpCiAgICBpZiAoJGJpbmFyeUV4dCAtY29udGFpbnMgJGV4dCkgeyByZXR1cm4gJGZhbHNlIH0KICAgIGlmIChUZXN0LUlzQmluYXJ5ICRQYXRoKSB7IHJldHVybiAkZmFsc2UgfQogICAgcmV0dXJuICR0cnVlCn0KCmZ1bmN0aW9uIFJlZGFjdC1MaW5lKFtzdHJpbmddJExpbmUpIHsKICAgICRyZWQgPSAkTGluZQogICAgJHJlZCA9ICRyZWQgLXJlcGxhY2UgJyg/aSkoQXV0aG9yaXphdGlvbjopXHMrXFMrJywgJyQxIFtSRURBQ1RFRF0nCiAgICAkcmVkID0gJHJlZCAtcmVwbGFjZSAnKFtBLVphLXowLTlfLV17MTIsfSknLCAnW1JFREFDVEVEXScKICAgIHJldHVybiAkcmVkCn0KCmZ1bmN0aW9uIEdldC1QYXRoc0Zvckd1YXJkcyB7CiAgICAkc3RhZ2VkID0gR2V0LVN0YWdlZEZpbGVzCiAgICBpZiAoJHN0YWdlZCAtYW5kICRzdGFnZWQuQ291bnQgLWd0IDApIHsgcmV0dXJuICRzdGFnZWQgfQogICAgcmV0dXJuIEdldC1DaGFuZ2VkRmlsZXMKfQoKZnVuY3Rpb24gVGVzdC1TZWNyZXRzKFtzdHJpbmdbXV0kUGF0aHMsIFtzdHJpbmddJExvZ1BhdGgpIHsKICAgICRwYXR0ZXJucyA9IEAoCiAgICAgICAgJyg/aSlBUElfS0VZJywKICAgICAgICAnKD9pKVNFQ1JFVCcsCiAgICAgICAgJyg/aSlUT0tFTicsCiAgICAgICAgJyg/aSlQQVNTV09SRCcsCiAgICAgICAgJyg/aSlCRUdJTiBQUklWQVRFIEtFWScsCiAgICAgICAgJyg/aSlBdXRob3JpemF0aW9uOicsCiAgICAgICAgJ3hveFtiYXByc10tJywKICAgICAgICAnZ2hwXycsCiAgICAgICAgJ2dpdGh1Yl9wYXRfJywKICAgICAgICAnc2stW0EtWmEtejAtOV17MTAsfScsCiAgICAgICAgJ0FLSUFbMC05QS1aXXsxNn0nCiAgICApCiAgICAkaGl0cyA9IEAoKQogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7CiAgICAgICAgaWYgKC1ub3QgJHApIHsgY29udGludWUgfQogICAgICAgIGlmIChUZXN0LUlzSWdub3JlZFBhdGggJHApIHsgY29udGludWUgfQogICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggJHApKSB7IFdyaXRlLVdhcm4gKCJTa2lwcGVkIG1pc3NpbmcgZmlsZTogezB9IiAtZiAkcCk7IGNvbnRpbnVlIH0KICAgICAgICBpZiAoLW5vdCAoVGVzdC1Jc1RleHRGaWxlICRwKSkgeyBjb250aW51ZSB9CiAgICAgICAgJGxpbmVOdW0gPSAwCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGNvbnRlbnQgPSBHZXQtQ29udGVudCAtUGF0aCAkcCAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgIH0KICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgIHRocm93ICgiRmFpbGVkIHRvIHJlYWQgZmlsZSBmb3Igc2VjcmV0IHNjYW46IHswfSIgLWYgJHApCiAgICAgICAgfQogICAgICAgIGZvcmVhY2ggKCRsaW5lIGluICRjb250ZW50KSB7CiAgICAgICAgICAgICRsaW5lTnVtKysKICAgICAgICAgICAgZm9yZWFjaCAoJHBhdCBpbiAkcGF0dGVybnMpIHsKICAgICAgICAgICAgICAgIGlmICgkbGluZSAtbWF0Y2ggJHBhdCkgewogICAgICAgICAgICAgICAgICAgICRyZWQgPSBSZWRhY3QtTGluZSAkbGluZQogICAgICAgICAgICAgICAgICAgICRoaXRzICs9ICgiezB9OnsxfTogcGF0dGVybiAnezJ9JyAtPiB7M30iIC1mICRwLCAkbGluZU51bSwgJHBhdCwgJHJlZCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGlmICgkaGl0cy5Db3VudCAtZ3QgMCkgewogICAgICAgICRoaXRzIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4CiAgICAgICAgdGhyb3cgKCJTZWNyZXQtbGlrZSBjb250ZW50IGRldGVjdGVkLiBMb2c6IHswfSIgLWYgJExvZ1BhdGgpCiAgICB9CiAgICAnTm8gc2VjcmV0LWxpa2UgbWF0Y2hlcyBmb3VuZC4nIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIFRlc3QtTGFyZ2VGaWxlcyhbc3RyaW5nW11dJFBhdGhzLCBbaW50XSRNYXhNQiwgW3N0cmluZ10kTG9nUGF0aCkgewogICAgJGxpbWl0ID0gJE1heE1CICogMTAyNCAqIDEwMjQKICAgICRsYXJnZSA9IEAoKQogICAgZm9yZWFjaCAoJHAgaW4gJFBhdGhzKSB7CiAgICAgICAgaWYgKC1ub3QgJHApIHsgY29udGludWUgfQogICAgICAgIGlmIChUZXN0LUlzSWdub3JlZFBhdGggJHApIHsgY29udGludWUgfQogICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggJHApKSB7IFdyaXRlLVdhcm4gKCJTa2lwcGVkIG1pc3NpbmcgZmlsZTogezB9IiAtZiAkcCk7IGNvbnRpbnVlIH0KICAgICAgICAkaXRlbSA9IEdldC1JdGVtICRwIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgaWYgKCRpdGVtLlBTSXNDb250YWluZXIpIHsgY29udGludWUgfQogICAgICAgIGlmICgkaXRlbS5MZW5ndGggLWd0ICRsaW1pdCkgeyAkbGFyZ2UgKz0gKCJ7MH0gKHsxOk4yfSBNQikiIC1mICRwLCAoJGl0ZW0uTGVuZ3RoIC8gMU1CKSkgfQogICAgfQogICAgaWYgKCRsYXJnZS5Db3VudCAtZ3QgMCkgeyAkbGFyZ2UgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUVuY29kaW5nIHV0Zjg7IHRocm93ICgiTGFyZ2UgZmlsZSBndWFyZCB0cmlnZ2VyZWQuIExvZzogezB9IiAtZiAkTG9nUGF0aCkgfQogICAgJ05vIG92ZXJzaXplZCBmaWxlcyBpbiBjaGFuZ2VkIHNldC4nIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1FbmNvZGluZyB1dGY4Cn0KCmZ1bmN0aW9uIEdldC1TdGF0dXNTaWduYXR1cmUoW3N0cmluZ10kTG9nRGlyKSB7CiAgICAkcmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBTdGF0dXMgKHdhdGNoKScgJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nIC1Mb2dEaXIgJExvZ0RpcgogICAgJGxpbmVzID0gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0CiAgICBpZiAoLW5vdCAkbGluZXMgLW9yICRsaW5lcy5Db3VudCAtZXEgMCkgeyByZXR1cm4gJycgfQogICAgcmV0dXJuICgkbGluZXMgLWpvaW4gW0Vudmlyb25tZW50XTo6TmV3TGluZSkKfQoKZnVuY3Rpb24gSW52b2tlLUdpdEF1dG9QdXNoT25jZShbc3dpdGNoXSRGcm9tV2F0Y2gpIHsKICAgICRydW5EaXIgPSAkbnVsbAogICAgJGxvY2tIYW5kbGUgPSAkbnVsbAogICAgJHN0YXJ0VGltZSA9IEdldC1EYXRlCiAgICAkc2NyaXB0OlJ1blN0YXJ0ID0gJHN0YXJ0VGltZQoKICAgIHRyeSB7CiAgICAgICAgV3JpdGUtU3RlcCAyICdMb2NhdGUgcmVwbycKICAgICAgICAkcm9vdCA9IFRlc3QtSW5HaXRSZXBvCiAgICAgICAgJHNjcmlwdDpSb290ID0gJHJvb3QKCiAgICAgICAgV3JpdGUtU3RlcCA0ICdQcmVwYXJlIGxvZ3MnCiAgICAgICAgUmVtb3ZlLU9sZExvZ1J1bnMgJHJvb3QgJEtlZXBMb2dSdW5zCiAgICAgICAgJHJ1bkRpciA9IE5ldy1SdW5Mb2dEaXIgJHJvb3QKICAgICAgICAkc2NyaXB0OlJ1bkRpciA9ICRydW5EaXIKICAgICAgICAkc2NyaXB0OkxvZ0NvdW50ZXJzID0gQHt9CiAgICAgICAgU2V0LUxvY2FsRXhjbHVkZSAkcm9vdCBAKCdxYS9sb2dzLycsICdxYS9lc2xpbnQuY2FjaGUnLCAnLmVzbGludGNhY2hlJywgJy5jYWNoZS8nKQoKICAgICAgICBpZiAoJEZyb21XYXRjaCkgeyAkbG9ja0hhbmRsZSA9IFRyeS1BY3F1aXJlUnVuTG9jayAkcm9vdCB9IGVsc2UgeyAkbG9ja0hhbmRsZSA9IEFjcXVpcmUtUnVuTG9jayAkcm9vdCB9CiAgICAgICAgaWYgKC1ub3QgJGxvY2tIYW5kbGUpIHsKICAgICAgICAgICAgV3JpdGUtV2FybiAnTG9jayBpcyBoZWxkIGJ5IGFub3RoZXIgcHJvY2Vzcy4gU2tpcHBpbmcgcnVuLicKICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgICAgIHJldHVybiAyCiAgICAgICAgfQogICAgICAgICRzY3JpcHQ6UnVuTG9ja0hhbmRsZSA9ICRsb2NrSGFuZGxlCgogICAgICAgIFdyaXRlLVN0ZXAgNiAnUmVhZCBHaXQgY29udGV4dCcKICAgICAgICAkY3R4ID0gR2V0LUdpdENvbnRleHQKICAgICAgICAkYnJhbmNoID0gJGN0eC5CcmFuY2gKICAgICAgICAkb3JpZ2luID0gJGN0eC5PcmlnaW4KCiAgICAgICAgVGVzdC1CcmFuY2hQb2xpY3kgJE1vZGUgJGJyYW5jaAoKICAgICAgICAkcmVtb3RlRGVmYXVsdCA9IEdldC1SZW1vdGVEZWZhdWx0QnJhbmNoCiAgICAgICAgJGJhc2UgPSBSZXNvbHZlLUJhc2VCcmFuY2ggJEJhc2VCcmFuY2ggJHJlbW90ZURlZmF1bHQKCiAgICAgICAgaWYgKCRyZW1vdGVEZWZhdWx0IC1uZSAnbWFpbicpIHsKICAgICAgICAgICAgV3JpdGUtV2FybiAoIlJlbW90ZSBkZWZhdWx0IGJyYW5jaCBpcyAnezB9JyAobm90ICdtYWluJykuIiAtZiAkcmVtb3RlRGVmYXVsdCkKICAgICAgICAgICAgV3JpdGUtSG9zdCAnSWYgeW91IHdhbnQgbWFpbiwgdXBkYXRlIEdpdEh1YiBTZXR0aW5ncyA+IEJyYW5jaGVzID4gRGVmYXVsdCBicmFuY2guJyAtRm9yZWdyb3VuZENvbG9yIERhcmtZZWxsb3cKICAgICAgICB9CgogICAgICAgIGlmICgkRml4UmVtb3RlSGVhZE1haW4pIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA4ICdGaXggb3JpZ2luL0hFQUQgKGxvY2FsKSB0byBtYWluJwogICAgICAgICAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgcmVtb3RlIHNldC1oZWFkIG9yaWdpbiBtYWluJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0ZpeCBvcmlnaW4vSEVBRCAtPiBtYWluIChsb2NhbCknICdnaXQgcmVtb3RlIHNldC1oZWFkIG9yaWdpbiBtYWluJyB9CiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDEwICdDaGVjayBmb3IgY2hhbmdlcycKICAgICAgICAkcG9yY2VsYWluID0gR2V0LVN0YXR1c1BvcmNlbGFpbgogICAgICAgIGlmICgtbm90ICRwb3JjZWxhaW4gLW9yICRwb3JjZWxhaW4uQ291bnQgLWVxIDApIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAxMDAgJ05vIGNoYW5nZXMgdG8gcHVzaCcKICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgICAgIEludm9rZS1Ub2FzdCAnR2l0IEF1dG8gUHVzaCcgJ05vIGNoYW5nZXMuIEV2ZXJ5dGhpbmcgY2xlYW4uJwogICAgICAgICAgICByZXR1cm4gMAogICAgICAgIH0KCiAgICAgICAgaWYgKCRNb2RlIC1lcSAnU2FmZScpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAxMiAoIlNBRkU6IGJhc2U9J3swfScgfCBjdXJyZW50IGJyYW5jaD0nezF9JyIgLWYgJGJhc2UsICRicmFuY2gpCgogICAgICAgICAgICAkZGlydHkgPSBHZXQtU3RhdHVzUG9yY2VsYWluCiAgICAgICAgICAgICRkaWRTdGFzaCA9ICRmYWxzZQogICAgICAgICAgICBpZiAoJGRpcnR5IC1hbmQgJGRpcnR5LkNvdW50IC1ndCAwKSB7CiAgICAgICAgICAgICAgICBpZiAoLW5vdCAkQXV0b1N0YXNoKSB7IFdyaXRlLVdhcm4gJ1NBRkU6IHdvcmtpbmcgdHJlZSBkaXJ0eTsgYXV0by1zdGFzaGluZyBmb3IgU2FmZSBtb2RlLicgfQogICAgICAgICAgICAgICAgJGRpZFN0YXNoID0gSW52b2tlLUF1dG9TdGFzaCAtRW5hYmxlOiR0cnVlCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRkaWRDaGVja291dEJhc2UgPSBFbnN1cmUtTG9jYWxCcmFuY2ggJGJhc2UKCiAgICAgICAgICAgIGlmICgtbm90ICRkaWRDaGVja291dEJhc2UpIHsKICAgICAgICAgICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaXQgY2hlY2tvdXQgezB9IiAtZiAkYmFzZSkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnQ2hlY2tvdXQgYmFzZScgKCJnaXQgY2hlY2tvdXQgezB9IiAtZiAkYmFzZSkgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBJbnZva2UtQXV0b1B1bGwgJGJhc2UKCiAgICAgICAgICAgIGlmICgkU2FmZVVzZUN1cnJlbnRCcmFuY2gpIHsKICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTQgJ1NBRkU6IHVzaW5nIGN1cnJlbnQgYnJhbmNoICgtU2FmZVVzZUN1cnJlbnRCcmFuY2gpJwogICAgICAgICAgICAgICAgaWYgKCRicmFuY2ggLW5lICRiYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBjaGVja291dCB7MH0iIC1mICRicmFuY2gpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgeyBJbnZva2UtQ21kICdDaGVja291dCBvcmlnaW5hbCcgKCJnaXQgY2hlY2tvdXQgezB9IiAtZiAkYnJhbmNoKSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkbmV3QnJhbmNoID0gTmV3LUF1dG9CcmFuY2hOYW1lCiAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDE0ICgiU0FGRTogY3JlYXRpbmcgYnJhbmNoIHswfSIgLWYgJG5ld0JyYW5jaCkKICAgICAgICAgICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaXQgY2hlY2tvdXQgLWIgezB9IiAtZiAkbmV3QnJhbmNoKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICAgICAgICAgIGVsc2UgeyBJbnZva2UtQ21kICdDcmVhdGUgU0FGRSBicmFuY2gnICgiZ2l0IGNoZWNrb3V0IC1iIHswfSIgLWYgJG5ld0JyYW5jaCkgfQogICAgICAgICAgICAgICAgJGJyYW5jaCA9ICRuZXdCcmFuY2gKICAgICAgICAgICAgfQoKICAgICAgICAgICAgSW52b2tlLUF1dG9Qb3BTdGFzaCAkZGlkU3Rhc2gKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTIgJ1N0YXNoICsgcHVsbCAoaWYgZW5hYmxlZCknCiAgICAgICAgICAgICRkaWRTdGFzaCA9IEludm9rZS1BdXRvU3Rhc2ggLUVuYWJsZTokQXV0b1N0YXNoCiAgICAgICAgICAgIEludm9rZS1BdXRvUHVsbCAkYnJhbmNoCiAgICAgICAgICAgIEludm9rZS1BdXRvUG9wU3Rhc2ggJGRpZFN0YXNoCiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDE4ICdSZWNhbGN1bGF0ZSBjaGFuZ2VzJwogICAgICAgICRjaGFuZ2VkID0gR2V0LUNoYW5nZWRGaWxlcwogICAgICAgICRzdGFnZWQgPSBHZXQtU3RhZ2VkRmlsZXMKICAgICAgICAkZG9jc09ubHkgPSBUZXN0LURvY3NPbmx5Q2hhbmdlICRjaGFuZ2VkCiAgICAgICAgJHRvdWNoZWRTcmMgPSBUZXN0LVRvdWNoZWRTcmMgJGNoYW5nZWQKICAgICAgICAkdG91Y2hlZENvbmZpZyA9IFRlc3QtVG91Y2hlZENvbmZpZyAkY2hhbmdlZAogICAgICAgICRiYXNlRGlmZiA9IEdldC1DaGFuZ2VkRmlsZXNTaW5jZUJhc2UgJGJhc2UKCiAgICAgICAgV3JpdGUtU3RlcCAyMiAoIkRldGVjdGVkIHswfSBmaWxlcy4gRG9jcy1vbmx5PXsxfSB8IHNyYz17Mn0gfCBjb25maWc9ezN9IiAtZiAkY2hhbmdlZC5Db3VudCwgJGRvY3NPbmx5LCAkdG91Y2hlZFNyYywgJHRvdWNoZWRDb25maWcpCiAgICAgICAgaWYgKCRiYXNlRGlmZiAtYW5kICRiYXNlRGlmZi5Db3VudCAtZ3QgMCkgeyBXcml0ZS1Ib3N0ICgiQmFzZSBkaWZmIGZpbGVzOiB7MH0iIC1mICRiYXNlRGlmZi5Db3VudCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CgogICAgICAgICRmaWxlc0Zvckd1YXJkcyA9IEdldC1QYXRoc0Zvckd1YXJkcwoKICAgICAgICBpZiAoLW5vdCAkU2tpcFNlY3JldFNjYW4pIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAyOCAnU2VjcmV0IHNjYW4nCiAgICAgICAgICAgICRsb2dTZWNyZXQgPSBKb2luLVBhdGggJHJ1bkRpciAnc2VjcmV0X3NjYW4ubG9nJwogICAgICAgICAgICBpZiAoLW5vdCAkRHJ5UnVuKSB7IFRlc3QtU2VjcmV0cyAkZmlsZXNGb3JHdWFyZHMgJGxvZ1NlY3JldCB9IGVsc2UgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBzZWNyZXQgc2NhbiB3b3VsZCBydW4nIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgIH0KCiAgICAgICAgaWYgKC1ub3QgJFNraXBMYXJnZUZpbGVTY2FuKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMzIgKCJMYXJnZSBmaWxlIGNoZWNrICg+ezB9TUIpIiAtZiAkTWF4RmlsZU1CKQogICAgICAgICAgICAkbG9nTGFyZ2UgPSBKb2luLVBhdGggJHJ1bkRpciAnbGFyZ2VfZmlsZXMubG9nJwogICAgICAgICAgICBpZiAoLW5vdCAkRHJ5UnVuKSB7IFRlc3QtTGFyZ2VGaWxlcyAkZmlsZXNGb3JHdWFyZHMgJE1heEZpbGVNQiAkbG9nTGFyZ2UgfSBlbHNlIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogbGFyZ2UgZmlsZSBzY2FuIHdvdWxkIHJ1bicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgfQoKICAgICAgICAkcGtnID0gSm9pbi1QYXRoICRyb290ICdwYWNrYWdlLmpzb24nCgogICAgICAgIGlmICgkVmVyc2lvbkJ1bXAgLW5lICdub25lJykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDM2ICgiVmVyc2lvbiBidW1wOiB7MH0iIC1mICRWZXJzaW9uQnVtcCkKICAgICAgICAgICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkcGtnKSkgeyB0aHJvdyAnVmVyc2lvbiBidW1wIHJlcXVlc3RlZCBidXQgcGFja2FnZS5qc29uIG5vdCBmb3VuZC4nIH0KICAgICAgICAgICAgSW52b2tlLVZlcnNpb25CdW1wICRWZXJzaW9uQnVtcAogICAgICAgIH0KCiAgICAgICAgJGVmZmVjdGl2ZUNoZWNrc01vZGUgPSAkQ2hlY2tzTW9kZQogICAgICAgIGlmICgkU2tpcENoZWNrcyAtb3IgJGRvY3NPbmx5KSB7ICRlZmZlY3RpdmVDaGVja3NNb2RlID0gJ09mZicgfQoKICAgICAgICBpZiAoJGVmZmVjdGl2ZUNoZWNrc01vZGUgLWVxICdPZmYnKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgNDQgKCJDaGVja3M6IE9GRiAoU2tpcENoZWNrcz17MH0gfCBkb2NzT25seT17MX0gfCBDaGVja3NNb2RlPXsyfSkiIC1mIFtib29sXSRTa2lwQ2hlY2tzLCBbYm9vbF0kZG9jc09ubHksICRDaGVja3NNb2RlKQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnbnBtJykpIHsKICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNDQgJ25wbSBub3QgZm91bmQuIFNraXBwaW5nIHByZWZsaWdodCBjaGVja3MuJwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgJHNjcmlwdHMgPSBHZXQtUGFja2FnZVNjcmlwdHMgJHBrZwoKICAgICAgICAgICAgICAgIGlmICgkZWZmZWN0aXZlQ2hlY2tzTW9kZSAtZXEgJ0Z1bGwnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY3JpcHRzLkNvbnRhaW5zS2V5KCdsaW50JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA1MiAnUHJlZmxpZ2h0OiBMaW50IChGVUxMKScKICAgICAgICAgICAgICAgICAgICAgICAgSW52b2tlLUNtZCAnTGludCcgJ25wbSBydW4gbGludCcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNTIgIk5vICdsaW50JyBzY3JpcHQuIFNraXAuIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNTIgJ1ByZWZsaWdodDogTGludCAoU01BUlQpJwogICAgICAgICAgICAgICAgICAgIEludm9rZS1TbWFydExpbnQgJHJvb3QgJGNoYW5nZWQgJHJ1bkRpcgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRydW5IZWF2eSA9ICR0b3VjaGVkU3JjCiAgICAgICAgICAgICAgICBpZiAoJHJ1bkhlYXZ5KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY3JpcHRzLkNvbnRhaW5zS2V5KCd0eXBlY2hlY2snKSkgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDU4ICdQcmVmbGlnaHQ6IFR5cGVjaGVjaycKICAgICAgICAgICAgICAgICAgICAgICAgSW52b2tlLUNtZCAnVHlwZWNoZWNrJyAnbnBtIHJ1biB0eXBlY2hlY2snCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgkc2NyaXB0cy5Db250YWluc0tleSgndGVzdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZWZmZWN0aXZlQ2hlY2tzTW9kZSAtZXEgJ1NtYXJ0JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlc3RGaWxlcyA9IEdldC1UZXN0RmlsZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtbm90ICR0ZXN0RmlsZXMgLW9yICR0ZXN0RmlsZXMuQ291bnQgLWVxIDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICdObyB0ZXN0IGZpbGVzIGZvdW5kLiBTa2lwcGluZyB0ZXN0cy4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDYwICdQcmVmbGlnaHQ6IFRlc3RzJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ZXN0UmVzID0gSW52b2tlLUNtZCAnVGVzdHMnICducG0gdGVzdCcgLUFsbG93RmFpbHVyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGVzdFJlcy5FeGl0Q29kZSAtbmUgMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb3V0ID0gJHRlc3RSZXMuT3V0cHV0VGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWlzc2luZ0pzZG9tID0gKCRvdXQgLW1hdGNoICdNSVNTSU5HIERFUEVOREVOQ1knKSAtYW5kICgkb3V0IC1tYXRjaCAnanNkb20nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbm9UZXN0cyA9ICgkb3V0IC1tYXRjaCAnTm8gdGVzdCBmaWxlcyBmb3VuZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbWlzc2luZ0pzZG9tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICdWaXRlc3QgbWlzc2luZyBqc2RvbS4gU2tpcHBpbmcgdGVzdHMgaW4gU21hcnQgbW9kZS4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgkbm9UZXN0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybiAnVml0ZXN0IHJlcG9ydGVkIG5vIHRlc3QgZmlsZXMuIFNraXBwaW5nIHRlc3RzIGluIFNtYXJ0IG1vZGUuJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Rlc3RzIGZhaWxlZC4gU2VlIGxvZ3MgZm9yIGRldGFpbHMuJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA2MCAnUHJlZmxpZ2h0OiBUZXN0cycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludm9rZS1DbWQgJ1Rlc3RzJyAnbnBtIHRlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY3JpcHRzLkNvbnRhaW5zS2V5KCdidWlsZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNjIgJ1ByZWZsaWdodDogQnVpbGQnCiAgICAgICAgICAgICAgICAgICAgICAgIEludm9rZS1DbWQgJ0J1aWxkJyAnbnBtIHJ1biBidWlsZCcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDYwICdTbWFydCBwcmVmbGlnaHQ6IG5vIHNyYyBjaGFuZ2VzOyBza2lwcGluZyB0eXBlY2hlY2svdGVzdC9idWlsZC4nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkU2tpcEF1ZGl0IC1vciAkZG9jc09ubHkpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA2NCAoIkF1ZGl0OiBza2lwPXswfSB8IGRvY3NPbmx5PXsxfSIgLWYgW2Jvb2xdJFNraXBBdWRpdCwgW2Jvb2xdJGRvY3NPbmx5KQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKFRlc3QtUGF0aCAkcGtnKSB7CiAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDY0ICgibnBtIGF1ZGl0IChsZXZlbD17MH0pIiAtZiAkQXVkaXRMZXZlbCkKICAgICAgICAgICAgICAgICRhdWRpdCA9IEludm9rZS1BdWRpdCAkQXVkaXRMZXZlbAogICAgICAgICAgICAgICAgaWYgKCRhdWRpdC5SYW4gLWFuZCAkYXVkaXQuRmFpbGVkIC1hbmQgJEZhaWxPbkF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKCJucG0gYXVkaXQgZm91bmQgaXNzdWVzIChsZXZlbCA+PSB7MH0pLiBSZXZpZXcgbG9nczogezF9IiAtZiAkQXVkaXRMZXZlbCwgJGF1ZGl0LlRleHRMb2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgNzIgJ1N0YWdpbmcgKGdpdCBhZGQgLUEpJwogICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCBhZGQgLUEnIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgIGVsc2UgeyBJbnZva2UtQ21kICdHaXQgQWRkJyAnZ2l0IGFkZCAtQScgfQoKICAgICAgICAkc3RhZ2VkID0gR2V0LVN0YWdlZEZpbGVzCiAgICAgICAgaWYgKC1ub3QgJHN0YWdlZCAtb3IgJHN0YWdlZC5Db3VudCAtZXEgMCkgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnTm8gc3RhZ2VkIGNoYW5nZXMuIE5vdGhpbmcgdG8gcHVzaC4nCiAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdOb3RoaW5nIHN0YWdlZC4gRG9uZS4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICAkZmluYWxNc2cgPSBOZXctQ29tbWl0TWVzc2FnZSAkTWVzc2FnZSAkc3RhZ2VkCiAgICAgICAgVGVzdC1Db21taXRNZXNzYWdlICRmaW5hbE1zZwoKICAgICAgICAkY2hhbmdlbG9nUGF0aCA9IEpvaW4tUGF0aCAkcnVuRGlyICdjaGFuZ2Vsb2cubWQnCiAgICAgICAgaWYgKCRHZW5lcmF0ZUNoYW5nZWxvZykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDc4ICdHZW5lcmF0aW5nIGNoYW5nZWxvZycKICAgICAgICAgICAgTmV3LUNoYW5nZWxvZyAkY2hhbmdlbG9nUGF0aCAkTW9kZSAkYnJhbmNoICRiYXNlICRmaW5hbE1zZyAkc3RhZ2VkCiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDg0ICgiQ29tbWl0OiB7MH0iIC1mICRmaW5hbE1zZykKICAgICAgICBpZiAoJERyeVJ1bikgewogICAgICAgICAgICBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgY29tbWl0IC1tIC4uLicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgICAgICBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgcHVzaCcgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnRFJZIFJVTiBjb21wbGV0ZScKICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgICAgICRoZWFkID0gR2V0LUhlYWRDb21taXQKICAgICAgICAgICAgTmV3LVN1bW1hcnkgKEpvaW4tUGF0aCAkcnVuRGlyICdzdW1tYXJ5Lm1kJykgJE1vZGUgJGJyYW5jaCAkYmFzZSAkaGVhZCAkbnVsbCAkbnVsbCAkcnVuRGlyICRzdGFydFRpbWUgKEdldC1EYXRlKSAkdHJ1ZQogICAgICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdEcnkgcnVuIGNvbXBsZXRlZC4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICBJbnZva2UtQ21kICdHaXQgQ29tbWl0JyAoImdpdCBjb21taXQgLW0gezB9IiAtZiAoUXVvdGUtQ21kQXJnICRmaW5hbE1zZykpCgogICAgICAgIFdyaXRlLVN0ZXAgOTAgKCJQdXNoOiBvcmlnaW4vezB9IiAtZiAkYnJhbmNoKQogICAgICAgIGlmICgkTW9kZSAtZXEgJ1NhZmUnKSB7IEludm9rZS1DbWQgJ0dpdCBQdXNoIChzZXQtdXBzdHJlYW0pJyAoImdpdCBwdXNoIC11IG9yaWdpbiB7MH0iIC1mICRicmFuY2gpIH0KICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnR2l0IFB1c2gnICdnaXQgcHVzaCcgfQoKICAgICAgICAkcGtnVmVyc2lvbiA9IEdldC1Q
### END B64 CHUNK 1/2
### BEGIN B64 CHUNK 2/2
YWNrYWdlVmVyc2lvbiAkcGtnCiAgICAgICAgJHRhZ05hbWUgPSAkbnVsbAogICAgICAgICRyZWxlYXNlVXJsID0gJG51bGwKICAgICAgICAkc2hvdWxkVGFnID0gJFRhZyAtb3IgKCRWZXJzaW9uQnVtcCAtbmUgJ25vbmUnKQoKICAgICAgICBpZiAoJHNob3VsZFRhZykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDkzICgiVGFnZ2luZyB2ZXJzaW9uOiB7MH0iIC1mICRwa2dWZXJzaW9uKQogICAgICAgICAgICAkdGFnTmFtZSA9IEludm9rZS1UYWcgJHBrZ1ZlcnNpb24KICAgICAgICAgICAgaWYgKCRQdXNoVGFnKSB7IEludm9rZS1QdXNoVGFnICR0YWdOYW1lIH0KICAgICAgICB9CgogICAgICAgIGlmICgkQ3JlYXRlUmVsZWFzZSkgewogICAgICAgICAgICBpZiAoLW5vdCAkdGFnTmFtZSkgeyB0aHJvdyAnQ3JlYXRlUmVsZWFzZSByZXF1aXJlcyBhIHRhZy4gVXNlIC1UYWcgb3IgLVZlcnNpb25CdW1wLicgfQogICAgICAgICAgICBXcml0ZS1TdGVwIDk1ICgiQ3JlYXRpbmcgR2l0SHViIFJlbGVhc2U6IHswfSIgLWYgJHRhZ05hbWUpCiAgICAgICAgICAgICRyZWxlYXNlVXJsID0gSW52b2tlLUNyZWF0ZVJlbGVhc2UgJHRhZ05hbWUKICAgICAgICB9CgogICAgICAgICRwclVybCA9ICRudWxsCiAgICAgICAgaWYgKCRPcGVuUHIpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA5NyAoIkNyZWF0aW5nIFBSIChnaCkgYmFzZT0nezB9JyIgLWYgJGJhc2UpCiAgICAgICAgICAgICRwclVybCA9IEludm9rZS1PcGVuUHIgJGJhc2UgJGJyYW5jaCAkY2hhbmdlbG9nUGF0aAogICAgICAgICAgICBpZiAoJE9wZW5QckluQnJvd3NlcikgewogICAgICAgICAgICAgICAgSW52b2tlLU9wZW5QckluQnJvd3NlcgogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDEwMCAnRG9uZScKICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2gnIC1Db21wbGV0ZWQKCiAgICAgICAgV3JpdGUtUnVuU3VtbWFyeSAkYnJhbmNoICRvcmlnaW4gJHJ1bkRpcgoKICAgICAgICAkaGVhZCA9IEdldC1IZWFkQ29tbWl0CiAgICAgICAgTmV3LVN1bW1hcnkgKEpvaW4tUGF0aCAkcnVuRGlyICdzdW1tYXJ5Lm1kJykgJE1vZGUgJGJyYW5jaCAkYmFzZSAkaGVhZCAkcHJVcmwgJHJlbGVhc2VVcmwgJHJ1bkRpciAkc3RhcnRUaW1lIChHZXQtRGF0ZSkgJGZhbHNlCgogICAgICAgIEludm9rZS1Ub2FzdCAnR2l0IEF1dG8gUHVzaCcgKCJTdWNjZXNzIG9uIHswfSIgLWYgJGJyYW5jaCkKICAgICAgICByZXR1cm4gMAogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICBXcml0ZS1Ib3N0ICgiISEgU3RvcHBlZCB3aXRoIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAtRm9yZWdyb3VuZENvbG9yIFJlZAogICAgICAgIGlmICgkcnVuRGlyKSB7IFdyaXRlLUhvc3QgKCJMb2dzOiB7MH0iIC1mICRydW5EaXIpIC1Gb3JlZ3JvdW5kQ29sb3IgWWVsbG93IH0KCiAgICAgICAgaWYgKCRydW5EaXIpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICRsYXN0TG9nID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkcnVuRGlyIC1GaWx0ZXIgJyoubG9nJyB8IFNvcnQtT2JqZWN0IExhc3RXcml0ZVRpbWUgLURlc2NlbmRpbmcgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxCiAgICAgICAgICAgICAgICBpZiAoJGxhc3RMb2cpIHsgV3JpdGUtTG9nVGFpbCAkbGFzdExvZy5GdWxsTmFtZSAkVGFpbExpbmVzIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICgiRmFpbGVkIHRvIHJlYWQgbGFzdCBsb2c6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkT3BlbkxvZ09uRmFpbCAtYW5kICRydW5EaXIgLWFuZCAoR2V0LUNvbW1hbmQgY29kZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkpIHsKICAgICAgICAgICAgdHJ5IHsgY29kZSAkcnVuRGlyIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gb3BlbiBWUyBDb2RlLicgfQogICAgICAgIH0KCiAgICAgICAgSW52b2tlLVRvYXN0ICdHaXQgQXV0byBQdXNoJyAnRkFJTEVELiBDaGVjayBsb2dzLicKICAgICAgICByZXR1cm4gMQogICAgfQogICAgZmluYWxseSB7CiAgICAgICAgUmVsZWFzZS1SdW5Mb2NrICRsb2NrSGFuZGxlCiAgICB9Cn0KCmlmICgkV2F0Y2gpIHsKICAgICRzdGFtcCA9IEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnCiAgICBXcml0ZS1Ib3N0ICgiIyMgV2F0Y2ggT04gKHswfSkgfCBpbnRlcnZhbD17MX1zIGRlYm91bmNlPXsyfXMgfCBtb2RlPXszfSBjaGVja3M9ezR9IiAtZiAkc3RhbXAsICRXYXRjaEludGVydmFsU2VjLCAkV2F0Y2hEZWJvdW5jZVNlYywgJE1vZGUsICRDaGVja3NNb2RlKSAtRm9yZWdyb3VuZENvbG9yIEN5YW4KICAgICRyb290ID0gVGVzdC1JbkdpdFJlcG8KICAgICRzY3JpcHQ6Um9vdCA9ICRyb290CiAgICBpZiAoLW5vdCAkc2NyaXB0OldhdGNoTG9nRGlyKSB7ICRzY3JpcHQ6V2F0Y2hMb2dEaXIgPSBOZXctV2F0Y2hMb2dEaXIgJHJvb3QgfQoKICAgICRsYXN0U2lnID0gJycKICAgICRsYXN0Q2hhbmdlQXQgPSAkbnVsbAoKICAgIHdoaWxlICgkdHJ1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRzaWcgPSBHZXQtU3RhdHVzU2lnbmF0dXJlICRzY3JpcHQ6V2F0Y2hMb2dEaXIKICAgICAgICAgICAgJG5vdyA9IEdldC1EYXRlCgogICAgICAgICAgICBpZiAoJHNpZyAtbmUgJGxhc3RTaWcpIHsKICAgICAgICAgICAgICAgICRsYXN0U2lnID0gJHNpZwogICAgICAgICAgICAgICAgJGxhc3RDaGFuZ2VBdCA9ICRub3cKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRzaWcgLWFuZCAkbGFzdENoYW5nZUF0KSB7CiAgICAgICAgICAgICAgICAkYWdlID0gKCRub3cgLSAkbGFzdENoYW5nZUF0KS5Ub3RhbFNlY29uZHMKICAgICAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCAoV2F0Y2gpJyAtU3RhdHVzICgiQ2hhbmdlcyBkZXRlY3RlZC4uLiBkZWJvdW5jZSB7MDpOMH0vezF9cyIgLWYgJGFnZSwgJFdhdGNoRGVib3VuY2VTZWMpIC1QZXJjZW50Q29tcGxldGUgKFtNYXRoXTo6TWluKDk5LCBbaW50XSgoJGFnZSAvIFtNYXRoXTo6TWF4KDEsICRXYXRjaERlYm91bmNlU2VjKSkgKiAxMDApKSkKICAgICAgICAgICAgICAgIGlmICgkYWdlIC1nZSAkV2F0Y2hEZWJvdW5jZVNlYykgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICdDaGFuZ2VzIHN0YWJsZS4gUnVubmluZyBhdXRvLXB1c2guLi4nIC1Gb3JlZ3JvdW5kQ29sb3IgR3JlZW4KICAgICAgICAgICAgICAgICAgICAkY29kZSA9IEludm9rZS1HaXRBdXRvUHVzaE9uY2UgLUZyb21XYXRjaAogICAgICAgICAgICAgICAgICAgICRsYXN0U2lnID0gJycKICAgICAgICAgICAgICAgICAgICAkbGFzdENoYW5nZUF0ID0gJG51bGwKICAgICAgICAgICAgICAgICAgICBpZiAoJGNvZGUgLWVxIDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgJFdhdGNoSW50ZXJ2YWxTZWMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgkY29kZSAtbmUgMCAtYW5kICRXYXRjaFN0b3BPbkZhaWwpIHsgZXhpdCAkY29kZSB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRXYXRjaE9uY2UpIHsgZXhpdCAkY29kZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2ggKFdhdGNoKScgLVN0YXR1cyAnTm8gY2hhbmdlcy4uLiB3YWl0aW5nJyAtUGVyY2VudENvbXBsZXRlIDAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgJFdhdGNoSW50ZXJ2YWxTZWMKICAgICAgICB9CiAgICAgICAgY2F0Y2ggewogICAgICAgICAgICBXcml0ZS1Ib3N0ICgiISEgV2F0Y2ggbG9vcCBlcnJvcjogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkgLUZvcmVncm91bmRDb2xvciBSZWQKICAgICAgICAgICAgaWYgKCRXYXRjaFN0b3BPbkZhaWwpIHsgZXhpdCAxIH0KICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgKFtNYXRoXTo6TWF4KDIsICRXYXRjaEludGVydmFsU2VjKSkKICAgICAgICB9CiAgICB9Cn0KCmV4aXQgKEludm9rZS1HaXRBdXRvUHVzaE9uY2UpDQo=
### END B64 CHUNK 2/2
### END B64 FILE: git-push.ps1

