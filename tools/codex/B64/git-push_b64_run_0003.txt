### BEGIN B64 FILE: git-push.ps1
### BEGIN B64 CHUNK 1/2
PCMKZ2l0LXB1c2gucHMxIChWNS4wIFBST0RVQ1RJT04pCkFkZHM6CiAgLSBDaGVja3NNb2RlOiBTbWFydCB8IEZ1bGwgfCBPZmYKICAtIFdhdGNoIG1vZGUgd2l0aCBkZWJvdW5jZSArIGxvY2sgZmlsZQogIC0gU2FmZSBkZWZhdWx0cyAoYXV0by8qIGJyYW5jaCkKICAtIERldGVjdCByZW1vdGUgZGVmYXVsdCBicmFuY2ggKG9yaWdpbiBIRUFEIGJyYW5jaCkKICAtIE9wdGlvbmFsIEZpeFJlbW90ZUhlYWRNYWluIChsb2NhbCBvbmx5KQoKVVNBR0U6CiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgRmFzdCAtQWxsb3dNYWluIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQXV0b1N0YXNoIC1PcGVuUHIgLU9wZW5Mb2dPbkZhaWwKICAuXGdpdC1wdXNoLnBzMSAtTW9kZSBTYWZlIC1DaGVja3NNb2RlIFNtYXJ0IC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLU1vZGUgU2FmZSAtQ2hlY2tzTW9kZSBGdWxsIC1PcGVuTG9nT25GYWlsCiAgLlxnaXQtcHVzaC5wczEgLVdhdGNoIC1Nb2RlIFNhZmUgLUF1dG9TdGFzaCAtT3BlbkxvZ09uRmFpbAojPgoKI3JlcXVpcmVzIC1WZXJzaW9uIDcuMApbQ21kbGV0QmluZGluZygpXQpwYXJhbSgKICAgIFtWYWxpZGF0ZVNldCgnU2FmZScsJ0Zhc3QnKV0KICAgIFtzdHJpbmddJE1vZGUgPSAnRmFzdCcsCgogICAgW3N0cmluZ10kTWVzc2FnZSA9ICcnLAoKICAgIFtzd2l0Y2hdJERyeVJ1biwKICAgIFtzd2l0Y2hdJE9wZW5Mb2dPbkZhaWwsCiAgICBbc3dpdGNoXSROb0F1dG9QdWxsLAogICAgW3N3aXRjaF0kQXV0b1N0YXNoLAoKICAgIFtzd2l0Y2hdJEFsbG93TWFpbiwKICAgIFtzd2l0Y2hdJE9wZW5QciwKICAgIFtzd2l0Y2hdJE9wZW5QckluQnJvd3NlciwKICAgIFtzd2l0Y2hdJENyZWF0ZVJlbGVhc2UsCgogICAgW2Jvb2xdJEdlbmVyYXRlQ2hhbmdlbG9nID0gJHRydWUsCiAgICBbc3dpdGNoXSRTa2lwQ2hlY2tzLAogICAgW3N3aXRjaF0kU2tpcFNlY3JldFNjYW4sCiAgICBbc3dpdGNoXSRTa2lwTGFyZ2VGaWxlU2NhbiwKICAgIFtzd2l0Y2hdJFNraXBBdWRpdCwKCiAgICBbVmFsaWRhdGVTZXQoJ25vbmUnLCdwYXRjaCcsJ21pbm9yJywnbWFqb3InKV0KICAgIFtzdHJpbmddJFZlcnNpb25CdW1wID0gJ25vbmUnLAoKICAgIFtzd2l0Y2hdJFRhZywKICAgIFtib29sXSRQdXNoVGFnID0gJHRydWUsCgogICAgW3N3aXRjaF0kRmFpbE9uQXVkaXQsCiAgICBbVmFsaWRhdGVTZXQoJ2xvdycsJ21vZGVyYXRlJywnaGlnaCcsJ2NyaXRpY2FsJyldCiAgICBbc3RyaW5nXSRBdWRpdExldmVsID0gJ2hpZ2gnLAoKICAgIFtpbnRdJE1heEZpbGVNQiA9IDIwLAogICAgW2ludF0kVGFpbExpbmVzID0gMTYwLAogICAgW2ludF0kS2VlcExvZ1J1bnMgPSAzMCwKCiAgICBbVmFsaWRhdGVTZXQoJ1NtYXJ0JywnRnVsbCcsJ09mZicpXQogICAgW3N0cmluZ10kQ2hlY2tzTW9kZSA9ICdTbWFydCcsCgogICAgW3N3aXRjaF0kV2F0Y2gsCiAgICBbaW50XSRXYXRjaEludGVydmFsU2VjID0gNSwKICAgIFtpbnRdJFdhdGNoRGVib3VuY2VTZWMgPSAxNSwKICAgIFtzd2l0Y2hdJFdhdGNoT25jZSwKICAgIFtzd2l0Y2hdJFdhdGNoU3RvcE9uRmFpbCwKCiAgICBbc3RyaW5nXSRCYXNlQnJhbmNoID0gJycsCiAgICBbc3dpdGNoXSRGaXhSZW1vdGVIZWFkTWFpbiwKCiAgICBbc3dpdGNoXSRTYWZlVXNlQ3VycmVudEJyYW5jaAopCgokRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCgokc2NyaXB0OlJvb3QgPSAkbnVsbAokc2NyaXB0OlJ1bkRpciA9ICRudWxsCiRzY3JpcHQ6V2F0Y2hMb2dEaXIgPSAkbnVsbAokc2NyaXB0OlJ1blN0YXJ0ID0gJG51bGwKJHNjcmlwdDpSdW5Mb2NrSGFuZGxlID0gJG51bGwKJHNjcmlwdDpMb2dDb3VudGVycyA9IEB7fQokc2NyaXB0OlN1bW1hcnkgPSBbb3JkZXJlZF1Ae30KCmZ1bmN0aW9uIFdyaXRlLVN0ZXAoW2ludF0kcGVyY2VudCwgW3N0cmluZ10kbWVzc2FnZSkgewogICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtU3RhdHVzICRtZXNzYWdlIC1QZXJjZW50Q29tcGxldGUgJHBlcmNlbnQKICAgIFdyaXRlLUhvc3QgKCJbezAsM30lXSB7MX0iIC1mICRwZXJjZW50LCAkbWVzc2FnZSkKfQoKZnVuY3Rpb24gV3JpdGUtV2Fybihbc3RyaW5nXSRtZXNzYWdlKSB7CiAgICBXcml0ZS1Ib3N0ICgiV0FSTjogezB9IiAtZiAkbWVzc2FnZSkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKfQoKZnVuY3Rpb24gSW52b2tlLVRvYXN0KFtzdHJpbmddJFRpdGxlLCBbc3RyaW5nXSRCb2R5KSB7CiAgICB0cnkgewogICAgICAgIGlmIChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIC1OYW1lIEJ1cm50VG9hc3QpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEltcG9ydC1Nb2R1bGUgQnVybnRUb2FzdCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICBpZiAoR2V0LUNvbW1hbmQgTmV3LUJ1cm50VG9hc3ROb3RpZmljYXRpb24gLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHsKICAgICAgICAgICAgICAgICAgICBOZXctQnVybnRUb2FzdE5vdGlmaWNhdGlvbiAtVGV4dCAkVGl0bGUsICRCb2R5IHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICgiVG9hc3QgbW9kdWxlIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gKCJUb2FzdCBjaGVjayBmYWlsZWQ6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9CiAgICB0cnkgeyBbY29uc29sZV06OkJlZXAoOTAwLCAxNTApIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdCZWVwIGZhaWxlZC4nIH0KICAgIFdyaXRlLUhvc3QgKCIhISB7MH0gLSB7MX0iIC1mICRUaXRsZSwgJEJvZHkpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0N5YW4KfQoKZnVuY3Rpb24gRW5zdXJlLURpcihbc3RyaW5nXSRQYXRoKSB7CiAgICBpZiAoLW5vdCAkUGF0aCkgeyB0aHJvdyAnRW5zdXJlLURpcjogcGF0aCBpcyBlbXB0eS4nIH0KICAgIGlmICgtbm90IChUZXN0LVBhdGggJFBhdGgpKSB7CiAgICAgICAgTmV3LUl0ZW0gLUl0ZW1UeXBlIERpcmVjdG9yeSAtUGF0aCAkUGF0aCAtRm9yY2UgfCBPdXQtTnVsbAogICAgfQp9CgpmdW5jdGlvbiBOZXctUnVuTG9nRGlyKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICAkcWFEaXIgPSBKb2luLVBhdGggJFJlcG9Sb290ICdxYScKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRxYURpciAnbG9ncycKICAgIEVuc3VyZS1EaXIgJHFhRGlyCiAgICBFbnN1cmUtRGlyICRsb2dzRGlyCiAgICAkcnVuRGlyID0gSm9pbi1QYXRoICRsb2dzRGlyICgicnVuX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkcnVuRGlyCiAgICByZXR1cm4gJHJ1bkRpcgp9CgpmdW5jdGlvbiBOZXctV2F0Y2hMb2dEaXIoW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRxYURpciA9IEpvaW4tUGF0aCAkUmVwb1Jvb3QgJ3FhJwogICAgJGxvZ3NEaXIgPSBKb2luLVBhdGggJHFhRGlyICdsb2dzJwogICAgRW5zdXJlLURpciAkcWFEaXIKICAgIEVuc3VyZS1EaXIgJGxvZ3NEaXIKICAgICR3YXRjaERpciA9IEpvaW4tUGF0aCAkbG9nc0RpciAoIndhdGNoX3swfSIgLWYgKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXlNTWRkX0hIbW1zcycpKQogICAgRW5zdXJlLURpciAkd2F0Y2hEaXIKICAgIHJldHVybiAkd2F0Y2hEaXIKfQoKZnVuY3Rpb24gUmVtb3ZlLU9sZExvZ1J1bnMoW3N0cmluZ10kUmVwb1Jvb3QsIFtpbnRdJEtlZXApIHsKICAgICRsb2dzRGlyID0gSm9pbi1QYXRoICRSZXBvUm9vdCAncWFcbG9ncycKICAgIGlmICgtbm90IChUZXN0LVBhdGggJGxvZ3NEaXIpKSB7IHJldHVybiB9CiAgICB0cnkgewogICAgICAgICRkaXJzID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkbG9nc0RpciAtRGlyZWN0b3J5IC1FcnJvckFjdGlvbiBTdG9wIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uTmFtZSAtbGlrZSAncnVuXyonIH0gfAogICAgICAgICAgICBTb3J0LU9iamVjdCBOYW1lIC1EZXNjZW5kaW5nCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkZhaWxlZCB0byBsaXN0IGxvZyBkaXJzOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgIHJldHVybgogICAgfQogICAgaWYgKCRkaXJzLkNvdW50IC1sZSAkS2VlcCkgeyByZXR1cm4gfQogICAgJHRvRGVsZXRlID0gJGRpcnMgfCBTZWxlY3QtT2JqZWN0IC1Ta2lwICRLZWVwCiAgICBmb3JlYWNoICgkZCBpbiAkdG9EZWxldGUpIHsKICAgICAgICB0cnkgeyBSZW1vdmUtSXRlbSAtUmVjdXJzZSAtRm9yY2UgJGQuRnVsbE5hbWUgLUVycm9yQWN0aW9uIFN0b3AgfQogICAgICAgIGNhdGNoIHsgV3JpdGUtV2FybiAoIkZhaWxlZCB0byByZW1vdmUgb2xkIGxvZyBkaXIgezB9OiB7MX0iIC1mICRkLkZ1bGxOYW1lLCAkXy5FeGNlcHRpb24uTWVzc2FnZSkgfQogICAgfQp9CgpmdW5jdGlvbiBTZXQtTG9jYWxFeGNsdWRlKFtzdHJpbmddJFJlcG9Sb290LCBbc3RyaW5nW11dJFBhdHRlcm5zKSB7CiAgICAkZXhjbHVkZVBhdGggPSBKb2luLVBhdGggJFJlcG9Sb290ICcuZ2l0XGluZm9cZXhjbHVkZScKICAgIHRyeSB7CiAgICAgICAgJGRpciA9IFNwbGl0LVBhdGggJGV4Y2x1ZGVQYXRoIC1QYXJlbnQKICAgICAgICBFbnN1cmUtRGlyICRkaXIKICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRleGNsdWRlUGF0aCkpIHsgTmV3LUl0ZW0gLUl0ZW1UeXBlIEZpbGUgLVBhdGggJGV4Y2x1ZGVQYXRoIC1Gb3JjZSB8IE91dC1OdWxsIH0KICAgICAgICAkZXhpc3RpbmcgPSBAKCkKICAgICAgICB0cnkgeyAkZXhpc3RpbmcgPSBHZXQtQ29udGVudCAkZXhjbHVkZVBhdGggLUVycm9yQWN0aW9uIFN0b3AgfSBjYXRjaCB7ICRleGlzdGluZyA9IEAoKSB9CiAgICAgICAgZm9yZWFjaCAoJHAgaW4gJFBhdHRlcm5zKSB7CiAgICAgICAgICAgIGlmICgtbm90ICgkZXhpc3RpbmcgLWNvbnRhaW5zICRwKSkgeyBBZGQtQ29udGVudCAtUGF0aCAkZXhjbHVkZVBhdGggLVZhbHVlICRwIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgdGhyb3cgKCJGYWlsZWQgdG8gdXBkYXRlIGxvY2FsIGdpdCBleGNsdWRlIGZpbGU6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICB9Cn0KCmZ1bmN0aW9uIE5ldy1Mb2dGaWxlUGF0aChbc3RyaW5nXSRQcmVmaXgsIFtzdHJpbmddJExvZ0RpcikgewogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJHNjcmlwdDpSdW5EaXIgfQogICAgaWYgKC1ub3QgJExvZ0RpcikgeyAkTG9nRGlyID0gJGVudjpURU1QIH0KICAgIEVuc3VyZS1EaXIgJExvZ0RpcgogICAgaWYgKC1ub3QgJHNjcmlwdDpMb2dDb3VudGVycy5Db250YWluc0tleSgkTG9nRGlyKSkgeyAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdID0gMCB9CiAgICAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdKysKICAgICRzYWZlID0gKCRQcmVmaXggLXJlcGxhY2UgJ1teYS16QS1aMC05Xy4tXScsJ18nKQogICAgcmV0dXJuIEpvaW4tUGF0aCAkTG9nRGlyICgiezA6MDAwfV97MX0ubG9nIiAtZiAkc2NyaXB0OkxvZ0NvdW50ZXJzWyRMb2dEaXJdLCAkc2FmZSkKfQoKZnVuY3Rpb24gV3JpdGUtTG9nVGFpbChbc3RyaW5nXSRMb2dQYXRoLCBbaW50XSRUYWlsTGluZXMpIHsKICAgIHRyeSB7CiAgICAgICAgJHRhaWwgPSBHZXQtQ29udGVudCAtUGF0aCAkTG9nUGF0aCAtVGFpbCAkVGFpbExpbmVzIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgaWYgKCR0YWlsKSB7CiAgICAgICAgICAgIFdyaXRlLUhvc3QgJ0xhc3QgbG9nIGxpbmVzOicgLUZvcmVncm91bmRDb2xvciBNYWdlbnRhCiAgICAgICAgICAgICR0YWlsIHwgRm9yRWFjaC1PYmplY3QgeyBXcml0ZS1Ib3N0ICRfIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtV2FybiAoIkNvdWxkIG5vdCByZWFkIGxvZyB0YWlsOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgfQp9CgpmdW5jdGlvbiBJbnZva2UtQ21kKFtzdHJpbmddJExhYmVsLCBbc3RyaW5nXSRDb21tYW5kLCBbc3RyaW5nXSRMb2dQYXRoID0gJG51bGwsIFtzdHJpbmddJExvZ0RpciA9ICRudWxsLCBbc3dpdGNoXSRBbGxvd0ZhaWx1cmUpIHsKICAgIGlmICgtbm90ICRMb2dQYXRoKSB7ICRMb2dQYXRoID0gTmV3LUxvZ0ZpbGVQYXRoICRMYWJlbCAkTG9nRGlyIH0KICAgICRsb2dQYXJlbnQgPSBTcGxpdC1QYXRoICRMb2dQYXRoIC1QYXJlbnQKICAgIEVuc3VyZS1EaXIgJGxvZ1BhcmVudAoKICAgIFdyaXRlLUhvc3QgJycKICAgIFdyaXRlLUhvc3QgKCItPiB7MH0iIC1mICRMYWJlbCkgLUZvcmVncm91bmRDb2xvciBDeWFuCiAgICBXcml0ZS1Ib3N0ICgiICAgJCB7MH0iIC1mICRDb21tYW5kKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5CgogICAgJHN0YXJ0ID0gR2V0LURhdGUKICAgICRyYXdPdXRwdXQgPSAmIGNtZC5leGUgL2MgJENvbW1hbmQgMj4mMQogICAgJGV4aXQgPSAkTEFTVEVYSVRDT0RFCiAgICAkZW5kID0gR2V0LURhdGUKCiAgICAkb3V0cHV0VGV4dCA9ICgkcmF3T3V0cHV0IHwgT3V0LVN0cmluZykKICAgIGlmICgkbnVsbCAtZXEgJG91dHB1dFRleHQpIHsgJG91dHB1dFRleHQgPSAnJyB9CiAgICAkb3V0cHV0VGV4dCA9ICRvdXRwdXRUZXh0LlRyaW0oKQogICAgJG91dHB1dExpbmVzID0gQCgpCiAgICBpZiAoJG91dHB1dFRleHQuTGVuZ3RoIC1ndCAwKSB7ICRvdXRwdXRMaW5lcyA9IFtyZWdleF06OlNwbGl0KCRvdXRwdXRUZXh0LCAnXHI/XG4nKSB9CiAgICAkaGVhZGVyID0gQCgKICAgICAgICAoIkNPTU1BTkQ6IHswfSIgLWYgJENvbW1hbmQpLAogICAgICAgICgiU1RBUlQ6IHswfSIgLWYgJHN0YXJ0KSwKICAgICAgICAoIkVORDogezB9IiAtZiAkZW5kKSwKICAgICAgICAoIkVYSVQ6IHswfSIgLWYgJGV4aXQpLAogICAgICAgICctLS0tJwogICAgKQogICAgJGhlYWRlciArICRvdXRwdXRMaW5lcyB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRW5jb2RpbmcgdXRmOAoKICAgIGlmICgkZXhpdCAtbmUgMCkgewogICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICBXcml0ZS1Ib3N0ICgiISEgRkFJTDogezB9IiAtZiAkTGFiZWwpIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkCiAgICAgICAgV3JpdGUtSG9zdCAoIkxvZzogezB9IiAtZiAkTG9nUGF0aCkgLUZvcmVncm91bmRDb2xvciBZZWxsb3cKICAgICAgICBpZiAoJE9wZW5Mb2dPbkZhaWwgLWFuZCAoR2V0LUNvbW1hbmQgY29kZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkpIHsKICAgICAgICAgICAgdHJ5IHsgV3JpdGUtSG9zdCAnT3BlbmluZyBsb2cgaW4gVlMgQ29kZS4uLicgLUZvcmVncm91bmRDb2xvciBDeWFuOyBjb2RlICRMb2dQYXRoIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gb3BlbiBsb2cgaW4gVlMgQ29kZS4nIH0KICAgICAgICB9CiAgICAgICAgV3JpdGUtSG9zdCAnJwogICAgICAgIFdyaXRlLUxvZ1RhaWwgJExvZ1BhdGggJFRhaWxMaW5lcwogICAgICAgIGlmICgtbm90ICRBbGxvd0ZhaWx1cmUpIHsgdGhyb3cgKCJBYm9ydGVkIGR1ZSB0byBlcnJvciBpbjogezB9IiAtZiAkTGFiZWwpIH0KICAgICAgICBXcml0ZS1XYXJuICgiQ29udGludWluZyBhZnRlciBub24tZmF0YWwgZmFpbHVyZSBpbjogezB9IiAtZiAkTGFiZWwpCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBXcml0ZS1Ib3N0ICgiT0s6IHswfSIgLWYgJExhYmVsKSAtRm9yZWdyb3VuZENvbG9yIEdyZWVuCiAgICB9CgogICAgcmV0dXJuIFtQU0N1c3RvbU9iamVjdF1AeyBFeGl0Q29kZSA9ICRleGl0OyBPdXRwdXQgPSAkb3V0cHV0TGluZXM7IE91dHB1dExpbmVzID0gJG91dHB1dExpbmVzOyBPdXRwdXRUZXh0ID0gJG91dHB1dFRleHQ7IExvZ1BhdGggPSAkTG9nUGF0aCB9Cn0KCmZ1bmN0aW9uIEludm9rZS1DbWRDYXB0dXJlKFtzdHJpbmddJExhYmVsLCBbc3RyaW5nXSRDb21tYW5kLCBbc3RyaW5nXSRMb2dQYXRoID0gJG51bGwsIFtzdHJpbmddJExvZ0RpciA9ICRudWxsLCBbc3dpdGNoXSRBbGxvd0ZhaWx1cmUpIHsKICAgIHJldHVybiBJbnZva2UtQ21kIC1MYWJlbCAkTGFiZWwgLUNvbW1hbmQgJENvbW1hbmQgLUxvZ1BhdGggJExvZ1BhdGggLUxvZ0RpciAkTG9nRGlyIC1BbGxvd0ZhaWx1cmU6JEFsbG93RmFpbHVyZQp9CgpmdW5jdGlvbiBUZXN0LUNvbW1hbmRFeGlzdHMoW3N0cmluZ10kQ21kKSB7IHJldHVybiBbYm9vbF0oR2V0LUNvbW1hbmQgJENtZCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgfQoKZnVuY3Rpb24gVGVzdC1Mb2NhbEJyYW5jaEV4aXN0cyhbc3RyaW5nXSRCcmFuY2hOYW1lKSB7CiAgICAkY2hlY2sgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IExvY2FsIEJyYW5jaCBFeGlzdHMnICgiZ2l0IHNob3ctcmVmIC0tdmVyaWZ5IC0tcXVpZXQgcmVmcy9oZWFkcy97MH0iIC1mICRCcmFuY2hOYW1lKSAtQWxsb3dGYWlsdXJlCiAgICByZXR1cm4gKCRjaGVjay5FeGl0Q29kZSAtZXEgMCkKfQoKZnVuY3Rpb24gVGVzdC1SZW1vdGVCcmFuY2hFeGlzdHMoW3N0cmluZ10kQnJhbmNoTmFtZSkgewogICAgJGNoZWNrID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBSZW1vdGUgQnJhbmNoIEV4aXN0cycgKCJnaXQgc2hvdy1yZWYgLS12ZXJpZnkgLS1xdWlldCByZWZzL3JlbW90ZXMvb3JpZ2luL3swfSIgLWYgJEJyYW5jaE5hbWUpIC1BbGxvd0ZhaWx1cmUKICAgIHJldHVybiAoJGNoZWNrLkV4aXRDb2RlIC1lcSAwKQp9CgpmdW5jdGlvbiBSZXNvbHZlLUJhc2VCcmFuY2goW3N0cmluZ10kUmVxdWVzdGVkLCBbc3RyaW5nXSRSZW1vdGVEZWZhdWx0KSB7CiAgICAkY2FuZGlkYXRlID0gaWYgKCRSZXF1ZXN0ZWQgLWFuZCAkUmVxdWVzdGVkLlRyaW0oKS5MZW5ndGggLWd0IDApIHsgJFJlcXVlc3RlZC5UcmltKCkgfSBlbHNlIHsgJFJlbW90ZURlZmF1bHQgfQogICAgaWYgKC1ub3QgJGNhbmRpZGF0ZSkgeyAkY2FuZGlkYXRlID0gJ21haW4nIH0KCiAgICBpZiAoLW5vdCAoVGVzdC1Mb2NhbEJyYW5jaEV4aXN0cyAkY2FuZGlkYXRlKSkgewogICAgICAgIGlmIChUZXN0LVJlbW90ZUJyYW5jaEV4aXN0cyAkY2FuZGlkYXRlKSB7CiAgICAgICAgICAgIEVuc3VyZS1Mb2NhbEJyYW5jaCAkY2FuZGlkYXRlIHwgT3V0LU51bGwKICAgICAgICAgICAgcmV0dXJuICRjYW5kaWRhdGUKICAgICAgICB9CgogICAgICAgICRmYWxsYmFjayA9ICcnCiAgICAgICAgaWYgKCRjYW5kaWRhdGUgLW5lICdtYWluJyAtYW5kIChUZXN0LVJlbW90ZUJyYW5jaEV4aXN0cyAnbWFpbicpKSB7ICRmYWxsYmFjayA9ICdtYWluJyB9CiAgICAgICAgZWxzZWlmICgkY2FuZGlkYXRlIC1uZSAnbWFzdGVyJyAtYW5kIChUZXN0LVJlbW90ZUJyYW5jaEV4aXN0cyAnbWFzdGVyJykpIHsgJGZhbGxiYWNrID0gJ21hc3RlcicgfQoKICAgICAgICBpZiAoJGZhbGxiYWNrKSB7CiAgICAgICAgICAgIFdyaXRlLVdhcm4gKCJCYXNlIGJyYW5jaCAnezB9JyBub3QgZm91bmQuIEZhbGxpbmcgYmFjayB0byAnezF9Jy4iIC1mICRjYW5kaWRhdGUsICRmYWxsYmFjaykKICAgICAgICAgICAgRW5zdXJlLUxvY2FsQnJhbmNoICRmYWxsYmFjayB8IE91dC1OdWxsCiAgICAgICAgICAgIHJldHVybiAkZmFsbGJhY2sKICAgICAgICB9CgogICAgICAgIHRocm93ICgiQmFzZSBicmFuY2ggJ3swfScgbm90IGZvdW5kIGxvY2FsbHkgb3Igb24gb3JpZ2luLiIgLWYgJGNhbmRpZGF0ZSkKICAgIH0KCiAgICByZXR1cm4gJGNhbmRpZGF0ZQp9CgpmdW5jdGlvbiBHZXQtTG9ja0ZpbGVQYXRoKFtzdHJpbmddJFJlcG9Sb290KSB7CiAgICByZXR1cm4gSm9pbi1QYXRoICRSZXBvUm9vdCAncWFcbG9nc1xnaXQtcHVzaC5sb2NrJwp9CgpmdW5jdGlvbiBBY3F1aXJlLVJ1bkxvY2soW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRsb2NrUGF0aCA9IEdldC1Mb2NrRmlsZVBhdGggJFJlcG9Sb290CiAgICAkbG9ja0RpciA9IFNwbGl0LVBhdGggJGxvY2tQYXRoIC1QYXJlbnQKICAgIEVuc3VyZS1EaXIgJGxvY2tEaXIKICAgIHRyeSB7CiAgICAgICAgJGZzID0gW1N5c3RlbS5JTy5GaWxlXTo6T3BlbigkbG9ja1BhdGgsIFtTeXN0ZW0uSU8uRmlsZU1vZGVdOjpPcGVuT3JDcmVhdGUsIFtTeXN0ZW0uSU8uRmlsZUFjY2Vzc106OlJlYWRXcml0ZSwgW1N5c3RlbS5JTy5GaWxlU2hhcmVdOjpOb25lKQogICAgICAgICRmcy5TZXRMZW5ndGgoMCkKICAgICAgICAkd3JpdGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uU3RyZWFtV3JpdGVyKCRmcywgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOCwgMTAyNCwgJHRydWUpCiAgICAgICAgJHdyaXRlci5Xcml0ZUxpbmUoInBpZD0kUElEIikKICAgICAgICAkd3JpdGVyLldyaXRlTGluZSgic3RhcnRlZD0kKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnKSIpCiAgICAgICAgJHdyaXRlci5GbHVzaCgpCiAgICAgICAgcmV0dXJuICRmcwogICAgfQogICAgY2F0Y2ggewogICAgICAgIHRocm93ICgiQW5vdGhlciBpbnN0YW5jZSBpcyBydW5uaW5nLiBMb2NrIGZpbGU6IHswfSIgLWYgJGxvY2tQYXRoKQogICAgfQp9CgpmdW5jdGlvbiBUcnktQWNxdWlyZVJ1bkxvY2soW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgIHRyeSB7IHJldHVybiBBY3F1aXJlLVJ1bkxvY2sgJFJlcG9Sb290IH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1XYXJuICRfLkV4Y2VwdGlvbi5NZXNzYWdlCiAgICAgICAgcmV0dXJuICRudWxsCiAgICB9Cn0KCmZ1bmN0aW9uIFJlbGVhc2UtUnVuTG9jaygkSGFuZGxlKSB7CiAgICBpZiAoJEhhbmRsZSkgewogICAgICAgIHRyeSB7ICRIYW5kbGUuRGlzcG9zZSgpIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gcmVsZWFzZSBsb2NrLicgfQogICAgfQp9CgpmdW5jdGlvbiBGaW5kLUdpdFJvb3QgewogICAgJGRpciA9IChHZXQtTG9jYXRpb24pLlBhdGgKICAgIHdoaWxlICgkdHJ1ZSkgewogICAgICAgIGlmIChUZXN0LVBhdGggKEpvaW4tUGF0aCAkZGlyICcuZ2l0JykpIHsgcmV0dXJuICRkaXIgfQogICAgICAgICRwYXJlbnQgPSBTcGxpdC1QYXRoICRkaXIgLVBhcmVudAogICAgICAgIGlmICgtbm90ICRwYXJlbnQgLW9yICRwYXJlbnQgLWVxICRkaXIpIHsgYnJlYWsgfQogICAgICAgICRkaXIgPSAkcGFyZW50CiAgICB9CiAgICB0aHJvdyAnTm90IGluc2lkZSBhIEdpdCByZXBvIChubyAuZ2l0IGZvdW5kKS4nCn0KCmZ1bmN0aW9uIFRlc3QtSW5HaXRSZXBvIHsKICAgICRyb290ID0gRmluZC1HaXRSb290CiAgICBTZXQtTG9jYXRpb24gJHJvb3QKICAgIHJldHVybiAkcm9vdAp9CgpmdW5jdGlvbiBHZXQtR2l0Q29udGV4dCB7CiAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICdnaXQnKSkgeyB0aHJvdyAnR2l0IENMSSBub3QgZm91bmQgaW4gUEFUSC4nIH0KICAgICRicmFuY2hSZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IEJyYW5jaCcgJ2dpdCBicmFuY2ggLS1zaG93LWN1cnJlbnQnCiAgICAkYnJhbmNoID0gKFtzdHJpbmddKCRicmFuY2hSZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkpLlRyaW0oKQogICAgaWYgKC1ub3QgJGJyYW5jaCkgeyB0aHJvdyAnTm8gY3VycmVudCBicmFuY2ggZGV0ZWN0ZWQgKGRldGFjaGVkIEhFQUQ/KS4nIH0KICAgICRvcmlnaW5SZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFJlbW90ZScgJ2dpdCByZW1vdGUgZ2V0LXVybCBvcmlnaW4nCiAgICAkb3JpZ2luID0gKFtzdHJpbmddKCRvcmlnaW5SZXMuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkpLlRyaW0oKQogICAgaWYgKC1ub3QgJG9yaWdpbikgeyB0aHJvdyAiUmVtb3RlICdvcmlnaW4nIG5vdCBmb3VuZC4iIH0KICAgIHJldHVybiBAeyBCcmFuY2ggPSAkYnJhbmNoOyBPcmlnaW4gPSAkb3JpZ2luIH0KfQoKZnVuY3Rpb24gR2V0LVJlbW90ZURlZmF1bHRCcmFuY2ggewogICAgJHJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmVtb3RlIEhFQUQnICdnaXQgc3ltYm9saWMtcmVmIC0tcXVpZXQgLS1zaG9ydCByZWZzL3JlbW90ZXMvb3JpZ2luL0hFQUQnIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkcmVzLkV4aXRDb2RlIC1lcSAwKSB7CiAgICAgICAgJGxpbmUgPSBbc3RyaW5nXSgkcmVzLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpCiAgICAgICAgJGJyYW5jaCA9ICRsaW5lLlRyaW0oKQogICAgICAgIGlmICgkYnJhbmNoKSB7CiAgICAgICAgICAgICRicmFuY2ggPSAkYnJhbmNoIC1yZXBsYWNlICdeb3JpZ2luLycsJycKICAgICAgICAgICAgaWYgKCRicmFuY2ggLWVxICdtYXN0ZXInIC1hbmQgKFRlc3QtUmVtb3RlQnJhbmNoRXhpc3RzICdtYWluJykpIHsgcmV0dXJuICdtYWluJyB9CiAgICAgICAgICAgIHJldHVybiAkYnJhbmNoCiAgICAgICAgfQogICAgfQogICAgaWYgKCRyZXMuRXhpdENvZGUgLW5lIDApIHsgV3JpdGUtV2FybiAnQ291bGQgbm90IHJlYWQgb3JpZ2luL0hFQUQgdmlhIHN5bWJvbGljLXJlZjsgZmFsbGluZyBiYWNrLicgfQogICAgJHJlczIgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFJlbW90ZSBTaG93JyAnZ2l0IHJlbW90ZSBzaG93IG9yaWdpbicgLUFsbG93RmFpbHVyZQogICAgaWYgKCRyZXMyLkV4aXRDb2RlIC1lcSAwKSB7CiAgICAgICAgZm9yZWFjaCAoJGxpbmUgaW4gJHJlczIuT3V0cHV0KSB7CiAgICAgICAgICAgICR0ZXh0ID0gW3N0cmluZ10kbGluZQogICAgICAgICAgICBpZiAoJHRleHQgLW1hdGNoICdIRUFEIGJyYW5jaDpccyooXFMrKVxzKiQnKSB7CiAgICAgICAgICAgICAgICAkYnJhbmNoID0gJE1hdGNoZXNbMV0KICAgICAgICAgICAgICAgIGlmICgkYnJhbmNoIC1lcSAnbWFzdGVyJyAtYW5kIChUZXN0LVJlbW90ZUJyYW5jaEV4aXN0cyAnbWFpbicpKSB7IHJldHVybiAnbWFpbicgfQogICAgICAgICAgICAgICAgcmV0dXJuICRicmFuY2gKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGlmIChUZXN0LVJlbW90ZUJyYW5jaEV4aXN0cyAnbWFpbicpIHsgcmV0dXJuICdtYWluJyB9CiAgICBpZiAoVGVzdC1SZW1vdGVCcmFuY2hFeGlzdHMgJ21hc3RlcicpIHsgcmV0dXJuICdtYXN0ZXInIH0KICAgIFdyaXRlLVdhcm4gJ0NvdWxkIG5vdCBkZXRlY3QgcmVtb3RlIGRlZmF1bHQgYnJhbmNoOyB1c2luZyBtYWluLicKICAgIHJldHVybiAnbWFpbicKfQoKZnVuY3Rpb24gRW5zdXJlLUxvY2FsQnJhbmNoKFtzdHJpbmddJEJyYW5jaE5hbWUpIHsKICAgIGlmIChUZXN0LUxvY2FsQnJhbmNoRXhpc3RzICRCcmFuY2hOYW1lKSB7IHJldHVybiAkQnJhbmNoTmFtZSB9CgogICAgaWYgKCREcnlSdW4pIHsKICAgICAgICBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IGZldGNoIG9yaWdpbiB7MH0gJiYgZ2l0IGNoZWNrb3V0IC1iIHswfSBvcmlnaW4vezB9IiAtZiAkQnJhbmNoTmFtZSkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgIHJldHVybiAkQnJhbmNoTmFtZQogICAgfQoKICAgIEludm9rZS1DbWQgJ0dpdCBGZXRjaCcgKCJnaXQgZmV0Y2ggb3JpZ2luIHswfSIgLWYgJEJyYW5jaE5hbWUpCiAgICBJbnZva2UtQ21kICdDaGVja291dCBiYXNlIGJyYW5jaCcgKCJnaXQgY2hlY2tvdXQgLWIgezB9IG9yaWdpbi97MH0iIC1mICRCcmFuY2hOYW1lKQogICAgcmV0dXJuICRCcmFuY2hOYW1lCn0KCmZ1bmN0aW9uIEdldC1TdGF0dXNQb3JjZWxhaW4oW3N0cmluZ10kTG9nRGlyID0gJG51bGwpIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFN0YXR1cyAocG9yY2VsYWluKScgJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nIC1Mb2dEaXIgJExvZ0RpcgogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0KfQoKZnVuY3Rpb24gR2V0LVN0YWdlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmYgKHN0YWdlZCknICdnaXQgZGlmZiAtLWNhY2hlZCAtLW5hbWUtb25seSAtLWRpZmYtZmlsdGVyPUFDTVJUVVhCJwogICAgcmV0dXJuICRyZXMuT3V0cHV0IHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1VbnN0YWdlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IERpZmYgKHVuc3RhZ2VkKScgJ2dpdCBkaWZmIC0tbmFtZS1vbmx5IC0tZGlmZi1maWx0ZXI9QUNNUlRVWEInCiAgICByZXR1cm4gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gR2V0LVVudHJhY2tlZEZpbGVzIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFVudHJhY2tlZCcgJ2dpdCBscy1maWxlcyAtLW90aGVycyAtLWV4Y2x1ZGUtc3RhbmRhcmQnCiAgICByZXR1cm4gJHJlcy5PdXRwdXQgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKSAtbmUgJycgfSB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gR2V0LUNoYW5nZWRGaWxlcyB7CiAgICAkYWxsID0gQCgpCiAgICAkYWxsICs9IEdldC1TdGFnZWRGaWxlcwogICAgJGFsbCArPSBHZXQtVW5zdGFnZWRGaWxlcwogICAgJGFsbCArPSBHZXQtVW50cmFja2VkRmlsZXMKICAgIHJldHVybiAkYWxsIHwgV2hlcmUtT2JqZWN0IHsgJF8gLWFuZCAkXy5UcmltKCkgLW5lICcnIH0gfCBTb3J0LU9iamVjdCAtVW5pcXVlCn0KCmZ1bmN0aW9uIEdldC1DaGFuZ2VkRmlsZXNTaW5jZUJhc2UoW3N0cmluZ10kQmFzZUJyYW5jaCkgewogICAgaWYgKC1ub3QgJEJhc2VCcmFuY2gpIHsgcmV0dXJuIEAoKSB9CiAgICAkbWIgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IE1lcmdlLUJhc2UnICgiZ2l0IG1lcmdlLWJhc2UgSEVBRCB7MH0iIC1mICRCYXNlQnJhbmNoKSAtQWxsb3dGYWlsdXJlCiAgICBpZiAoJG1iLkV4aXRDb2RlIC1uZSAwKSB7CiAgICAgICAgV3JpdGUtV2FybiAnQ291bGQgbm90IGNvbXB1dGUgbWVyZ2UtYmFzZS4nCiAgICAgICAgcmV0dXJuIEdldC1DaGFuZ2VkRmlsZXMKICAgIH0KICAgICRoYXNoID0gKFtzdHJpbmddKCRtYi5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKSkuVHJpbSgpCiAgICBpZiAoLW5vdCAkaGFzaCkgeyByZXR1cm4gR2V0LUNoYW5nZWRGaWxlcyB9CiAgICAkZGlmZiA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgRGlmZiAoYmFzZS4uSEVBRCknICgiZ2l0IGRpZmYgLS1uYW1lLW9ubHkgezB9IEhFQUQiIC1mICRoYXNoKQogICAgcmV0dXJuICRkaWZmLk91dHB1dCB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9IHwgU29ydC1PYmplY3QgLVVuaXF1ZQp9CgpmdW5jdGlvbiBOb3JtYWxpemUtUmVsUGF0aChbc3RyaW5nXSRQYXRoKSB7CiAgICBpZiAoLW5vdCAkUGF0aCkgeyByZXR1cm4gJycgfQogICAgJHAgPSAkUGF0aCAtcmVwbGFjZSAnXFwnLCcvJwogICAgJHAgPSAkcC5UcmltU3RhcnQoJy4vJykKICAgIHJldHVybiAkcAp9CgpmdW5jdGlvbiBHZXQtR3VhcmRJZ25vcmVQcmVmaXhlcyB7CiAgICByZXR1cm4gQCgKICAgICAgICAnLmdpdC8nLAogICAgICAgICdub2RlX21vZHVsZXMvJywKICAgICAgICAnZGlzdC8nLAogICAgICAgICdidWlsZC8nLAogICAgICAgICdvdXQvJywKICAgICAgICAnY292ZXJhZ2UvJywKICAgICAgICAnLmNhY2hlLycsCiAgICAgICAgJy5uZXh0LycsCiAgICAgICAgJ3FhL2xvZ3MvJwogICAgKQp9CgpmdW5jdGlvbiBUZXN0LUlzSWdub3JlZFBhdGgoW3N0cmluZ10kUGF0aCkgewogICAgJHAgPSBOb3JtYWxpemUtUmVsUGF0aCAkUGF0aAogICAgZm9yZWFjaCAoJHByZWZpeCBpbiAoR2V0LUd1YXJkSWdub3JlUHJlZml4ZXMpKSB7CiAgICAgICAgaWYgKCRwLlN0YXJ0c1dpdGgoJHByZWZpeCkpIHsgcmV0dXJuICR0cnVlIH0KICAgIH0KICAgIHJldHVybiAkZmFsc2UKfQoKZnVuY3Rpb24gVGVzdC1Eb2NzT25seUNoYW5nZShbc3RyaW5nW11dJFBhdGhzKSB7CiAgICBpZiAoLW5vdCAkUGF0aHMgLW9yICRQYXRocy5Db3VudCAtZXEgMCkgeyByZXR1cm4gJGZhbHNlIH0KICAgICRkb2NQYXR0ZXJucyA9IEAoCiAgICAgICAgJ14oUkVBRE1FfENIQU5HRUxPR3xMSUNFTlNFKVxiJywKICAgICAgICAnXmRvY3NbXFwvXScsCiAgICAgICAgJ15xYVtcXC9dJywKICAgICAgICAnXC5tZCQnLAogICAgICAgICdcLnR4dCQnLAogICAgICAgICdeXC4oZ2l0aWdub3JlfGdpdGF0dHJpYnV0ZXMpJCcKICAgICkKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgewogICAgICAgICRpc0RvYyA9ICRmYWxzZQogICAgICAgIGZvcmVhY2ggKCRyeCBpbiAkZG9jUGF0dGVybnMpIHsKICAgICAgICAgICAgaWYgKCRwIC1tYXRjaCAkcngpIHsgJGlzRG9jID0gJHRydWU7IGJyZWFrIH0KICAgICAgICB9CiAgICAgICAgaWYgKC1ub3QgJGlzRG9jKSB7IHJldHVybiAkZmFsc2UgfQogICAgfQogICAgcmV0dXJuICR0cnVlCn0KCmZ1bmN0aW9uIFRlc3QtVG91Y2hlZFNyYyhbc3RyaW5nW11dJFBhdGhzKSB7CiAgICBmb3JlYWNoICgkcCBpbiAkUGF0aHMpIHsgaWYgKCRwIC1tYXRjaCAnXnNyY1tcXC9dJykgeyByZXR1cm4gJHRydWUgfSB9CiAgICByZXR1cm4gJGZhbHNlCn0KCmZ1bmN0aW9uIFRlc3QtVG91Y2hlZENvbmZpZyhbc3RyaW5nW11dJFBhdGhzKSB7CiAgICBpZiAoLW5vdCAkUGF0aHMpIHsgcmV0dXJuICRmYWxzZSB9CiAgICAkcGF0dGVybnMgPSBAKAogICAgICAgICdecGFja2FnZVwuanNvbiQnLAogICAgICAgICdecGFja2FnZS1sb2NrXC5qc29uJCcsCiAgICAgICAgJ15wbnBtLWxvY2tcLnlhbWwkJywKICAgICAgICAnXnlhcm5cLmxvY2skJywKICAgICAgICAnXnRzY29uZmlnKFwuLispP1wuanNvbiQnLAogICAgICAgICdedml0ZVwuY29uZmlnXC4nLAogICAgICAgICdeZXNsaW50XC5jb25maWdcLicsCiAgICAgICAgJ15cLmVzbGludHJjJywKICAgICAgICAnXlwucHJldHRpZXJyYycsCiAgICAgICAgJ15cLmVkaXRvcmNvbmZpZyQnLAogICAgICAgICdeXC5ucG1yYyQnLAogICAgICAgICdeXC5udm1yYyQnLAogICAgICAgICdec2NyaXB0c1tcXC9dJywKICAgICAgICAnXmNvbmZpZ1tcXC9dJywKICAgICAgICAnXlwuZ2l0aHViW1xcL10nLAogICAgICAgICdeXC52c2NvZGVbXFwvXScKICAgICkKICAgIGZvcmVhY2ggKCRwIGluICRQYXRocykgewogICAgICAgICRuID0gTm9ybWFsaXplLVJlbFBhdGggJHAKICAgICAgICBmb3JlYWNoICgkcnggaW4gJHBhdHRlcm5zKSB7CiAgICAgICAgICAgIGlmICgkbiAtbWF0Y2ggJHJ4KSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICRmYWxzZQp9CgpmdW5jdGlvbiBUZXN0LUNvbW1pdE1lc3NhZ2UoW3N0cmluZ10kTXNnKSB7CiAgICBpZiAoLW5vdCAkTXNnKSB7IHJldHVybiB9CiAgICBpZiAoJE1zZyAtbWF0Y2ggJyg/aSlcYldJUFxiJykgeyB0aHJvdyAiQ29tbWl0IG1lc3NhZ2UgY29udGFpbnMgJ1dJUCcuIEJsb2NrZWQuIiB9Cn0KCmZ1bmN0aW9uIFRlc3QtQnJhbmNoUG9saWN5KFtzdHJpbmddJE1vZGVWYWx1ZSwgW3N0cmluZ10kQnJhbmNoKSB7CiAgICBpZiAoJE1vZGVWYWx1ZSAtZXEgJ1NhZmUnKSB7IHJldHVybiB9CiAgICBpZiAoJE1vZGVWYWx1ZSAtZXEgJ0Zhc3QnIC1hbmQgJEJyYW5jaCAtZXEgJ21haW4nIC1hbmQgLW5vdCAkQWxsb3dNYWluKSB7CiAgICAgICAgdGhyb3cgJ1lvdSBhcmUgb24gbWFpbi4gSW4gRmFzdCBtb2RlIHlvdSBtdXN0IHBhc3MgLUFsbG93TWFpbiB0byBhdXRvLWNvbW1pdC9wdXNoLicKICAgIH0KfQoKZnVuY3Rpb24gTmV3LUF1dG9CcmFuY2hOYW1lIHsgcmV0dXJuICgiYXV0by97MH0iIC1mIChHZXQtRGF0ZSAtRm9ybWF0ICd5eXl5TU1kZF9ISG1tc3MnKSkgfQoKZnVuY3Rpb24gSW52b2tlLUF1dG9QdWxsKFtzdHJpbmddJEJhc2VCcmFuY2gpIHsKICAgIGlmICgkTm9BdXRvUHVsbCkgeyByZXR1cm4gfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBwdWxsIC0tcmViYXNlIG9yaWdpbiB7MH0iIC1mICRCYXNlQnJhbmNoKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gfQogICAgSW52b2tlLUNtZCAnR2l0IFB1bGwgKHJlYmFzZSknICgiZ2l0IHB1bGwgLS1yZWJhc2Ugb3JpZ2luIHswfSIgLWYgJEJhc2VCcmFuY2gpCn0KCmZ1bmN0aW9uIEludm9rZS1BdXRvU3Rhc2goW3N3aXRjaF0kRW5hYmxlKSB7CiAgICBpZiAoLW5vdCAkRW5hYmxlKSB7IHJldHVybiAkZmFsc2UgfQogICAgJHBvcmNlbGFpbiA9IEdldC1TdGF0dXNQb3JjZWxhaW4KICAgIGlmICgtbm90ICRwb3JjZWxhaW4gLW9yICRwb3JjZWxhaW4uQ291bnQgLWVxIDApIHsgcmV0dXJuICRmYWxzZSB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgc3Rhc2ggcHVzaCAtdSAtbSAiYXV0b3N0YXNoIGdpdC1wdXNoLnBzMSInIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiAkdHJ1ZSB9CiAgICBJbnZva2UtQ21kICdHaXQgU3Rhc2gnICdnaXQgc3Rhc2ggcHVzaCAtdSAtbSAiYXV0b3N0YXNoIGdpdC1wdXNoLnBzMSInCiAgICByZXR1cm4gJHRydWUKfQoKZnVuY3Rpb24gSW52b2tlLUF1dG9Qb3BTdGFzaChbYm9vbF0kRGlkU3Rhc2gpIHsKICAgIGlmICgtbm90ICREaWRTdGFzaCkgeyByZXR1cm4gfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAnRFJZIFJVTjogZ2l0IHN0YXNoIHBvcCcgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuIH0KICAgIEludm9rZS1DbWQgJ0dpdCBTdGFzaCBQb3AnICdnaXQgc3Rhc2ggcG9wJwp9CgpmdW5jdGlvbiBRdW90ZS1DbWRBcmcoW3N0cmluZ10kcykgewogICAgaWYgKCRudWxsIC1lcSAkcykgeyByZXR1cm4gJyIiJyB9CiAgICAkdCA9ICRzLlJlcGxhY2UoJyInLCdcIicpCiAgICByZXR1cm4gJyInICsgJHQgKyAnIicKfQoKZnVuY3Rpb24gUmVzb2x2ZS1Fc2xpbnRDbWQoW3N0cmluZ10kUmVwb1Jvb3QpIHsKICAgICRsb2NhbCA9IEpvaW4tUGF0aCAkUmVwb1Jvb3QgJ25vZGVfbW9kdWxlc1wuYmluXGVzbGludC5jbWQnCiAgICBpZiAoVGVzdC1QYXRoICRsb2NhbCkgeyByZXR1cm4gJGxvY2FsIH0KICAgIHJldHVybiAnbnB4IC0tbm8taW5zdGFsbCBlc2xpbnQnCn0KCmZ1bmN0aW9uIEdldC1MaW50YWJsZUZpbGVzKFtzdHJpbmdbXV0kUGF0aHMpIHsKICAgICRvayA9IEAoJy5qcycsJy5qc3gnLCcudHMnLCcudHN4JywnLm1qcycsJy5janMnLCcubXRzJywnLmN0cycpCiAgICAkb3V0ID0gQCgpCiAgICBmb3JlYWNoICgkcCBpbiAkUGF0aHMpIHsKICAgICAgICAkZXh0ID0gW0lPLlBhdGhdOjpHZXRFeHRlbnNpb24oJHApLlRvTG93ZXJJbnZhcmlhbnQoKQogICAgICAgIGlmICgkb2sgLWNvbnRhaW5zICRleHQpIHsgJG91dCArPSAkcCB9CiAgICB9CiAgICByZXR1cm4gJG91dCB8IFNvcnQtT2JqZWN0IC1VbmlxdWUKfQoKZnVuY3Rpb24gSW52b2tlLVNtYXJ0TGludChbc3RyaW5nXSRSZXBvUm9vdCwgW3N0cmluZ1tdXSRDaGFuZ2VkRmlsZXMsIFtzdHJpbmddJFJ1bkRpcikgewogICAgJGxpbnRGaWxlcyA9IEdldC1MaW50YWJsZUZpbGVzICRDaGFuZ2VkRmlsZXMKICAgIGlmICgtbm90ICRsaW50RmlsZXMgLW9yICRsaW50RmlsZXMuQ291bnQgLWVxIDApIHsKICAgICAgICBXcml0ZS1TdGVwIDQ0ICdTbWFydCBMaW50OiBubyBKUy9UUyBmaWxlcyBjaGFuZ2VkLiBTa2lwLicKICAgICAgICByZXR1cm4KICAgIH0KCiAgICAkZXNsaW50ID0gUmVzb2x2ZS1Fc2xpbnRDbWQgJFJlcG9Sb290CgogICAgJGNodW5rU2l6ZSA9IDM1CiAgICAkY2h1bmtzID0gQCgpCiAgICBmb3IgKCRpID0gMDsgJGkgLWx0ICRsaW50RmlsZXMuQ291bnQ7ICRpICs9ICRjaHVua1NpemUpIHsKICAgICAgICAkZW5kID0gW01hdGhdOjpNaW4oJGkgKyAkY2h1bmtTaXplIC0gMSwgJGxpbnRGaWxlcy5Db3VudCAtIDEpCiAgICAgICAgJGNodW5rcyArPSAsICgkbGludEZpbGVzWyRpLi4kZW5kXSkKICAgIH0KCiAgICAkaWR4ID0gMAogICAgZm9yZWFjaCAoJGMgaW4gJGNodW5rcykgewogICAgICAgICRpZHgrKwogICAgICAgICRhcmdzID0gQCgnLS1tYXgtd2FybmluZ3M9MCcsICctLW5vLWVycm9yLW9uLXVubWF0Y2hlZC1wYXR0ZXJuJywgJy0tY2FjaGUnLCAnLS1jYWNoZS1sb2NhdGlvbicsICdxYS9lc2xpbnQuY2FjaGUnKQogICAgICAgICRxdW90ZWRGaWxlcyA9ICRjIHwgRm9yRWFjaC1PYmplY3QgeyBRdW90ZS1DbWRBcmcgJF8gfQogICAgICAgICRjbWQgPQogICAgICAgIGlmICgkZXNsaW50IC1saWtlICducHgqJykgewogICAgICAgICAgICAiezB9IHsxfSB7Mn0iIC1mICRlc2xpbnQsICgkYXJncyAtam9pbiAnICcpLCAoJHF1b3RlZEZpbGVzIC1qb2luICcgJykKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICJ7MH0gezF9IHsyfSIgLWYgKFF1b3RlLUNtZEFyZyAkZXNsaW50KSwgKCRhcmdzIC1qb2luICcgJyksICgkcXVvdGVkRmlsZXMgLWpvaW4gJyAnKQogICAgICAgIH0KCiAgICAgICAgV3JpdGUtU3RlcCA1MiAoIlNtYXJ0IExpbnQ6IGNodW5rIHswfS97MX0iIC1mICRpZHgsICRjaHVua3MuQ291bnQpCiAgICAgICAgSW52b2tlLUNtZCAnTGludCAoY2hhbmdlZCknICRjbWQKICAgIH0KfQoKZnVuY3Rpb24gR2V0LVBhY2thZ2VTY3JpcHRzKFtzdHJpbmddJFBhY2thZ2VKc29uUGF0aCkgewogICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkUGFja2FnZUpzb25QYXRoKSkgeyByZXR1cm4gQHt9IH0KICAgIHRyeSB7CiAgICAgICAgJGpzb24gPSBHZXQtQ29udGVudCAkUGFja2FnZUpzb25QYXRoIC1SYXcgfCBDb252ZXJ0RnJvbS1Kc29uCiAgICAgICAgaWYgKCRudWxsIC1lcSAkanNvbi5zY3JpcHRzKSB7IHJldHVybiBAe30gfQogICAgICAgICRzY3JpcHRzID0gQHt9CiAgICAgICAgJGpzb24uc2NyaXB0cy5QU09iamVjdC5Qcm9wZXJ0aWVzIHwgRm9yRWFjaC1PYmplY3QgeyAkc2NyaXB0c1skXy5OYW1lXSA9ICRfLlZhbHVlIH0KICAgICAgICByZXR1cm4gJHNjcmlwdHMKICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1XYXJuICgiRmFpbGVkIHRvIHBhcnNlIHBhY2thZ2UuanNvbiBzY3JpcHRzOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgICAgIHJldHVybiBAe30KICAgIH0KfQoKZnVuY3Rpb24gR2V0LVBhY2thZ2VWZXJzaW9uKFtzdHJpbmddJFBhY2thZ2VKc29uUGF0aCkgewogICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkUGFja2FnZUpzb25QYXRoKSkgeyByZXR1cm4gJycgfQogICAgdHJ5IHsKICAgICAgICAkanNvbiA9IEdldC1Db250ZW50ICRQYWNrYWdlSnNvblBhdGggLVJhdyB8IENvbnZlcnRGcm9tLUpzb24KICAgICAgICBpZiAoJGpzb24udmVyc2lvbikgeyByZXR1cm4gW3N0cmluZ10kanNvbi52ZXJzaW9uIH0KICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1XYXJuICgiRmFpbGVkIHRvIHBhcnNlIHBhY2thZ2UuanNvbiB2ZXJzaW9uOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKQogICAgfQogICAgcmV0dXJuICcnCn0KCmZ1bmN0aW9uIEludm9rZS1WZXJzaW9uQnVtcChbc3RyaW5nXSRCdW1wKSB7CiAgICBpZiAoJEJ1bXAgLWVxICdub25lJykgeyByZXR1cm4gfQogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnbnBtJykpIHsgdGhyb3cgJ25wbSBub3QgZm91bmQsIGNhbm5vdCBidW1wIHZlcnNpb24uJyB9CiAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogbnBtIHZlcnNpb24gezB9IC0tbm8tZ2l0LXRhZy12ZXJzaW9uIiAtZiAkQnVtcCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuIH0KICAgIEludm9rZS1DbWQgJ25wbSB2ZXJzaW9uIGJ1bXAnICgibnBtIHZlcnNpb24gezB9IC0tbm8tZ2l0LXRhZy12ZXJzaW9uIiAtZiAkQnVtcCkKfQoKZnVuY3Rpb24gSW52b2tlLUF1ZGl0KFtzdHJpbmddJExldmVsKSB7CiAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICducG0nKSkgeyByZXR1cm4gQHsgUmFuID0gJGZhbHNlOyBGYWlsZWQgPSAkZmFsc2U7IFRleHRMb2cgPSAnJzsgSnNvbkxvZyA9ICcnIH0gfQogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IG5wbSBhdWRpdCAtLWF1ZGl0LWxldmVsPXswfSIgLWYgJExldmVsKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gQHsgUmFuID0gJHRydWU7IEZhaWxlZCA9ICRmYWxzZTsgVGV4dExvZyA9ICcnOyBKc29uTG9nID0gJycgfSB9CgogICAgJGpzb25Mb2cgPSBKb2luLVBhdGggJHNjcmlwdDpSdW5EaXIgJ2F1ZGl0Lmpzb24ubG9nJwogICAgJHRleHRMb2cgPSBKb2luLVBhdGggJHNjcmlwdDpSdW5EaXIgJ2F1ZGl0LnR4dC5sb2cnCiAgICAkanNvblJlcyA9IEludm9rZS1DbWQgJ25wbSBhdWRpdCAoanNvbiknICducG0gYXVkaXQgLS1qc29uJyAkanNvbkxvZyAtQWxsb3dGYWlsdXJlCiAgICAkdGV4dFJlcyA9IEludm9rZS1DbWQgKCducG0gYXVkaXQgKGxldmVsPXswfSknIC1mICRMZXZlbCkgKCJucG0gYXVkaXQgLS1hdWRpdC1sZXZlbD17MH0iIC1mICRMZXZlbCkgJHRleHRMb2cgLUFsbG93RmFpbHVyZQogICAgJGZhaWxlZCA9ICgkanNvblJlcy5FeGl0Q29kZSAtbmUgMCAtb3IgJHRleHRSZXMuRXhpdENvZGUgLW5lIDApCiAgICByZXR1cm4gQHsgUmFuID0gJHRydWU7IEZhaWxlZCA9ICRmYWlsZWQ7IFRleHRMb2cgPSAkdGV4dExvZzsgSnNvbkxvZyA9ICRqc29uTG9nIH0KfQoKZnVuY3Rpb24gTmV3LUNoYW5nZWxvZyhbc3RyaW5nXSRQYXRoLCBbc3RyaW5nXSRNb2RlVmFsdWUsIFtzdHJpbmddJEJyYW5jaCwgW3N0cmluZ10kQmFzZUJyYW5jaCwgW3N0cmluZ10kTWVzc2FnZVZhbHVlLCBbc3RyaW5nW11dJEZpbGVzKSB7CiAgICAkbm93ID0gR2V0LURhdGUgLUZvcm1hdCAneXl5eS1NTS1kZCBISDptbTpzcycKICAgICRkaWZmTG9nID0gSm9pbi1QYXRoIChTcGxpdC1QYXRoICRQYXRoIC1QYXJlbnQpICdkaWZmc3RhdC5sb2cnCiAgICAkc3RhdFJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgRGlmZnN0YXQnICdnaXQgZGlmZiAtLWNhY2hlZCAtLXN0YXQnICRkaWZmTG9nIC1BbGxvd0ZhaWx1cmUKICAgICRzdGF0ID0gJHN0YXRSZXMuT3V0cHV0CgogICAgJGxpbmVzID0gQCgpCiAgICAkbGluZXMgKz0gJyMgQXV0byBDaGFuZ2Vsb2cnCiAgICAkbGluZXMgKz0gJycKICAgICRsaW5lcyArPSAiLSBEYXRlOiAkbm93IgogICAgJGxpbmVzICs9ICItIE1vZGU6ICRNb2RlVmFsdWUiCiAgICAkbGluZXMgKz0gIi0gQnJhbmNoOiAkQnJhbmNoIgogICAgJGxpbmVzICs9ICItIEJhc2U6ICRCYXNlQnJhbmNoIgogICAgJGxpbmVzICs9ICItIE1lc3NhZ2U6ICRNZXNzYWdlVmFsdWUiCiAgICAkbGluZXMgKz0gJycKICAgICRsaW5lcyArPSAnIyMgRmlsZXMnCiAgICBmb3JlYWNoICgkZiBpbiAkRmlsZXMpIHsgJGxpbmVzICs9ICItICRmIiB9CiAgICAkbGluZXMgKz0gJycKICAgICRsaW5lcyArPSAnIyMgRGlmZnN0YXQnCiAgICAkbGluZXMgKz0gJ2BgYCcKICAgIGlmICgkc3RhdCkgeyAkbGluZXMgKz0gJHN0YXQgfSBlbHNlIHsgJGxpbmVzICs9ICcobm8gZGlmZnN0YXQpJyB9CiAgICAkbGluZXMgKz0gJ2BgYCcKCiAgICAkbGluZXMgfCBPdXQtRmlsZSAtRmlsZVBhdGggJFBhdGggLUVuY29kaW5nIHV0ZjgKfQoKZnVuY3Rpb24gTmV3LVN1bW1hcnkoW3N0cmluZ10kUGF0aCwgW3N0cmluZ10kTW9kZVZhbHVlLCBbc3RyaW5nXSRCcmFuY2gsIFtzdHJpbmddJEJhc2VCcmFuY2gsIFtzdHJpbmddJENvbW1pdCwgW3N0cmluZ10kUHJVcmwsIFtzdHJpbmddJFJlbGVhc2VVcmwsIFtzdHJpbmddJFJ1bkRpciwgW2RhdGV0aW1lXSRTdGFydFRpbWUsIFtkYXRldGltZV0kRW5kVGltZSwgW2Jvb2xdJFdhc0RyeVJ1bikgewogICAgJGR1cmF0aW9uID0gW01hdGhdOjpSb3VuZCgoJEVuZFRpbWUgLSAkU3RhcnRUaW1lKS5Ub3RhbFNlY29uZHMsIDIpCiAgICAkbGluZXMgPSBAKCkKICAgICRsaW5lcyArPSAnIyBSdW4gU3VtbWFyeScKICAgICRsaW5lcyArPSAnJwogICAgJGxpbmVzICs9ICItIERhdGU6ICQoR2V0LURhdGUgLUZvcm1hdCAneXl5eS1NTS1kZCBISDptbTpzcycpIgogICAgJGxpbmVzICs9ICItIE1vZGU6ICRNb2RlVmFsdWUiCiAgICAkbGluZXMgKz0gIi0gQnJhbmNoOiAkQnJhbmNoIgogICAgJGxpbmVzICs9ICItIEJhc2U6ICRCYXNlQnJhbmNoIgogICAgJGxpbmVzICs9ICItIENvbW1pdDogJENvbW1pdCIKICAgICRsaW5lcyArPSAiLSBQUjogJFByVXJsIgogICAgJGxpbmVzICs9ICItIFJlbGVhc2U6ICRSZWxlYXNlVXJsIgogICAgJGxpbmVzICs9ICItIERyeVJ1bjogJFdhc0RyeVJ1biIKICAgICRsaW5lcyArPSAiLSBEdXJhdGlvblNlYzogJGR1cmF0aW9uIgogICAgJGxpbmVzICs9ICItIExvZ3M6ICRSdW5EaXIiCiAgICAkbGluZXMgfCBPdXQtRmlsZSAtRmlsZVBhdGggJFBhdGggLUVuY29kaW5nIHV0ZjgKfQoKZnVuY3Rpb24gSW52b2tlLVRhZyhbc3RyaW5nXSRWZXJzaW9uKSB7CiAgICBpZiAoLW5vdCAkVmVyc2lvbikgeyB0aHJvdyAnQ2Fubm90IHRhZyB3aXRob3V0IHZlcnNpb24uJyB9CiAgICAkdGFnTmFtZSA9ICJ2JFZlcnNpb24iCiAgICAkZXhpc3RpbmcgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFRhZyBMaXN0JyAoImdpdCB0YWcgLWwgezB9IiAtZiAkdGFnTmFtZSkKICAgICRmaXJzdFRhZyA9IChbc3RyaW5nXSgkZXhpc3RpbmcuT3V0cHV0IHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMSkpLlRyaW0oKQogICAgaWYgKCRleGlzdGluZy5PdXRwdXQgLWFuZCAkZmlyc3RUYWcgLWVxICR0YWdOYW1lKSB7IHRocm93ICgiVGFnIHswfSBhbHJlYWR5IGV4aXN0cy4iIC1mICR0YWdOYW1lKSB9CgogICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoJ0RSWSBSVU46IGdpdCB0YWcgLWEgezB9IC1tICJSZWxlYXNlIHswfSInIC1mICR0YWdOYW1lKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5OyByZXR1cm4gJHRhZ05hbWUgfQogICAgJGNtZCA9ICdnaXQgdGFnIC1hICJ7MH0iIC1tICJSZWxlYXNlIHswfSInIC1mICR0YWdOYW1lCiAgICBJbnZva2UtQ21kICdHaXQgVGFnJyAkY21kCiAgICByZXR1cm4gJHRhZ05hbWUKfQoKZnVuY3Rpb24gSW52b2tlLVB1c2hUYWcoW3N0cmluZ10kVGFnTmFtZSkgewogICAgaWYgKC1ub3QgJFRhZ05hbWUpIHsgcmV0dXJuIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaXQgcHVzaCBvcmlnaW4gezB9IiAtZiAkVGFnTmFtZSkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheTsgcmV0dXJuIH0KICAgIEludm9rZS1DbWQgJ1B1c2ggVGFnJyAoImdpdCBwdXNoIG9yaWdpbiB7MH0iIC1mICRUYWdOYW1lKQp9CgpmdW5jdGlvbiBJbnZva2UtT3BlblByKFtzdHJpbmddJEJhc2VCcmFuY2gsIFtzdHJpbmddJEhlYWRCcmFuY2gsIFtzdHJpbmddJEJvZHlGaWxlKSB7CiAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICdnaCcpKSB7IHRocm93ICdnaCBDTEkgbm90IGZvdW5kLiBJbnN0YWxsIGl0IG9yIGNyZWF0ZSBQUiBtYW51YWxseS4nIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdoIHByIGNyZWF0ZSAuLi4nIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiAkbnVsbCB9CiAgICAkY21kID0gJ2doIHByIGNyZWF0ZSAtLWJhc2UgInswfSIgLS1oZWFkICJ7MX0iIC0tdGl0bGUgInsyfSIgLS1ib2R5LWZpbGUgInszfSInIC1mICRCYXNlQnJhbmNoLCAkSGVhZEJyYW5jaCwgJEhlYWRCcmFuY2gsICRCb2R5RmlsZQogICAgSW52b2tlLUNtZCAnR2l0SHViIFBSIENyZWF0ZScgJGNtZAogICAgJHVybFJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXRIdWIgUFIgVVJMJyAnZ2ggcHIgdmlldyAtLWpzb24gdXJsIC0tanEgLnVybCcgLUFsbG93RmFpbHVyZQogICAgaWYgKCR1cmxSZXMuRXhpdENvZGUgLWVxIDApIHsgcmV0dXJuIChbc3RyaW5nXSgkdXJsUmVzLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpKS5UcmltKCkgfQogICAgcmV0dXJuICRudWxsCn0KCmZ1bmN0aW9uIEludm9rZS1PcGVuUHJJbkJyb3dzZXIgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnZ2gnKSkgeyBXcml0ZS1XYXJuICdnaCBDTEkgbm90IGZvdW5kIGZvciBQUiB2aWV3Lic7IHJldHVybiB9CiAgICBJbnZva2UtQ21kICdHaXRIdWIgUFIgVmlldyAod2ViKScgJ2doIHByIHZpZXcgLS13ZWInIC1BbGxvd0ZhaWx1cmUKfQoKZnVuY3Rpb24gSW52b2tlLUNyZWF0ZVJlbGVhc2UoW3N0cmluZ10kVGFnTmFtZSkgewogICAgaWYgKC1ub3QgKFRlc3QtQ29tbWFuZEV4aXN0cyAnZ2gnKSkgeyB0aHJvdyAnZ2ggQ0xJIG5vdCBmb3VuZCBmb3IgUmVsZWFzZSBjcmVhdGlvbi4nIH0KICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgKCJEUlkgUlVOOiBnaCByZWxlYXNlIGNyZWF0ZSB7MH0gLS1nZW5lcmF0ZS1ub3RlcyIgLWYgJFRhZ05hbWUpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXk7IHJldHVybiAkbnVsbCB9CiAgICAkY21kID0gJ2doIHJlbGVhc2UgY3JlYXRlICJ7MH0iIC0tdGl0bGUgInswfSIgLS1nZW5lcmF0ZS1ub3RlcycgLWYgJFRhZ05hbWUKICAgIEludm9rZS1DbWQgJ0dpdEh1YiBSZWxlYXNlIENyZWF0ZScgJGNtZAogICAgJHVybFJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXRIdWIgUmVsZWFzZSBVUkwnICgiZ2ggcmVsZWFzZSB2aWV3IHswfSAtLWpzb24gdXJsIC0tanEgLnVybCIgLWYgJFRhZ05hbWUpIC1BbGxvd0ZhaWx1cmUKICAgIGlmICgkdXJsUmVzLkV4aXRDb2RlIC1lcSAwKSB7IHJldHVybiAoW3N0cmluZ10oJHVybFJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKSkuVHJpbSgpIH0KICAgIHJldHVybiAkbnVsbAp9CgpmdW5jdGlvbiBOZXctQ29tbWl0TWVzc2FnZShbc3RyaW5nXSRGYWxsYmFjaywgW3N0cmluZ1tdXSRTdGFnZWRGaWxlcykgewogICAgJHN0YW1wID0gR2V0LURhdGUgLUZvcm1hdCAneXl5eS1NTS1kZCBISDptbScKICAgIGlmICgkRmFsbGJhY2sgLWFuZCAkRmFsbGJhY2suVHJpbSgpLkxlbmd0aCAtZ3QgMCkgeyByZXR1cm4gJEZhbGxiYWNrLlRyaW0oKSB9CgogICAgJHRvcCA9ICRTdGFnZWRGaWxlcyB8CiAgICAgICAgRm9yRWFjaC1PYmplY3QgeyAoJF8gLXNwbGl0ICJbL1xcXSIpWzBdIH0gfAogICAgICAgIFdoZXJlLU9iamVjdCB7ICRfIH0gfAogICAgICAgIEdyb3VwLU9iamVjdCB8CiAgICAgICAgU29ydC1PYmplY3QgQ291bnQgLURlc2NlbmRpbmcgfAogICAgICAgIFNlbGVjdC1PYmplY3QgLUZpcnN0IDMKCiAgICAkdGFnID0gaWYgKCR0b3AuQ291bnQgLWd0IDApIHsgKCR0b3AgfCBGb3JFYWNoLU9iamVjdCB7ICRfLk5hbWUgfSkgLWpvaW4gJywnIH0gZWxzZSB7ICdyZXBvJyB9CiAgICByZXR1cm4gImNob3JlKCR0YWcpOiBhdXRvIHVwZGF0ZSAkc3RhbXAiCn0KCmZ1bmN0aW9uIFdyaXRlLVJ1blN1bW1hcnkoW3N0cmluZ10kQnJhbmNoLCBbc3RyaW5nXSRPcmlnaW4sIFtzdHJpbmddJFJ1bkRpcikgewogICAgV3JpdGUtSG9zdCAnJwogICAgV3JpdGUtSG9zdCAnU3VtbWFyeTonIC1Gb3JlZ3JvdW5kQ29sb3IgQ3lhbgogICAgV3JpdGUtSG9zdCAoIi0gQnJhbmNoOiB7MH0iIC1mICRCcmFuY2gpCiAgICBXcml0ZS1Ib3N0ICgiLSBSZW1vdGU6IHswfSIgLWYgJE9yaWdpbikKICAgICRoZWFkUmVzID0gSW52b2tlLUNtZENhcHR1cmUgJ0dpdCBSZXYtUGFyc2UnICdnaXQgcmV2LXBhcnNlIEhFQUQnCiAgICAkaGVhZCA9IChbc3RyaW5nXSgkaGVhZFJlcy5PdXRwdXQgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxKSkuVHJpbSgpCiAgICBpZiAoJGhlYWQpIHsgV3JpdGUtSG9zdCAoIi0gQ29tbWl0OiB7MH0iIC1mICRoZWFkLlN1YnN0cmluZygwLCBbTWF0aF06Ok1pbig4LCAkaGVhZC5MZW5ndGgpKSkgfQogICAgV3JpdGUtSG9zdCAoIi0gTG9nczogezB9IiAtZiAkUnVuRGlyKQogICAgV3JpdGUtSG9zdCAnJwogICAgJHN0YXR1c1JlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgU3RhdHVzIChzaG9ydCknICdnaXQgc3RhdHVzIC1zYicKICAgIGlmICgkc3RhdHVzUmVzLk91dHB1dCkgeyAkc3RhdHVzUmVzLk91dHB1dCB8IEZvckVhY2gtT2JqZWN0IHsgV3JpdGUtSG9zdCAkXyB9IH0KfQoKZnVuY3Rpb24gR2V0LUhlYWRDb21taXQgewogICAgJHJlcyA9IEludm9rZS1DbWRDYXB0dXJlICdHaXQgUmV2LVBhcnNlJyAnZ2l0IHJldi1wYXJzZSBIRUFEJwogICAgcmV0dXJuIChbc3RyaW5nXSgkcmVzLk91dHB1dCB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDEpKS5UcmltKCkKfQoKZnVuY3Rpb24gVGVzdC1Jc0JpbmFyeShbc3RyaW5nXSRQYXRoKSB7CiAgICAkZnMgPSAkbnVsbAogICAgdHJ5IHsKICAgICAgICAkZnMgPSBbU3lzdGVtLklPLkZpbGVdOjpPcGVuUmVhZCgkUGF0aCkKICAgICAgICAkYnVmZmVyID0gTmV3LU9iamVjdCBieXRlW10gODAwMAogICAgICAgICRyZWFkID0gJGZzLlJlYWQoJGJ1ZmZlciwgMCwgJGJ1ZmZlci5MZW5ndGgpCiAgICAgICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkcmVhZDsgJGkrKykgewogICAgICAgICAgICBpZiAoJGJ1ZmZlclskaV0gLWVxIDApIHsgcmV0dXJuICR0cnVlIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuICRmYWxzZQogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVdhcm4gKCJDb3VsZCBub3QgaW5zcGVjdCBmaWxlIGZvciBiaW5hcnkgZGF0YTogezB9IiAtZiAkUGF0aCkKICAgICAgICByZXR1cm4gJHRydWUKICAgIH0KICAgIGZpbmFsbHkgewogICAgICAgIGlmICgkZnMpIHsgJGZzLkRpc3Bvc2UoKSB9CiAgICB9Cn0KCmZ1bmN0aW9uIFRlc3QtSXNUZXh0RmlsZShbc3RyaW5nXSRQYXRoKSB7CiAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRQYXRoKSkgeyByZXR1cm4gJGZhbHNlIH0KICAgICRleHQgPSBbSU8uUGF0aF06OkdldEV4dGVuc2lvbigkUGF0aCkuVG9Mb3dlckludmFyaWFudCgpCiAgICAkYmluYXJ5RXh0ID0gQCgnLnBuZycsJy5qcGcnLCcuanBlZycsJy5naWYnLCcud2VicCcsJy5wZGYnLCcuemlwJywnLjd6JywnLnJhcicsJy5leGUnLCcuZGxsJywnLmJpbicsJy5tcDQnLCcubW92JywnLmljbycsJy5zdmcnLCcucHNkJywnLmFpJywnLnR0ZicsJy53b2ZmJywnLndvZmYyJykKICAgIGlmICgkYmluYXJ5RXh0IC1jb250YWlucyAkZXh0KSB7IHJldHVybiAkZmFsc2UgfQogICAgaWYgKFRlc3QtSXNCaW5hcnkgJFBhdGgpIHsgcmV0dXJuICRmYWxzZSB9CiAgICByZXR1cm4gJHRydWUKfQoKZnVuY3Rpb24gUmVkYWN0LUxpbmUoW3N0cmluZ10kTGluZSkgewogICAgJHJlZCA9ICRMaW5lCiAgICAkcmVkID0gJHJlZCAtcmVwbGFjZSAnKD9pKShBdXRob3JpemF0aW9uOilccytcUysnLCAnJDEgW1JFREFDVEVEXScKICAgICRyZWQgPSAkcmVkIC1yZXBsYWNlICcoW0EtWmEtejAtOV8tXXsxMix9KScsICdbUkVEQUNURURdJwogICAgcmV0dXJuICRyZWQKfQoKZnVuY3Rpb24gR2V0LVBhdGhzRm9yR3VhcmRzIHsKICAgICRzdGFnZWQgPSBHZXQtU3RhZ2VkRmlsZXMKICAgIGlmICgkc3RhZ2VkIC1hbmQgJHN0YWdlZC5Db3VudCAtZ3QgMCkgeyByZXR1cm4gJHN0YWdlZCB9CiAgICByZXR1cm4gR2V0LUNoYW5nZWRGaWxlcwp9CgpmdW5jdGlvbiBUZXN0LVNlY3JldHMoW3N0cmluZ1tdXSRQYXRocywgW3N0cmluZ10kTG9nUGF0aCkgewogICAgJHBhdHRlcm5zID0gQCgKICAgICAgICAnKD9pKUFQSV9LRVknLAogICAgICAgICcoP2kpU0VDUkVUJywKICAgICAgICAnKD9pKVRPS0VOJywKICAgICAgICAnKD9pKVBBU1NXT1JEJywKICAgICAgICAnKD9pKUJFR0lOIFBSSVZBVEUgS0VZJywKICAgICAgICAnKD9pKUF1dGhvcml6YXRpb246JywKICAgICAgICAneG94W2JhcHJzXS0nLAogICAgICAgICdnaHBfJywKICAgICAgICAnZ2l0aHViX3BhdF8nLAogICAgICAgICdzay1bQS1aYS16MC05XXsxMCx9JywKICAgICAgICAnQUtJQVswLTlBLVpdezE2fScKICAgICkKICAgICRoaXRzID0gQCgpCiAgICBmb3JlYWNoICgkcCBpbiAkUGF0aHMpIHsKICAgICAgICBpZiAoLW5vdCAkcCkgeyBjb250aW51ZSB9CiAgICAgICAgaWYgKFRlc3QtSXNJZ25vcmVkUGF0aCAkcCkgeyBjb250aW51ZSB9CiAgICAgICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkcCkpIHsgV3JpdGUtV2FybiAoIlNraXBwZWQgbWlzc2luZyBmaWxlOiB7MH0iIC1mICRwKTsgY29udGludWUgfQogICAgICAgIGlmICgtbm90IChUZXN0LUlzVGV4dEZpbGUgJHApKSB7IGNvbnRpbnVlIH0KICAgICAgICAkbGluZU51bSA9IDAKICAgICAgICB0cnkgewogICAgICAgICAgICAkY29udGVudCA9IEdldC1Db250ZW50IC1QYXRoICRwIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgfQogICAgICAgIGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgKCJGYWlsZWQgdG8gcmVhZCBmaWxlIGZvciBzZWNyZXQgc2NhbjogezB9IiAtZiAkcCkKICAgICAgICB9CiAgICAgICAgZm9yZWFjaCAoJGxpbmUgaW4gJGNvbnRlbnQpIHsKICAgICAgICAgICAgJGxpbmVOdW0rKwogICAgICAgICAgICBmb3JlYWNoICgkcGF0IGluICRwYXR0ZXJucykgewogICAgICAgICAgICAgICAgaWYgKCRsaW5lIC1tYXRjaCAkcGF0KSB7CiAgICAgICAgICAgICAgICAgICAgJHJlZCA9IFJlZGFjdC1MaW5lICRsaW5lCiAgICAgICAgICAgICAgICAgICAgJGhpdHMgKz0gKCJ7MH06ezF9OiBwYXR0ZXJuICd7Mn0nIC0+IHszfSIgLWYgJHAsICRsaW5lTnVtLCAkcGF0LCAkcmVkKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgaWYgKCRoaXRzLkNvdW50IC1ndCAwKSB7CiAgICAgICAgJGhpdHMgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUVuY29kaW5nIHV0ZjgKICAgICAgICB0aHJvdyAoIlNlY3JldC1saWtlIGNvbnRlbnQgZGV0ZWN0ZWQuIExvZzogezB9IiAtZiAkTG9nUGF0aCkKICAgIH0KICAgICdObyBzZWNyZXQtbGlrZSBtYXRjaGVzIGZvdW5kLicgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUVuY29kaW5nIHV0ZjgKfQoKZnVuY3Rpb24gVGVzdC1MYXJnZUZpbGVzKFtzdHJpbmdbXV0kUGF0aHMsIFtpbnRdJE1heE1CLCBbc3RyaW5nXSRMb2dQYXRoKSB7CiAgICAkbGltaXQgPSAkTWF4TUIgKiAxMDI0ICogMTAyNAogICAgJGxhcmdlID0gQCgpCiAgICBmb3JlYWNoICgkcCBpbiAkUGF0aHMpIHsKICAgICAgICBpZiAoLW5vdCAkcCkgeyBjb250aW51ZSB9CiAgICAgICAgaWYgKFRlc3QtSXNJZ25vcmVkUGF0aCAkcCkgeyBjb250aW51ZSB9CiAgICAgICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkcCkpIHsgV3JpdGUtV2FybiAoIlNraXBwZWQgbWlzc2luZyBmaWxlOiB7MH0iIC1mICRwKTsgY29udGludWUgfQogICAgICAgICRpdGVtID0gR2V0LUl0ZW0gJHAgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICBpZiAoJGl0ZW0uUFNJc0NvbnRhaW5lcikgeyBjb250aW51ZSB9CiAgICAgICAgaWYgKCRpdGVtLkxlbmd0aCAtZ3QgJGxpbWl0KSB7ICRsYXJnZSArPSAoInswfSAoezE6TjJ9IE1CKSIgLWYgJHAsICgkaXRlbS5MZW5ndGggLyAxTUIpKSB9CiAgICB9CiAgICBpZiAoJGxhcmdlLkNvdW50IC1ndCAwKSB7ICRsYXJnZSB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRW5jb2RpbmcgdXRmODsgdGhyb3cgKCJMYXJnZSBmaWxlIGd1YXJkIHRyaWdnZXJlZC4gTG9nOiB7MH0iIC1mICRMb2dQYXRoKSB9CiAgICAnTm8gb3ZlcnNpemVkIGZpbGVzIGluIGNoYW5nZWQgc2V0LicgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUVuY29kaW5nIHV0ZjgKfQoKZnVuY3Rpb24gR2V0LVN0YXR1c1NpZ25hdHVyZShbc3RyaW5nXSRMb2dEaXIpIHsKICAgICRyZXMgPSBJbnZva2UtQ21kQ2FwdHVyZSAnR2l0IFN0YXR1cyAod2F0Y2gpJyAnZ2l0IHN0YXR1cyAtLXBvcmNlbGFpbicgLUxvZ0RpciAkTG9nRGlyCiAgICAkbGluZXMgPSAkcmVzLk91dHB1dCB8IFdoZXJlLU9iamVjdCB7ICRfIC1hbmQgJF8uVHJpbSgpIC1uZSAnJyB9IHwgU29ydC1PYmplY3QKICAgIGlmICgtbm90ICRsaW5lcyAtb3IgJGxpbmVzLkNvdW50IC1lcSAwKSB7IHJldHVybiAnJyB9CiAgICByZXR1cm4gKCRsaW5lcyAtam9pbiBbRW52aXJvbm1lbnRdOjpOZXdMaW5lKQp9CgpmdW5jdGlvbiBJbnZva2UtR2l0QXV0b1B1c2hPbmNlKFtzd2l0Y2hdJEZyb21XYXRjaCkgewogICAgJHJ1bkRpciA9ICRudWxsCiAgICAkbG9ja0hhbmRsZSA9ICRudWxsCiAgICAkc3RhcnRUaW1lID0gR2V0LURhdGUKICAgICRzY3JpcHQ6UnVuU3RhcnQgPSAkc3RhcnRUaW1lCgogICAgdHJ5IHsKICAgICAgICBXcml0ZS1TdGVwIDIgJ0xvY2F0ZSByZXBvJwogICAgICAgICRyb290ID0gVGVzdC1JbkdpdFJlcG8KICAgICAgICAkc2NyaXB0OlJvb3QgPSAkcm9vdAoKICAgICAgICBXcml0ZS1TdGVwIDQgJ1ByZXBhcmUgbG9ncycKICAgICAgICBSZW1vdmUtT2xkTG9nUnVucyAkcm9vdCAkS2VlcExvZ1J1bnMKICAgICAgICAkcnVuRGlyID0gTmV3LVJ1bkxvZ0RpciAkcm9vdAogICAgICAgICRzY3JpcHQ6UnVuRGlyID0gJHJ1bkRpcgogICAgICAgICRzY3JpcHQ6TG9nQ291bnRlcnMgPSBAe30KICAgICAgICBTZXQtTG9jYWxFeGNsdWRlICRyb290IEAoJ3FhL2xvZ3MvJywgJ3FhL2VzbGludC5jYWNoZScsICcuZXNsaW50Y2FjaGUnLCAnLmNhY2hlLycpCgogICAgICAgIGlmICgkRnJvbVdhdGNoKSB7ICRsb2NrSGFuZGxlID0gVHJ5LUFjcXVpcmVSdW5Mb2NrICRyb290IH0gZWxzZSB7ICRsb2NrSGFuZGxlID0gQWNxdWlyZS1SdW5Mb2NrICRyb290IH0KICAgICAgICBpZiAoLW5vdCAkbG9ja0hhbmRsZSkgewogICAgICAgICAgICBXcml0ZS1XYXJuICdMb2NrIGlzIGhlbGQgYnkgYW5vdGhlciBwcm9jZXNzLiBTa2lwcGluZyBydW4uJwogICAgICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2gnIC1Db21wbGV0ZWQKICAgICAgICAgICAgcmV0dXJuIDIKICAgICAgICB9CiAgICAgICAgJHNjcmlwdDpSdW5Mb2NrSGFuZGxlID0gJGxvY2tIYW5kbGUKCiAgICAgICAgV3JpdGUtU3RlcCA2ICdSZWFkIEdpdCBjb250ZXh0JwogICAgICAgICRjdHggPSBHZXQtR2l0Q29udGV4dAogICAgICAgICRicmFuY2ggPSAkY3R4LkJyYW5jaAogICAgICAgICRvcmlnaW4gPSAkY3R4Lk9yaWdpbgoKICAgICAgICBUZXN0LUJyYW5jaFBvbGljeSAkTW9kZSAkYnJhbmNoCgogICAgICAgICRyZW1vdGVEZWZhdWx0ID0gR2V0LVJlbW90ZURlZmF1bHRCcmFuY2gKICAgICAgICAkYmFzZSA9IFJlc29sdmUtQmFzZUJyYW5jaCAkQmFzZUJyYW5jaCAkcmVtb3RlRGVmYXVsdAoKICAgICAgICBpZiAoJHJlbW90ZURlZmF1bHQgLW5lICdtYWluJykgewogICAgICAgICAgICBXcml0ZS1XYXJuICgiUmVtb3RlIGRlZmF1bHQgYnJhbmNoIGlzICd7MH0nIChub3QgJ21haW4nKS4iIC1mICRyZW1vdGVEZWZhdWx0KQogICAgICAgICAgICBXcml0ZS1Ib3N0ICdJZiB5b3Ugd2FudCBtYWluLCB1cGRhdGUgR2l0SHViIFNldHRpbmdzID4gQnJhbmNoZXMgPiBEZWZhdWx0IGJyYW5jaC4nIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya1llbGxvdwogICAgICAgIH0KCiAgICAgICAgaWYgKCRGaXhSZW1vdGVIZWFkTWFpbikgewogICAgICAgICAgICBXcml0ZS1TdGVwIDggJ0ZpeCBvcmlnaW4vSEVBRCAobG9jYWwpIHRvIG1haW4nCiAgICAgICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCByZW1vdGUgc2V0LWhlYWQgb3JpZ2luIG1haW4nIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnRml4IG9yaWdpbi9IRUFEIC0+IG1haW4gKGxvY2FsKScgJ2dpdCByZW1vdGUgc2V0LWhlYWQgb3JpZ2luIG1haW4nIH0KICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgMTAgJ0NoZWNrIGZvciBjaGFuZ2VzJwogICAgICAgICRwb3JjZWxhaW4gPSBHZXQtU3RhdHVzUG9yY2VsYWluCiAgICAgICAgaWYgKC1ub3QgJHBvcmNlbGFpbiAtb3IgJHBvcmNlbGFpbi5Db3VudCAtZXEgMCkgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnTm8gY2hhbmdlcyB0byBwdXNoJwogICAgICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2gnIC1Db21wbGV0ZWQKICAgICAgICAgICAgSW52b2tlLVRvYXN0ICdHaXQgQXV0byBQdXNoJyAnTm8gY2hhbmdlcy4gRXZlcnl0aGluZyBjbGVhbi4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICBpZiAoJE1vZGUgLWVxICdTYWZlJykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEyICgiU0FGRTogYmFzZT0nezB9JyB8IGN1cnJlbnQgYnJhbmNoPSd7MX0nIiAtZiAkYmFzZSwgJGJyYW5jaCkKCiAgICAgICAgICAgICRkaXJ0eSA9IEdldC1TdGF0dXNQb3JjZWxhaW4KICAgICAgICAgICAgaWYgKCRkaXJ0eSAtYW5kIC1ub3QgJEF1dG9TdGFzaCkgewogICAgICAgICAgICAgICAgdGhyb3cgJ1NBRkUgcmVxdWlyZXMgYSBjbGVhbiB3b3JraW5nIHRyZWUgb3IgLUF1dG9TdGFzaCAoYmVjYXVzZSBpdCBjaGVja3Mgb3V0IGJhc2UpLicKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGRpZFN0YXNoID0gSW52b2tlLUF1dG9TdGFzaCAtRW5hYmxlOiRBdXRvU3Rhc2gKCiAgICAgICAgICAgIEVuc3VyZS1Mb2NhbEJyYW5jaCAkYmFzZQoKICAgICAgICAgICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBjaGVja291dCB7MH0iIC1mICRiYXNlKSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0NoZWNrb3V0IGJhc2UnICgiZ2l0IGNoZWNrb3V0IHswfSIgLWYgJGJhc2UpIH0KCiAgICAgICAgICAgIEludm9rZS1BdXRvUHVsbCAkYmFzZQoKICAgICAgICAgICAgaWYgKCRTYWZlVXNlQ3VycmVudEJyYW5jaCkgewogICAgICAgICAgICAgICAgV3JpdGUtU3RlcCAxNCAnU0FGRTogdXNpbmcgY3VycmVudCBicmFuY2ggKC1TYWZlVXNlQ3VycmVudEJyYW5jaCknCiAgICAgICAgICAgICAgICBpZiAoJGJyYW5jaCAtbmUgJGJhc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJERyeVJ1bikgeyBXcml0ZS1Ib3N0ICgiRFJZIFJVTjogZ2l0IGNoZWNrb3V0IHswfSIgLWYgJGJyYW5jaCkgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0NoZWNrb3V0IG9yaWdpbmFsJyAoImdpdCBjaGVja291dCB7MH0iIC1mICRicmFuY2gpIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRuZXdCcmFuY2ggPSBOZXctQXV0b0JyYW5jaE5hbWUKICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgMTQgKCJTQUZFOiBjcmVhdGluZyBicmFuY2ggezB9IiAtZiAkbmV3QnJhbmNoKQogICAgICAgICAgICAgICAgaWYgKCREcnlSdW4pIHsgV3JpdGUtSG9zdCAoIkRSWSBSVU46IGdpdCBjaGVja291dCAtYiB7MH0iIC1mICRuZXdCcmFuY2gpIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgICAgICAgICAgZWxzZSB7IEludm9rZS1DbWQgJ0NyZWF0ZSBTQUZFIGJyYW5jaCcgKCJnaXQgY2hlY2tvdXQgLWIgezB9IiAtZiAkbmV3QnJhbmNoKSB9CiAgICAgICAgICAgICAgICAkYnJhbmNoID0gJG5ld0JyYW5jaAogICAgICAgICAgICB9CgogICAgICAgICAgICBJbnZva2UtQXV0b1BvcFN0YXNoICRkaWRTdGFzaAogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAxMiAnU3Rhc2ggKyBwdWxsIChpZiBlbmFibGVkKScKICAgICAgICAgICAgJGRpZFN0YXNoID0gSW52b2tlLUF1dG9TdGFzaCAtRW5hYmxlOiRBdXRvU3Rhc2gKICAgICAgICAgICAgSW52b2tlLUF1dG9QdWxsICRicmFuY2gKICAgICAgICAgICAgSW52b2tlLUF1dG9Qb3BTdGFzaCAkZGlkU3Rhc2gKICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgMTggJ1JlY2FsY3VsYXRlIGNoYW5nZXMnCiAgICAgICAgJGNoYW5nZWQgPSBHZXQtQ2hhbmdlZEZpbGVzCiAgICAgICAgJHN0YWdlZCA9IEdldC1TdGFnZWRGaWxlcwogICAgICAgICRkb2NzT25seSA9IFRlc3QtRG9jc09ubHlDaGFuZ2UgJGNoYW5nZWQKICAgICAgICAkdG91Y2hlZFNyYyA9IFRlc3QtVG91Y2hlZFNyYyAkY2hhbmdlZAogICAgICAgICR0b3VjaGVkQ29uZmlnID0gVGVzdC1Ub3VjaGVkQ29uZmlnICRjaGFuZ2VkCiAgICAgICAgJGJhc2VEaWZmID0gR2V0LUNoYW5nZWRGaWxlc1NpbmNlQmFzZSAkYmFzZQoKICAgICAgICBXcml0ZS1TdGVwIDIyICgiRGV0ZWN0ZWQgezB9IGZpbGVzLiBEb2NzLW9ubHk9ezF9IHwgc3JjPXsyfSB8IGNvbmZpZz17M30iIC1mICRjaGFuZ2VkLkNvdW50LCAkZG9jc09ubHksICR0b3VjaGVkU3JjLCAkdG91Y2hlZENvbmZpZykKICAgICAgICBpZiAoJGJhc2VEaWZmIC1hbmQgJGJhc2VEaWZmLkNvdW50IC1ndCAwKSB7IFdyaXRlLUhvc3QgKCJCYXNlIGRpZmYgZmlsZXM6IHswfSIgLWYgJGJhc2VEaWZmLkNvdW50KSAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KCiAgICAgICAgJGZpbGVzRm9yR3VhcmRzID0gR2V0LVBhdGhzRm9yR3VhcmRzCgogICAgICAgIGlmICgtbm90ICRTa2lwU2VjcmV0U2NhbikgewogICAgICAgICAgICBXcml0ZS1TdGVwIDI4ICdTZWNyZXQgc2NhbicKICAgICAgICAgICAgJGxvZ1NlY3JldCA9IEpvaW4tUGF0aCAkcnVuRGlyICdzZWNyZXRfc2Nhbi5sb2cnCiAgICAgICAgICAgIGlmICgtbm90ICREcnlSdW4pIHsgVGVzdC1TZWNyZXRzICRmaWxlc0Zvckd1YXJkcyAkbG9nU2VjcmV0IH0gZWxzZSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IHNlY3JldCBzY2FuIHdvdWxkIHJ1bicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheSB9CiAgICAgICAgfQoKICAgICAgICBpZiAoLW5vdCAkU2tpcExhcmdlRmlsZVNjYW4pIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCAzMiAoIkxhcmdlIGZpbGUgY2hlY2sgKD57MH1NQikiIC1mICRNYXhGaWxlTUIpCiAgICAgICAgICAgICRsb2dMYXJnZSA9IEpvaW4tUGF0aCAkcnVuRGlyICdsYXJnZV9maWxlcy5sb2cnCiAgICAgICAgICAgIGlmICgtbm90ICREcnlSdW4pIHsgVGVzdC1MYXJnZUZpbGVzICRmaWxlc0Zvckd1YXJkcyAkTWF4RmlsZU1CICRsb2dMYXJnZSB9IGVsc2UgeyBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBsYXJnZSBmaWxlIHNjYW4gd291bGQgcnVuJyAtRm9yZWdyb3VuZENvbG9yIERhcmtHcmF5IH0KICAgICAgICB9CgogICAgICAgICRwa2cgPSBKb2luLVBhdGggJHJvb3QgJ3BhY2thZ2UuanNvbicKCiAgICAgICAgaWYgKCRWZXJzaW9uQnVtcCAtbmUgJ25vbmUnKSB7CiAgICAgICAgICAgIFdyaXRlLVN0ZXAgMzYgKCJWZXJzaW9uIGJ1bXA6IHswfSIgLWYgJFZlcnNpb25CdW1wKQogICAgICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRwa2cpKSB7IHRocm93ICdWZXJzaW9uIGJ1bXAgcmVxdWVzdGVkIGJ1dCBwYWNrYWdlLmpzb24gbm90IGZvdW5kLicgfQogICAgICAgICAgICBJbnZva2UtVmVyc2lvbkJ1bXAgJFZlcnNpb25CdW1wCiAgICAgICAgfQoKICAgICAgICAkZWZmZWN0aXZlQ2hlY2tzTW9kZSA9ICRDaGVja3NNb2RlCiAgICAgICAgaWYgKCRTa2lwQ2hlY2tzIC1vciAkZG9jc09ubHkpIHsgJGVmZmVjdGl2ZUNoZWNrc01vZGUgPSAnT2ZmJyB9CgogICAgICAgIGlmICgkZWZmZWN0aXZlQ2hlY2tzTW9kZSAtZXEgJ09mZicpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA0NCAoIkNoZWNrczogT0ZGIChTa2lwQ2hlY2tzPXswfSB8IGRvY3NPbmx5PXsxfSB8IENoZWNrc01vZGU9ezJ9KSIgLWYgW2Jvb2xdJFNraXBDaGVja3MsIFtib29sXSRkb2NzT25seSwgJENoZWNrc01vZGUpCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoLW5vdCAoVGVzdC1Db21tYW5kRXhpc3RzICducG0nKSkgewogICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA0NCAnbnBtIG5vdCBmb3VuZC4gU2tpcHBpbmcgcHJlZmxpZ2h0IGNoZWNrcy4nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkc2NyaXB0cyA9IEdldC1QYWNrYWdlU2NyaXB0cyAkcGtnCgogICAgICAgICAgICAgICAgaWYgKCRlZmZlY3RpdmVDaGVja3NNb2RlIC1lcSAnRnVsbCcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJHNjcmlwdHMuQ29udGFpbnNLZXkoJ2xpbnQnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDUyICdQcmVmbGlnaHQ6IExpbnQgKEZVTEwpJwogICAgICAgICAgICAgICAgICAgICAgICBJbnZva2UtQ21kICdMaW50JyAnbnBtIHJ1biBsaW50JwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA1MiAiTm8gJ2xpbnQnIHNjcmlwdC4gU2tpcC4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA1MiAnUHJlZmxpZ2h0OiBMaW50IChTTUFSVCknCiAgICAgICAgICAgICAgICAgICAgSW52b2tlLVNtYXJ0TGludCAkcm9vdCAkY2hhbmdlZCAkcnVuRGlyCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHJ1bkhlYXZ5ID0gJHRvdWNoZWRTcmMKICAgICAgICAgICAgICAgIGlmICgkcnVuSGVhdnkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJHNjcmlwdHMuQ29udGFpbnNLZXkoJ3R5cGVjaGVjaycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNTggJ1ByZWZsaWdodDogVHlwZWNoZWNrJwogICAgICAgICAgICAgICAgICAgICAgICBJbnZva2UtQ21kICdUeXBlY2hlY2snICducG0gcnVuIHR5cGVjaGVjaycKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY3JpcHRzLkNvbnRhaW5zS2V5KCd0ZXN0JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3RlcCA2MCAnUHJlZmxpZ2h0OiBUZXN0cycKICAgICAgICAgICAgICAgICAgICAgICAgSW52b2tlLUNtZCAnVGVzdHMnICducG0gdGVzdCcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY3JpcHRzLkNvbnRhaW5zS2V5KCdidWlsZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVN0ZXAgNjIgJ1ByZWZsaWdodDogQnVpbGQnCiAgICAgICAgICAgICAgICAgICAgICAgIEludm9rZS1DbWQgJ0J1aWxkJyAnbnBtIHJ1biBidWlsZCcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDYwICdTbWFydCBwcmVmbGlnaHQ6IG5vIHNyYyBjaGFuZ2VzOyBza2lwcGluZyB0eXBlY2hlY2svdGVzdC9idWlsZC4nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkU2tpcEF1ZGl0IC1vciAkZG9jc09ubHkpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA2NCAoIkF1ZGl0OiBza2lwPXswfSB8IGRvY3NPbmx5PXsxfSIgLWYgW2Jvb2xdJFNraXBBdWRpdCwgW2Jvb2xdJGRvY3NPbmx5KQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKFRlc3QtUGF0aCAkcGtnKSB7CiAgICAgICAgICAgICAgICBXcml0ZS1TdGVwIDY0ICgibnBtIGF1ZGl0IChsZXZlbD17MH0pIiAtZiAkQXVkaXRMZXZlbCkKICAgICAgICAgICAgICAgICRhdWRpdCA9IEludm9rZS1BdWRpdCAkQXVkaXRMZXZlbAogICAgICAgICAgICAgICAgaWYgKCRhdWRpdC5SYW4gLWFuZCAkYXVkaXQuRmFpbGVkIC1hbmQgJEZhaWxPbkF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKCJucG0gYXVkaXQgZm91bmQgaXNzdWVzIChsZXZlbCA+PSB7MH0pLiBSZXZpZXcgbG9nczogezF9IiAtZiAkQXVkaXRMZXZlbCwgJGF1ZGl0LlRleHRMb2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFdyaXRlLVN0ZXAgNzIgJ1N0YWdpbmcgKGdpdCBhZGQgLUEpJwogICAgICAgIGlmICgkRHJ5UnVuKSB7IFdyaXRlLUhvc3QgJ0RSWSBSVU46IGdpdCBhZGQgLUEnIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya0dyYXkgfQogICAgICAgIGVsc2UgeyBJbnZva2UtQ21kICdHaXQgQWRkJyAnZ2l0IGFkZCAtQScgfQoKICAgICAgICAkc3RhZ2VkID0gR2V0LVN0YWdlZEZpbGVzCiAgICAgICAgaWYgKC1ub3QgJHN0YWdlZCAtb3IgJHN0YWdlZC5Db3VudCAtZXEgMCkgewogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnTm8gc3RhZ2VkIGNoYW5nZXMuIE5vdGhpbmcgdG8gcHVzaC4nCiAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdOb3RoaW5nIHN0YWdlZC4gRG9uZS4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICAkZmluYWxNc2cgPSBOZXctQ29tbWl0TWVzc2FnZSAkTWVzc2FnZSAkc3RhZ2VkCiAgICAgICAgVGVzdC1Db21taXRNZXNzYWdlICRmaW5hbE1zZwoKICAgICAgICAkY2hhbmdlbG9nUGF0aCA9IEpvaW4tUGF0aCAkcnVuRGlyICdjaGFuZ2Vsb2cubWQnCiAgICAgICAgaWYgKCRHZW5lcmF0ZUNoYW5nZWxvZykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDc4ICdHZW5lcmF0aW5nIGNoYW5nZWxvZycKICAgICAgICAgICAgTmV3LUNoYW5nZWxvZyAkY2hhbmdlbG9nUGF0aCAkTW9kZSAkYnJhbmNoICRiYXNlICRmaW5hbE1zZyAkc3RhZ2VkCiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDg0ICgiQ29tbWl0OiB7MH0iIC1mICRmaW5hbE1zZykKICAgICAgICBpZiAoJERyeVJ1bikgewogICAgICAgICAgICBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgY29tbWl0IC1tIC4uLicgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgICAgICBXcml0ZS1Ib3N0ICdEUlkgUlVOOiBnaXQgcHVzaCcgLUZvcmVncm91bmRDb2xvciBEYXJrR3JheQogICAgICAgICAgICBXcml0ZS1TdGVwIDEwMCAnRFJZIFJVTiBjb21wbGV0ZScKICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLUFjdGl2aXR5ICdHaXQgQXV0byBQdXNoJyAtQ29tcGxldGVkCiAgICAgICAgICAgICRoZWFkID0gR2V0LUhlYWRDb21taXQKICAgICAgICAgICAgTmV3LVN1bW1hcnkgKEpvaW4tUGF0aCAkcnVuRGlyICdzdW1tYXJ5Lm1kJykgJE1vZGUgJGJyYW5jaCAkYmFzZSAkaGVhZCAkbnVsbCAkbnVsbCAkcnVuRGlyICRzdGFydFRpbWUgKEdldC1EYXRlKSAkdHJ1ZQogICAgICAgICAgICBJbnZva2UtVG9hc3QgJ0dpdCBBdXRvIFB1c2gnICdEcnkgcnVuIGNvbXBsZXRlZC4nCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQoKICAgICAgICBJbnZva2UtQ21kICdHaXQgQ29tbWl0JyAoImdpdCBjb21taXQgLW0gezB9IiAtZiAoUXVvdGUtQ21kQXJnICRmaW5hbE1zZykpCgogICAgICAgIFdyaXRlLVN0ZXAgOTAgKCJQdXNoOiBvcmlnaW4vezB9IiAtZiAkYnJhbmNoKQogICAgICAgIGlmICgkTW9kZSAtZXEgJ1NhZmUnKSB7IEludm9rZS1DbWQgJ0dpdCBQdXNoIChzZXQtdXBzdHJlYW0pJyAoImdpdCBwdXNoIC11IG9yaWdpbiB7MH0iIC1mICRicmFuY2gpIH0KICAgICAgICBlbHNlIHsgSW52b2tlLUNtZCAnR2l0IFB1c2gnICdnaXQgcHVzaCcgfQoKICAgICAgICAkcGtnVmVyc2lvbiA9IEdldC1QYWNrYWdlVmVyc2lvbiAkcGtnCiAgICAgICAgJHRhZ05hbWUgPSAkbnVsbAogICAgICAgICRyZWxlYXNlVXJsID0gJG51bGwKICAgICAgICAkc2hvdWxkVGFnID0gJFRhZyAtb3IgKCRWZXJzaW9uQnVtcCAtbmUgJ25vbmUnKQoKICAgICAgICBpZiAoJHNob3VsZFRhZykgewogICAgICAgICAgICBXcml0ZS1TdGVwIDkzICgiVGFnZ2luZyB2ZXJzaW9uOiB7MH0iIC1mICRwa2dWZXJzaW9uKQogICAgICAgICAgICAkdGFnTmFtZSA9IEludm9rZS1UYWcgJHBrZ1ZlcnNpb24KICAgICAgICAgICAgaWYgKCRQdXNoVGFnKSB7IEludm9rZS1QdXNoVGFnICR0YWdOYW1lIH0KICAgICAgICB9CgogICAgICAgIGlmICgkQ3JlYXRlUmVsZWFzZSkgewogICAgICAgICAgICBpZiAoLW5vdCAkdGFnTmFtZSkgeyB0aHJvdyAnQ3JlYXRlUmVsZWFzZSByZXF1aXJlcyBhIHRhZy4gVXNlIC1UYWcgb3IgLVZlcnNpb25CdW1wLicgfQogICAgICAgICAgICBXcml0ZS1TdGVwIDk1ICgiQ3JlYXRpbmcgR2l0SHViIFJlbGVhc2U6IHswfSIgLWYgJHRhZ05hbWUpCiAgICAgICAgICAgICRyZWxlYXNlVXJsID0gSW52b2tlLUNyZWF0ZVJlbGVhc2UgJHRhZ05hbWUKICAgICAgICB9CgogICAgICAgICRwclVybCA9ICRudWxsCiAgICAgICAgaWYgKCRPcGVuUHIpIHsKICAgICAgICAgICAgV3JpdGUtU3RlcCA5NyAoIkNyZWF0aW5nIFBSIChnaCkgYmFzZT0nezB9JyIgLWYgJGJhc2UpCiAgICAgICAgICAgICRwclVybCA9IEludm9rZS1PcGVuUHIgJGJhc2UgJGJyYW5jaCAkY2hhbmdlbG9nUGF0aAogICAgICAgICAgICBpZiAoJE9wZW5QckluQnJvd3NlcikgewogICAgICAgICAgICAgICAgSW52b2tlLU9wZW5QckluQnJvd3NlcgogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBXcml0ZS1TdGVwIDEwMCAnRG9uZScKICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2gnIC1Db21wbGV0ZWQKCiAgICAgICAgV3JpdGUtUnVuU3VtbWFyeSAkYnJhbmNoICRvcmlnaW4gJHJ1bkRpcgoKICAgICAgICAkaGVhZCA9IEdldC1IZWFkQ29tbWl0CiAgICAgICAgTmV3LVN1bW1hcnkgKEpvaW4tUGF0aCAkcnVuRGlyICdzdW1tYXJ5Lm1kJykgJE1vZGUgJGJyYW5jaCAkYmFzZSAkaGVhZCAkcHJVcmwgJHJlbGVhc2VVcmwgJHJ1bkRpciAkc3RhcnRUaW1lIChHZXQtRGF0ZSkgJGZhbHNlCgogICAgICAgIEludm9rZS1Ub2FzdCAnR2l0IEF1dG8gUHVzaCcgKCJTdWNjZXNzIG9uIHswfSIgLWYgJGJyYW5jaCkKICAgICAgICByZXR1cm4gMAogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCcgLUNvbXBsZXRlZAogICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICBXcml0ZS1Ib3N0ICgiISEgU3RvcHBlZCB3aXRoIGVycm9yOiB7MH0iIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAtRm9yZWdyb3VuZENvbG9yIFJlZAogICAgICAgIGlmICgkcnVuRGlyKSB7IFdyaXRlLUhvc3QgKCJMb2dzOiB7MH0iIC1mICRydW5EaXIpIC1Gb3JlZ3JvdW5kQ29sb3IgWWVsbG93IH0KCiAgICAgICAgaWYgKCRydW5EaXIpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICRsYXN0TG9nID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkcnVuRGlyIC1GaWx0ZXIgJyoubG9nJyB8IFNvcnQtT2JqZWN0IExhc3RXcml0ZVRpbWUgLURlc2NlbmRpbmcgfCBTZWxlY3QtT2JqZWN0IC1GaXJzdCAxCiAgICAgICAgICAgICAgICBpZiAoJGxhc3RMb2cpIHsgV3JpdGUtTG9nVGFpbCAkbGFzdExvZy5GdWxsTmFtZSAkVGFpbExpbmVzIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuICgiRmFpbGVkIHRvIHJlYWQgbGFzdCBsb2c6IHswfSIgLWYgJF8uRXhjZXB0aW9uLk1lc3NhZ2UpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkT3BlbkxvZ09uRmFpbCAtYW5kICRydW5EaXIgLWFuZCAoR2V0LUNvbW1hbmQgY29kZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkpIHsKICAgICAgICAgICAgdHJ5IHsgY29kZSAkcnVuRGlyIH0gY2F0Y2ggeyBXcml0ZS1XYXJuICdGYWlsZWQgdG8gb3BlbiBWUyBDb2RlLicgfQogICAgICAgIH0KCiAgICAgICAgSW52b2tlLVRvYXN0ICdHaXQgQXV0byBQdXNoJyAnRkFJTEVELiBDaGVjayBsb2dzLicKICAgICAgICByZXR1cm4gMQogICAgfQogICAgZmluYWxseSB7CiAgICAgICAgUmVsZWFzZS1SdW5Mb2NrICRsb2NrSGFuZGxlCiAgICB9Cn0KCmlmICgkV2F0Y2gpIHsKICAgICRzdGFtcCA9IEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnCiAgICBXcml0ZS1Ib3N0ICgiIyMgV2F0Y2ggT04gKHswfSkgfCBpbnRlcnZhbD17MX1zIGRlYm91bmNlPXsyfXMgfCBtb2RlPXszfSBjaGVja3M9ezR9IiAtZiAkc3RhbXAsICRXYXRjaEludGVydmFsU2VjLCAkV2F0Y2hEZWJvdW5jZVNlYywgJE1vZGUsICRDaGVja3NNb2RlKSAtRm9yZWdyb3VuZENvbG9yIEN5YW4KICAgICRyb290ID0gVGVzdC1JbkdpdFJlcG8KICAgICRzY3JpcHQ6Um9vdCA9ICRyb290CiAgICBpZiAoLW5vdCAkc2NyaXB0OldhdGNoTG9nRGlyKSB7ICRzY3JpcHQ6V2F0Y2hMb2dEaXIgPSBOZXctV2F0Y2hMb2dEaXIgJHJvb3QgfQoKICAgICRsYXN0U2lnID0gJycKICAgICRsYXN0Q2hhbmdlQXQgPSAkbnVsbAoKICAgIHdoaWxlICgkdHJ1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRzaWcgPSBHZXQtU3RhdHVzU2lnbmF0dXJlICRzY3JpcHQ6V2F0Y2hMb2dEaXIKICAgICAgICAgICAgJG5vdyA9IEdldC1EYXRlCgogICAgICAgICAgICBpZiAoJHNpZyAtbmUgJGxhc3RTaWcpIHsKICAgICAgICAgICAgICAgICRsYXN0U2lnID0gJHNpZwogICAgICAgICAgICAgICAgJGxhc3RDaGFuZ2VBdCA9ICRub3cKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRzaWcgLWFuZCAkbGFzdENoYW5nZUF0KSB7CiAgICAgICAgICAgICAgICAkYWdlID0gKCRub3cgLSAkbGFzdENoYW5nZUF0KS5Ub3RhbFNlY29uZHMKICAgICAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1BY3Rpdml0eSAnR2l0IEF1dG8gUHVzaCAoV2F0Y2gp
### END B64 CHUNK 1/2
### BEGIN B64 CHUNK 2/2
JyAtU3RhdHVzICgiQ2hhbmdlcyBkZXRlY3RlZC4uLiBkZWJvdW5jZSB7MDpOMH0vezF9cyIgLWYgJGFnZSwgJFdhdGNoRGVib3VuY2VTZWMpIC1QZXJjZW50Q29tcGxldGUgKFtNYXRoXTo6TWluKDk5LCBbaW50XSgoJGFnZSAvIFtNYXRoXTo6TWF4KDEsICRXYXRjaERlYm91bmNlU2VjKSkgKiAxMDApKSkKICAgICAgICAgICAgICAgIGlmICgkYWdlIC1nZSAkV2F0Y2hEZWJvdW5jZVNlYykgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUhvc3QgJycKICAgICAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICdDaGFuZ2VzIHN0YWJsZS4gUnVubmluZyBhdXRvLXB1c2guLi4nIC1Gb3JlZ3JvdW5kQ29sb3IgR3JlZW4KICAgICAgICAgICAgICAgICAgICAkY29kZSA9IEludm9rZS1HaXRBdXRvUHVzaE9uY2UgLUZyb21XYXRjaAogICAgICAgICAgICAgICAgICAgICRsYXN0U2lnID0gJycKICAgICAgICAgICAgICAgICAgICAkbGFzdENoYW5nZUF0ID0gJG51bGwKICAgICAgICAgICAgICAgICAgICBpZiAoJGNvZGUgLWVxIDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgJFdhdGNoSW50ZXJ2YWxTZWMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgkY29kZSAtbmUgMCAtYW5kICRXYXRjaFN0b3BPbkZhaWwpIHsgZXhpdCAkY29kZSB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRXYXRjaE9uY2UpIHsgZXhpdCAkY29kZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBXcml0ZS1Qcm9ncmVzcyAtQWN0aXZpdHkgJ0dpdCBBdXRvIFB1c2ggKFdhdGNoKScgLVN0YXR1cyAnTm8gY2hhbmdlcy4uLiB3YWl0aW5nJyAtUGVyY2VudENvbXBsZXRlIDAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgJFdhdGNoSW50ZXJ2YWxTZWMKICAgICAgICB9CiAgICAgICAgY2F0Y2ggewogICAgICAgICAgICBXcml0ZS1Ib3N0ICgiISEgV2F0Y2ggbG9vcCBlcnJvcjogezB9IiAtZiAkXy5FeGNlcHRpb24uTWVzc2FnZSkgLUZvcmVncm91bmRDb2xvciBSZWQKICAgICAgICAgICAgaWYgKCRXYXRjaFN0b3BPbkZhaWwpIHsgZXhpdCAxIH0KICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgKFtNYXRoXTo6TWF4KDIsICRXYXRjaEludGVydmFsU2VjKSkKICAgICAgICB9CiAgICB9Cn0KCmV4aXQgKEludm9rZS1HaXRBdXRvUHVzaE9uY2UpDQo=
### END B64 CHUNK 2/2
### END B64 FILE: git-push.ps1

